var tgAuth=function(t){"use strict";const e=t=>{t.querySelectorAll("[ref]").forEach(e=>{t["_$"+e.getAttribute("ref")]=e})},s=(t,e,s)=>{t.addEventListener(e,s)},i=(t,e,s)=>{t.removeEventListener(e,s)};let a=[];const n=(t,e)=>{a.push({type:t,handler:e}),s(window,t,e)};let o,r=[];const h=()=>{r.forEach(t=>{t()})},l=()=>{o&&clearTimeout(o),o=setTimeout(h,100)};let d=!1;const c=t=>Math.floor(Math.random()*t),u=async t=>{let e=await tgProto.sendMethod("auth.sendCode",{phone_number:t,api_id:832266,api_hash:"efdc90dbf343a65bb4fba668f6e7d3a3",settings:{}});return e.error_message?"AUTH_RESTART"==e.error_message?await u(t):{err:e.error_message}:{hash:e.phone_code_hash,codeLength:e.type.length}};class _ extends HTMLElement{constructor(){super(),this._isShowingEnd=!1,this._isProtoInited=!1,this._isPhoneEntered=!1,this._phoneNumber="",this._phoneHash="",this._isCountrySetted=!1,this._detectedCountry=""}connectedCallback(){this.className="auth a-show-down-screen",this.innerHTML='<tga-block-phone ref="blockPhone"></tga-block-phone><tga-block-code ref="blockCode"></tga-block-code><tga-block-register ref="blockRegister"></tga-block-register>',e(this),s(this._$blockPhone,"bpSubmit",()=>{this._isPhoneEntered=!0,this._isProtoInited&&this._sendCode()}),s(this._$blockCode,"bcEditPhone",()=>{(async(t,e)=>{await tgProto.sendMethod("auth.cancelCode",{phone_number:t,phone_code_hash:e})})(this._phoneNumber,this._phoneHash),this._$blockCode.hide(),this._$blockPhone.show()}),s(this._$blockCode,"bcCodeSubmit",async()=>{const t=await(async(t,e,s)=>{const i=await tgProto.sendMethod("auth.signIn",{phone_number:t,phone_code_hash:e,phone_code:s});if("auth.authorizationSignUpRequired"==i._){let t="";return i.terms_of_service&&i.terms_of_service.text&&(t=i.terms_of_service.text),{next:"reg",termOfService:t}}return i.error_message?"SESSION_PASSWORD_NEEDED"==i.error_message?{next:"pass"}:{err:i.error_message}:"auth.authorization"==i._?(tgMain.setStorage("user_id",i.user.id),{next:"done"}):void 0})(this._phoneNumber,this._phoneHash,this._$blockCode.getCodeValue());if(t.err)return"PHONE_NUMBER_UNOCCUPIED"==t.err?(this._$blockCode.hide(!0),void this._$blockRegister.show("")):"PHONE_CODE_EXPIRED"==t.err?(this._$blockCode.hide(),this._$blockPhone.show(),void this._showInfoModal("Timeout Error","Phone code expired, try resend it.")):this._isFloodError(t.err)?void this._$blockCode.setDisabledCode(!1):this._$blockCode.setCodeError(t.err);"done"==t.next&&this._initApp(),"pass"==t.next&&this._$blockCode.showPasswordForm(),"reg"==t.next&&(this._$blockCode.hide(!0),this._$blockRegister.show(t.termOfService))}),s(this._$blockCode,"bcPasswordSubmit",async()=>{const t=await(async t=>{const e=await tgProto.sendMethod("account.getPassword"),s=await tgMain.callWorker("encryptPassword",{password:t,g:e.current_algo.g,p:e.current_algo.p,salt1:e.current_algo.salt1,salt2:e.current_algo.salt2,srpB:e.srp_B}),i=await tgProto.sendMethod("auth.checkPassword",{password:{_:"inputCheckPasswordSRP",srp_id:e.srp_id,A:s.A,M1:s.M1}});if(i.error_message)return{err:i.error_message};if("auth.authorizationSignUpRequired"==i._){let t="";return i.terms_of_service&&i.terms_of_service.text&&(t=i.terms_of_service.text),{next:"reg",termOfService:t}}return"auth.authorization"==i._?(tgMain.setStorage("user_id",i.user.id),{next:"done"}):void 0})(this._$blockCode.getPasswordValue());if(t.err)return this._isFloodError(t.err)?void this._$blockCode.setDisabledPassword(!1):this._$blockCode.setPasswordError(t.err);"done"==t.next&&this._initApp(),"reg"==t.next&&(this._$blockCode.hide(!0),this._$blockRegister.show(t.termOfService))}),s(this._$blockRegister,"brSubmit",async()=>{const t=await(async(t,e,s,i)=>{const a=await tgProto.sendMethod("auth.signUp",{phone_number:t,phone_code_hash:e,first_name:s,last_name:i});return a.error_message?{err:a.error_message}:"auth.authorization"==a._?(tgMain.setStorage("user_id",a.user.id),{next:"done"}):void 0})(this._plainPhone,this._hashPhone,this._$blockRegister.getFirstValue(),this._$blockRegister.getLastValue());if(t.err)return"PHONE_CODE_EXPIRED"==t.err?(this._$blockRegister.hide(),this._$blockCode.hidePasswordForm(),this._$blockCode.hide(),this._$blockPhone.show(),void this._showInfoModal("Timeout Error","Phone code expired, try resend it.")):this._isFloodError(t.err)?void this._$blockRegister.setDisabled(!1):this._$blockRegister.setError(t.err);const e=this._$blockRegister.getPhotoData();if(!e)return this._initApp();const s=Uint8Array.from(atob(e.split(",")[1]),t=>t.charCodeAt(0)),i=await(async t=>{const e=t.length>=10485760;let s=262144;t.length>67108864?s=524288:t.length<102400&&(s=32768);const i=Math.ceil(t.length/s),a=[c(4294967295),c(4294967295)];let n=0,o=0;const r=e?"upload.saveBigFilePart":"upload.saveFilePart";for(;n<i;)await tgProto.sendMethod(r,{file_id:a,file_part:n,file_total_parts:i,bytes:t.slice(o,o+s)}),o+=s,n++;return{_:e?"inputFileBig":"inputFile",id:a,parts:i,name:"profile.jpg",md5_checksum:""}})(s);await(async t=>await tgProto.sendMethod("photos.uploadProfilePhoto",{file:t}))(i),this._initApp()});let t=!0;tgProto.onCountryDetected=t=>{this._isShowingEnd?(this._isCountrySetted=!0,this._$blockPhone.setCountry(t.toLowerCase())):this._detectedCountry=t},tgProto.onConnect=()=>{t=!0},tgProto.onDisconnect=()=>{if(!t)return;t=!1;const e=new XMLHttpRequest;e.open("HEAD",`//${location.host}${location.pathname}?${Date.now()}`,!0),e.timeout=2e3,e.onload=()=>{this._showInfoModal("Network Error","Error connecting to Telegram servers.\n           It looks like in your region access to Telegram is blocked.\n           Try using VPN or proxy server to bypass the blocking.")},e.ontimeout=e.onerror=()=>{this._showInfoModal("Network Error","Error connecting to Telegram servers.\n           It looks like internet connection is lost.\n           Check your internet connection and try again.")},e.send(null)},setTimeout(()=>{this._isShowingEnd=!0,this._detectedCountry&&this._$blockPhone.setCountry(this._detectedCountry.toLowerCase())},1e3),window.onkeydown=t=>{9==t.which&&t.preventDefault()}}async protoInited(){if(this._isProtoInited=!0,this._isPhoneEntered)return void this._sendCode();if(this._isCountrySetted)return;const t=await tgProto.getCountry();this._isShowingEnd?this._$blockPhone.setCountry(t.toLowerCase()):this._detectedCountry=t}lottieLoaded(){this._$blockCode.lottieLoaded()}async _sendCode(){const t=this._$blockPhone.getNumber(),e=await u(t.plain);if(e.err)return this._isFloodError(e.err)?void this._$blockPhone.setDisabled(!1):this._$blockPhone.setError(e.err);const s=this._$blockPhone.isTemp();tgMain.changeStorageType(s),this._phoneNumber=t.plain,this._phoneHash=e.hash,this._$blockCode.setData(t.formatted,e.codeLength),this._$blockPhone.hide(),this._$blockCode.show()}_isFloodError(t){return"FLOOD"==t.split("_")[0]&&(this._showInfoModal("Flood Error",`The maximum allowed number of attempts\n        to do this action has been exceeded.<br>\n        Try again after ${t.split("_")[2]} sec.`),!0)}_showInfoModal(t,e){const s=document.createElement("tga-modal");s.setAttribute("header",t),s.innerHTML=e,document.body.appendChild(s)}_initApp(){tgProto.exportAuth();const t=document.createElement("div");t.className="page-overlay",document.body.appendChild(t),tgMain.loadApp(),document.body.style.overflow="hidden",this.classList.add("a-hide-up-screen"),tgProto.onConnect=null,tgProto.onDisconnect=null,r=[],i(window,"resize",l),a.forEach(t=>{i(window,t.type,t.handler)}),a=[],this.onanimationend=()=>{this.remove(),t.remove(),document.body.style.overflow=null,window.onkeydown=null,tgMain.initApp()}}}customElements.get("tga-block-auth")||customElements.define("tga-block-auth",_);class p extends HTMLElement{constructor(){super(),this._isLoading=!1,this._codeLength=5}connectedCallback(){this.className="auth-screen auth-animated auth-animated__hide-right",this.innerHTML='<div class="auth-header auth-header__monkey"><tga-monkey ref="monkey"></tga-monkey></div><div class="auth-animated-wrapper"><div class="auth-animated" ref="formCode"><div class="auth-title"><span ref="phone"></span> <span class="icon icon__a icon__edit" ref="editPhone"></span></div><div class="auth-info">We have sent you an SMS<br>with the code.</div><div class="auth-field" ref="authFieldCode"><tga-input-code ref="inputCode"></tga-input-code></div></div><div class="auth-animated auth-animated__hide-right" ref="formPassword"><div class="auth-title">Enter a Password</div><div class="auth-info">Your account is protected with<br>an additional password.</div><div class="auth-field"><tga-input-password ref="inputPassword"></tga-input-password></div><div class="auth-field auth-field__button-mt-small"><tga-button hidden ref="buttonPassword">Next</tga-button></div></div></div>',e(this),s(this._$editPhone,"click",()=>{this._isLoading||this.dispatchEvent(new CustomEvent("bcEditPhone"))}),s(this._$inputCode,"itFocus",()=>{this._$monkey.playTrack(this._$inputCode.getValue().length,this._codeLength)}),s(this._$inputCode,"itInput",()=>{this._$monkey.playTrack(this._$inputCode.getValue().length,this._codeLength)}),s(this._$inputCode,"itBlur",()=>{this._$monkey.playIdle()}),s(this._$inputCode,"itcSubmit",()=>{this.setDisabledCode(!0),this._$editPhone.classList.add("a-is-cursor-not-allowed"),this._isLoading=!0,this.dispatchEvent(new CustomEvent("bcCodeSubmit"))}),s(this._$inputPassword,"itpToggle",()=>{this._$inputPassword.isFocused()&&(this._$inputPassword.isPasswordShowed()?this._$monkey.playPeek():this._$monkey.playClose())}),s(this._$inputPassword,"itFocus",()=>{this._$inputPassword.isPasswordShowed()?this._$monkey.playPeek():this._$monkey.playClose()}),s(this._$inputPassword,"itBlur",()=>{this._$monkey.playIdle()}),s(this._$inputPassword,"itInput",()=>{this._$buttonPassword.setHidden(!this._$inputPassword.getValue().length)});const t=this._submitPassword.bind(this);s(this._$inputPassword,"itEnter",t),s(this._$buttonPassword,"bClick",t),this.style.height="0px",this.style.overflow="hidden"}lottieLoaded(){this._$monkey.init()}getCodeValue(){return this._$inputCode.getValue()}getPasswordValue(){return this._$inputPassword.getValue()}setCodeError(t){this.setDisabledCode(!1),this._$editPhone.classList.remove("a-is-cursor-not-allowed"),this._isLoading=!1;let e="";switch(t){case"PHONE_CODE_INVALID":e="Invalid Code";break;default:e="Unknown Error"}this._$inputCode.setError(e),this._$inputCode.setFocus()}setPasswordError(t){this.setDisabledPassword(!1);let e="";switch(t){case"PASSWORD_HASH_INVALID":e="Invalid Password";break;default:e="Unknown Error"}this._$inputPassword.setError(e),this._$inputPassword.setFocus()}setData(t,e){this._$phone.textContent=t,this._$inputCode.setMaxLength(e),this._codeLength=e}showPasswordForm(){this._$formCode.classList.add("auth-animated__hide-left"),this._$formPassword.classList.remove("auth-animated__hide-right"),this._$inputPassword.setFocus()}hidePasswordForm(){this._$formCode.classList.remove("auth-animated__hide-left"),this._$formPassword.classList.add("auth-animated__hide-right"),this.setDisabledPassword(!1)}show(){this.style.height=null,this.style.overflow=null,this.classList.remove("auth-animated__hide-left"),this.classList.remove("auth-animated__hide-right"),this._$inputCode.setFocus(),setTimeout(()=>{this._$monkey.play()},600)}hide(t){this._$monkey.stop(),this.setDisabledCode(!1),this._$inputCode.setValue(""),this.classList.add(t?"auth-animated__hide-left":"auth-animated__hide-right"),setTimeout(()=>{this.style.height="0px",this.style.overflow="hidden"},600)}setDisabledCode(t){this._$inputCode.setDisabled(t),this._$inputCode.setLoading(t)}setDisabledPassword(t){this._$inputPassword.setDisabled(t),this._$buttonPassword.setLoading(t)}_submitPassword(){this.setDisabledPassword(!0),this.dispatchEvent(new CustomEvent("bcPasswordSubmit"))}}customElements.get("tga-block-code")||customElements.define("tga-block-code",p);class m extends HTMLElement{constructor(){super(),this._hasValidPhone=!1}connectedCallback(){this.className="auth-screen auth-animated",this.innerHTML='<div class="auth-header" ref="header"></div><div class="auth-title">Sign in to Telegram</div><div class="auth-info">Please confirm your country and<br>enter your phone number.</div><div class="auth-field"><tga-input-country ref="inputCountry"></tga-input-country></div><div class="auth-field"><tga-input-phone ref="inputPhone"></tga-input-phone></div><div class="auth-field auth-field__padded"><tga-input-checkbox checked="checked" ref="inputCheckbox">Keep me signed in</tga-input-checkbox></div><div class="auth-field auth-field__button"><tga-button hidden ref="button">Next</tga-button></div>',e(this),this._$header.appendChild(tgMain.resources.auth.logo),window.icTest=this._$inputCountry,s(this._$inputCountry,"icSelect",()=>{const t=this._$inputCountry.getSelected();this._$inputPhone.setData(t.code,t.format),t.short&&setTimeout(()=>{this._$inputCountry.filterByNumber(this._$inputPhone.getNumber().plain)},300)}),s(this._$inputPhone,"ipDetect",()=>{this._$inputCountry.filterByNumber(this._$inputPhone.getNumber().plain)}),s(this._$inputPhone,"ipValid",()=>{this._hasValidPhone||(this._hasValidPhone=!0,this._$button.setHidden(!1))}),s(this._$inputPhone,"ipInvalid",()=>{this._hasValidPhone&&(this._hasValidPhone=!1,this._$button.setHidden(!0))});const t=this._submit.bind(this);s(this._$inputPhone,"itEnter",t),s(this._$button,"bClick",t)}setCountry(t){this._$inputCountry.setCountry(t)}getNumber(){return this._$inputPhone.getNumber()}isTemp(){return!this._$inputCheckbox.isChecked()}setError(t){this.setDisabled(!1);let e="";switch(t){case"AUTH_RESTART":e="Send Code Error, try later";break;case"PHONE_NUMBER_INVALID":e="Invalid Phone Number";break;case"PHONE_NUMBER_BANNED":e="Phone Number Banned";break;case"SMS_CODE_CREATE_FAILED":e="Send Code Error";break;case"PHONE_NUMBER_FLOOD":case"PHONE_PASSWORD_FLOOD":e="You asked for the code too many times, try later";break;default:e="Unknown Error"}this._$inputPhone.setError(e),this._$inputPhone.setFocus()}show(){this.style.height=null,this.style.overflow=null,this.setDisabled(!1),this.classList.remove("auth-animated__hide-left")}hide(){this.classList.add("auth-animated__hide-left"),setTimeout(()=>{this.style.height="0px",this.style.overflow="hidden"},600)}setDisabled(t){this._$inputCountry.setDisabled(t),this._$inputPhone.setDisabled(t),this._$inputCheckbox.setDisabled(t),this._$button.setLoading(t)}_submit(){this._hasValidPhone&&(this.setDisabled(!0),this.dispatchEvent(new CustomEvent("bpSubmit")))}}customElements.get("tga-block-phone")||customElements.define("tga-block-phone",m);class g extends HTMLElement{constructor(){super(),this._hasValidName=!1,this._termOfService="",this._$photoPreview=null,this._photoData=""}connectedCallback(){this.className="auth-screen auth-animated auth-animated__hide-right",this.innerHTML='<div class="auth-flex"><div class="auth-flex_main"><div class="auth-header auth-header__photo" ref="header"><label class="auth-photo" ref="photo"><div class="auth-photo_overlay auth-photo_overlay__hide" ref="photoOverlay"></div><div class="icon icon__a icon__add-photo"></div><input type="file" ref="file" accept="image/jpeg,image/png"></label></div><div class="auth-title">Your Name</div><div class="auth-info">Enter your name and add<br>a profile picture</div><div class="auth-field"><tga-input-text label="Name" ref="inputFirst"></tga-input-text></div><div class="auth-field"><tga-input-text label="Last Name (optional)" ref="inputLast"></tga-input-text></div><div class="auth-field auth-field__button-mt-small"><tga-button hidden ref="button">Start messaging</tga-button></div></div><div class="auth-flex_footer" ref="termsBlock"><div class="auth-info">By signing up,<br>you agree to the <a href="#" class="a-link" ref="termsLink">Terms of Service</a>.</div></div></div>',e(this),s(this._$inputFirst,"itInput",()=>{this._$inputFirst.getValue().length&&!this._hasValidName&&(this._hasValidName=!0,this._$button.setHidden(!1)),!this._$inputFirst.getValue().length&&this._hasValidName&&(this._hasValidName=!1,this._$button.setHidden(!0))}),s(this._$file,"change",()=>{const t=new FileReader;t.onloadend=()=>{this._$file.value="";const e=document.createElement("tga-modal-photo");document.body.appendChild(e),e.setImage(t.result),s(e,"mpReady",()=>{const t=e.getPhotoData();e.close(),this._$photoPreview&&this._$photo.removeChild(this._$photoPreview),this._$photoPreview=document.createElement("img"),this._$photoPreview.src=t,this._$photo.insertBefore(this._$photoPreview,this._$photo.firstChild),this._$photoOverlay.classList.remove("auth-photo_overlay__hide"),this._photoData=t})},t.readAsDataURL(this._$file.files[0])});const t=this._submit.bind(this);s(this._$inputFirst,"itEnter",t),s(this._$inputLast,"itEnter",t),s(this._$button,"bClick",t),s(this._$termsLink,"click",t=>{t.preventDefault();const e=document.createElement("tga-modal");e.setAttribute("header","Terms of Service"),e.innerHTML=this._termOfService.replace(/\n/g,"<br>"),document.body.appendChild(e)}),this.style.height="0px",this.style.overflow="hidden"}getFirstValue(){return this._$inputFirst.getValue()}getLastValue(){return this._$inputLast.getValue()}getPhotoData(){return this._photoData}setError(t){if(this.setDisabled(!1),"FIRSTNAME_INVALID"==t)this._$inputFirst.setError("Name Invalid");else{if("LASTNAME_INVALID"==t)return this._$inputLast.setError("Last Name Invalid"),void this._$inputLast.setFocus();this._$inputFirst.setError("Unknown Error")}this._$inputFirst.setFocus()}show(t){this.style.height=null,this.style.overflow=null,this.classList.remove("auth-animated__hide-right"),t?this._termOfService=t:(this._termOfService="",this._$termsBlock.style.display="none",this._$inputFirst.setFocus())}hide(){this.setDisabled(!1),this.classList.add("auth-animated__hide-right"),setTimeout(()=>{this.style.height="0px",this.style.overflow="hidden"},600)}setDisabled(t){this._$inputFirst.setDisabled(t),this._$inputLast.setDisabled(t),this._$button.setLoading(t)}_submit(){this._hasValidName&&(this.setDisabled(!0),this.dispatchEvent(new CustomEvent("brSubmit")))}}customElements.get("tga-block-register")||customElements.define("tga-block-register",g);class f extends HTMLElement{constructor(){super(),this._content="",this._hideTimeout=0,this._$prevWave=null,this._$loader=null}connectedCallback(){const t=["a-button"];this.hasAttribute("circle")&&t.push("a-button__circle"),this.hasAttribute("hidden")&&t.push("a-is-hidden"),this.className=t.join(" "),this._content=this.innerHTML,this.innerHTML=`<span ref="text">${this._content}</span>`,e(this),s(this,"click",this._click)}setHidden(t){t?(this.classList.remove("a-show-down"),this.classList.add("a-hide-up"),this._hideTimeout=setTimeout(()=>{this.classList.add("a-is-hidden")},330)):(clearTimeout(this._hideTimeout),this.classList.remove("a-is-hidden"),this.classList.remove("a-hide-up"),this.classList.add("a-show-down"))}setLoading(t){this.classList[t?"add":"remove"]("a-button__loading"),t?(this._$loader=document.createElement("tga-loader"),this.appendChild(this._$loader)):(this._$loader&&this._$loader.destroy(),this._$loader=null);const e=t?"Please wait...":this._content;this._$text.style.transform="rotateX(90deg)",setTimeout(()=>{this._$text.innerHTML=e,this._$text.style.transform=null},150)}_click(t){if(this._$loader)return;const e=this.getBoundingClientRect(),s=t.x-e.x,i=t.y-e.y,a=document.createElement("div");a.classList.add("a-button_wave"),a.style.top=i+"px",a.style.left=s+"px",this.circle&&(a.style.animationDuration="0.3s"),this.appendChild(a),this._$prevWave&&this._$prevWave.classList.add("a-button_wave__hide"),this._$prevWave=a;const n=this.offsetWidth/2,o=(Math.abs(n-s)+n)/this.offsetWidth;setTimeout(()=>{a.classList.add("a-button_wave__hide"),setTimeout(()=>{this.removeChild(a)},330)},Math.ceil((this.circle?300:600)*o)),this.dispatchEvent(new CustomEvent("bClick"))}}customElements.get("tga-button")||customElements.define("tga-button",f);class b extends HTMLElement{connectedCallback(){const t=[];this.hasAttribute("blue")&&t.push("loader__blue"),this.hasAttribute("big")&&t.push("loader__big"),this.innerHTML=`<svg class="${t.join(" ")} loader" viewBox="25 25 50 50" ref="svg"><circle cx="50" cy="50" r="20"></circle></svg>`,e(this)}destroy(){return new Promise(t=>{this._$svg.classList.add("loader__hide"),setTimeout(()=>{this.remove(),t()},300)})}}customElements.get("tga-loader")||customElements.define("tga-loader",b);class v extends HTMLElement{connectedCallback(){this.className="a-modal";const t=this.hasAttribute("closable")?'<div class="a-modal_close" ref="close"><div class="icon icon__a icon__close"></div></div>':"";this.innerHTML=`<div class="a-modal_overlay" ref="overlay"></div><div class="a-modal_wrapper"><div class="a-modal_content" ref="content">${t}<div class="a-modal_header" ref="header">${this.getAttribute("header")}</div><div class="a-modal_button"><tga-button circle ref="button"><span class="icon icon__a icon__check"></span></tga-button></div><div class="a-modal_body" ref="body">${this.innerHTML}</div></div></div>`,e(this),this._$close&&s(this._$close,"click",this.close.bind(this)),s(this._$button,"bClick",this._buttonClickHandler.bind(this)),this.classList.add("a-modal__active"),this._$content.classList.add("a-show-down"),window.dispatchEvent(new CustomEvent("mousedown"))}close(){this._$content.classList.add("a-hide-down"),this._$overlay.classList.add("a-modal_overlay__hide"),setTimeout(()=>{this.remove()},300)}_buttonClickHandler(){this.close()}}customElements.get("tga-modal")||customElements.define("tga-modal",v);class y extends v{constructor(){super(),this._$img=new Image,this._context=null,this._ratio=0,this._width=0,this._prevWidth=0,this._height=0,this._prevHeight=0,this._x=0,this._prevX=0,this._y=0,this._prevY=0,this._photoData="",this._isAction=!1,this._actionType="",this._cursor="",this._initDistance=0,this._startX=0,this._startY=0,this._canvasBoundingRect=null,this._$pageOverlay=null,this._mouseUpHandlerBinded=this._mouseUpHandler.bind(this),this._mouseMoveHandlerBinded=this._mouseMoveHandler.bind(this),this._isClosing=!1}connectedCallback(){this.setAttribute("header","Drag to Reposition"),this.setAttribute("closable",!0),this.innerHTML='<canvas ref="canvasImage" width="720" height="720"></canvas><canvas ref="canvasCircle" width="360" height="360"></canvas>',super.connectedCallback(),this._$header.classList.add("a-modal_header__photo"),this._$body.style.height="500px",this._context=this._$canvasImage.getContext("2d");const t=this._$canvasCircle.getContext("2d");t.clearRect(0,0,360,360),t.fillStyle="rgba(255,255,255,0.68)",t.beginPath(),t.arc(180,180,160,0,2*Math.PI),t.rect(360,0,-360,360),t.fill(),s(this._$canvasCircle,"mousedown",t=>{if(this._isClosing)return;this._$pageOverlay=document.createElement("div"),this._$pageOverlay.className="page-overlay",document.body.appendChild(this._$pageOverlay),this._canvasBoundingRect=this._$canvasCircle.getBoundingClientRect(),this._isAction=!0,this._startX=t.layerX+250,this._startY=t.layerY+250;const e=this._startX-180,s=this._startY-180;this._initDistance=Math.sqrt(e*e+s*s),this._handleCursorType(this._startX,this._startY),this._actionType="move"==this._cursor?"move":"resize"}),s(window,"mouseup",this._mouseUpHandlerBinded),s(window,"mousemove",this._mouseMoveHandlerBinded),s(this._$canvasCircle,"mousemove",t=>{this._isAction||this._isClosing||this._handleCursorType(t.layerX+250,t.layerY+250)}),s(this._$canvasCircle,"mouseleave",()=>{this._isAction||(this._cursor="",document.body.style.cursor=null)})}close(){this._isClosing=!0,i(window,"mouseup",this._mouseUpHandlerBinded),i(window,"mousemove",this._mouseMoveHandlerBinded),document.body.style.cursor=null,super.close()}setImage(t){const e=this._$img;e.onload=()=>{const t=e.naturalWidth,s=e.naturalHeight;this._ratio=t/s;let i=720,a=720;t>s?i=720*t/s:a=720*s/t,this._width=this._prevWidth=i,this._height=this._prevHeight=a;let n=0,o=0;t>s?n=(720-i)/2:o=(720-a)/2,this._x=this._prevX=n,this._y=this._prevY=o,this._draw()},e.setAttribute("src",t)}getPhotoData(){return this._photoData}_buttonClickHandler(){const t=document.createElement("canvas");t.width=640,t.height=640,t.getContext("2d").putImageData(this._context.getImageData(40,40,640,640),0,0),this._photoData=t.toDataURL("image/jpeg"),this.dispatchEvent(new CustomEvent("mpReady"))}_draw(){this._context.clearRect(0,0,720,720),this._context.drawImage(this._$img,this._x,this._y,this._width,this._height)}_handleCursorType(t,e,s){let i="";if(!s){const s=t-180,a=e-180;Math.sqrt(s*s+a*a)<160&&(i="move")}if(!i){const s=180*Math.atan2(e-180,t-180)/Math.PI;i=s>=0?s<23?"e-resize":s<68?"se-resize":s<113?"s-resize":s<158?"sw-resize":"w-resize":s>-22?"e-resize":s>-67?"ne-resize":s>-112?"n-resize":s>-157?"nw-resize":"w-resize"}i&&i!=this._cursor&&(this._cursor=i,document.body.style.cursor=i)}_mouseUpHandler(){this._isAction=!1,this._prevX=this._x,this._prevY=this._y,this._prevWidth=this._width,this._prevHeight=this._height,this._cursor="",document.body.style.cursor=null,this._$pageOverlay&&(this._$pageOverlay.remove(),this._$pageOverlay=null)}_mouseMoveHandler(t){if(!this._isAction||this._isClosing)return;const e=t.x-this._canvasBoundingRect.x,s=t.y-this._canvasBoundingRect.y;if("resize"==this._actionType&&this._handleCursorType(e,s,!0),"move"==this._cursor){let t=this._prevX+2*(e-this._startX),i=this._prevY+2*(s-this._startY);t>0&&(t=0),i>0&&(i=0),t+this._width<720&&(t=720-this._width),i+this._height<720&&(i=720-this._height),this._x=t,this._y=i}else{const t=e-180,i=s-180,a=Math.sqrt(t*t+i*i)/this._initDistance;let n=this._prevWidth*a,o=this._prevHeight*a;n<720&&(n=720,o=n/this._ratio),o<720&&(o=720,n=o*this._ratio);let r=this._prevX-(n-this._prevWidth)/2,h=this._prevY-(o-this._prevHeight)/2;r>0&&(r=0),h>0&&(h=0),r+n<720&&(r=720-n),h+o<720&&(h=720-o),this._width=n,this._height=o,this._x=r,this._y=h}this._draw()}}customElements.get("tga-modal-photo")||customElements.define("tga-modal-photo",y);class w extends HTMLElement{constructor(){super(),this._animation=null,this._canPlay=!1,this._current="",this._startFrame=0,this._endFrame=0,this._isIdleReady=!0,this._next=null,this._param1=null,this._param2=null,this._isCloseAfterTrack=!1}init(){this._animation=lottie.loadAnimation({container:this,loop:!1,autoplay:!1,animationData:tgMain.resources.auth.monkey}),s(this._animation,"complete",this._completeHandler.bind(this))}play(){this._canPlay=!0,this._play()}stop(){this._canPlay=!1,this._animation.pause()}playTrack(t,e){if("idle"==this._current&&!this._isIdleReady)return this._next="playTrack",this._param1=t,this._param2=e,this._prepareIdle();let s=261,i=333;"track"==this._current||"track_end_1"==this._current||"track_end_2"==this._current?(i=s+20+32*t/e,s=this._animation.projectInterface.currentFrame):i=s+20+32*t/e,this._current="track",this._startFrame=s,this._endFrame=i,this._play()}playClose(){if("idle"==this._current&&!this._isIdleReady)return this._next="playClose",this._prepareIdle();"close_end"==this._current?(this._startFrame=this._animation.projectInterface.currentFrame,this._endFrame=221,this._current="close"):"peek"==this._current?(this._startFrame=235,this._endFrame=221,this._current="close"):"track_end_1"==this._current?(this._startFrame=314,this._endFrame=332,this._current="track_end_2",this._isCloseAfterTrack=!0):"track_end_2"==this._current?(this._startFrame=this._animation.projectInterface.currentFrame,this._endFrame=332,this._isCloseAfterTrack=!0):(this._startFrame=181,this._endFrame=221,this._current="close"),this._play()}playPeek(){if("idle"==this._current&&!this._isIdleReady)return this._next="playPeek",this._prepareIdle();"peek_end"==this._current?(this._startFrame=this._animation.projectInterface.currentFrame,this._endFrame=236):"close"==this._current?(this._startFrame=222,this._endFrame=236):(this._startFrame=259,this._endFrame=236),this._current="peek",this._play()}playIdle(){if("idle"!=this._current){if(this._isIdleReady=!1,"track"==this._current){this._startFrame=this._animation.projectInterface.currentFrame,this._endFrame=313;let t=(this._endFrame-this._startFrame)/9;t<1&&(t=1),this._animation.playSpeed=t,this._animation.updaFrameModifier(),this._current="track_end_1"}else"close"==this._current?(this._startFrame=this._animation.projectInterface.currentFrame,this._endFrame=181,this._current="close_end"):"peek"==this._current?(this._startFrame=this._animation.projectInterface.currentFrame,this._endFrame=259,this._current="peek_end"):"idle_end"==this._current?(this._startFrame=this._animation.projectInterface.currentFrame,this._current="idle"):(this._startFrame=0,this._endFrame=180,this._current="idle");this._play()}}_play(){if(this._canPlay)return this._current?void this._animation.playSegments([this._startFrame,this._endFrame],!0):this.playIdle()}_prepareIdle(){const t=this._animation.currentFrame;if(t<=19||t>=162)return this._current="idle_end",void this._completeHandler();if(t>=50&&t<=80)this._setEyesAnimated(!1),this._startFrame=50,this._endFrame=19;else if(t>=110&&t<=141)this._setEyesAnimated(!1),this._startFrame=141,this._endFrame=162;else{if(!(t>141&&t<162)){const t=this._animation.addEventListener("enterFrame",()=>{const e=this._animation.currentFrame,s=e>=50&&e<=80,i=e>=110&&e<=141;(s||i)&&(this._setEyesAnimated(!1),s&&(this._startFrame=50,this._endFrame=19),i&&(this._startFrame=141,this._endFrame=162),t(),this._current="idle_end",this._play())});return}this._startFrame=this._animation.projectInterface.currentFrame,this._endFrame=162}this._current="idle_end",this._play()}async _completeHandler(){if(1!=this._animation.playSpeed&&(this._animation.playSpeed=1,this._animation.updaFrameModifier()),this._setEyesAnimated(!0),"idle_end"==this._current)return this._isIdleReady=!0,void this[this._next](this._param1,this._param2);if("track_end_2"==this._current&&this._isCloseAfterTrack)return this._isCloseAfterTrack=!1,this._startFrame=181,this._endFrame=221,this._current="close",void this._play();if("idle"==this._current||"track_end_2"==this._current||"close_end"==this._current||"peek_end"==this._current){if("idle"==this._current&&"idle"!=this._current)return;return this._current="idle",this._startFrame=0,this._endFrame=180,void this._play()}return"track_end_1"==this._current?(this._startFrame=314,this._endFrame=332,this._current="track_end_2",void this._play()):void 0}_setEyesAnimated(t){this._animation.renderer.elements[5].shapes.forEach(e=>{e._isAnimated=t}),this._animation.renderer.elements[6].shapes.forEach(e=>{e._isAnimated=t})}}customElements.get("tga-monkey")||customElements.define("tga-monkey",w);class $ extends HTMLElement{constructor(){super(),this._handlerHeightDelta=0,this._prevHandlerHeight=0,this._hideHandlerTimeout=0,this.$content=null}connectedCallback(){let t,i;this.className="a-scroll",this.innerHTML=`<div class="a-scroll_container" ref="container"><div class="a-scroll_content" ref="content">${this.innerHTML}</div></div><div class="a-scroll_handler" ref="handler"><div></div></div>`,e(this),this.$content=this._$content,s(this,"wheel",t=>{this._scrollContainer(Math.floor(t.deltaY))}),s(this,"mouseenter",()=>{this.update()}),s(this,"mousemove",this._showHandler),s(this,"mouseleave",this._showHandler);let a=null;s(this._$handler,"mousedown",e=>{t=e.y,i=this._$container.scrollTop,this._$handler.classList.add("is-active"),a=document.createElement("div"),a.className="page-overlay",document.body.appendChild(a)}),n("mousemove",e=>{if(t){const s=e.y-t,a=Math.floor(i+this._$container.scrollHeight*s/(this.offsetHeight-16+this._handlerHeightDelta));this._scrollContainer(a,!0)}}),n("mouseup",()=>{t=null,this._$handler.classList.remove("is-active"),a&&(a.remove(),a=null)}),this.dispatchEvent(new CustomEvent("scrlReady"))}update(t,e,s){let i=this._calculateHandlerHeight(t,e);i!=this._prevHandlerHeight&&(this._prevHandlerHeight=i,this._$handler.style.height=i+"px",i>=t-17?this.hideHandler():this._scrollContainer(0,!0)),s&&this._scrollContainer(0,!0)}hideHandler(){this._$handler.style.opacity=null}_scrollContainer(t,e){e?this._$container.scrollTop=t:this._$container.scrollTop+=t,this._$handler.style.top=Math.floor(8+this._$container.scrollTop/this._$container.scrollHeight*(this.offsetHeight-16+this._handlerHeightDelta))+"px"}_showHandler(){this._prevHandlerHeight>=this.offsetHeight-17||(this._$handler.style.opacity||(this._$handler.style.opacity="1"),clearTimeout(this._hideHandlerTimeout),this._hideHandlerTimeout=setTimeout(this.hideHandler.bind(this),2e3))}_calculateHandlerHeight(t,e){t=t||this.offsetHeight,e=e||this._$container.scrollHeight;const s=Math.floor((t-16)*t/e),i=Math.floor(.1*(t-16)),a=Math.max(s,i,25);return this._handlerHeightDelta=s-a,a}}customElements.get("tga-scroll")||customElements.define("tga-scroll",$);class C extends HTMLElement{constructor(){super(),this._isDisabled=!1}connectedCallback(){this.className="a-checkbox",this.innerHTML=`<input type="checkbox" ref="input" ${this.hasAttribute("checked")?" checked":""}> <span>${this.textContent}</span>`,e(this),s(this,"click",()=>{this._isDisabled||(this._$input.checked=!this._$input.checked)})}isChecked(){return this._$input.checked}setDisabled(t){this._isDisabled=t,this.classList[t?"add":"remove"]("is-disabled"),this._$input[(t?"set":"remove")+"Attribute"]("disabled",!0)}}customElements.get("tga-input-checkbox")||customElements.define("tga-input-checkbox",C);class E extends HTMLElement{constructor(){super(),this._hasError=!1,this._$loader=null}connectedCallback(){this.className="a-input-field",this.innerHTML=this._getTemplate(),e(this),s(this._$input,"focus",this._focusHandler.bind(this)),s(this._$input,"blur",this._blurHandler.bind(this)),s(this._$input,"input",this._inputHandler.bind(this)),s(this._$input,"keydown",t=>{13==t.which&&this.dispatchEvent(new CustomEvent("itEnter"))})}getInputElement(){return this._$input}getValue(){return this._$input.value}setValue(t){this._$input.value=t,this._inputHandler({data:null})}setError(t){if(this._$labelText.textContent==t)return;this._hasError=!0;const e=this._$labelText,s=this._$label.style;s.overflow="hidden",s.width=this._$label.offsetWidth+"px",s.transition="color 0.15s, width 0.15s",this._$label.offsetWidth,s.width="0",setTimeout(()=>{e.textContent=t,s.width=e.scrollWidth+8+"px",this.classList.add("a-input-field__error"),setTimeout(()=>{s.overflow=null,s.width=null,s.transition=null},150)},150)}setDisabled(t){this._$input.style.transition="color 0.3s",this._$input.offsetWidth,this.classList[t?"add":"remove"]("is-disabled"),this._$input[(t?"set":"remove")+"Attribute"]("disabled",!0),this._$input.style.transition=null}setLoading(t){t?(this._$loader=document.createElement("tga-loader"),this._$loader.setAttribute("blue",!0),this.appendChild(this._$loader)):this._$loader&&(this._$loader&&this._$loader.destroy(),this._$loader=null)}setFocus(){this._$input.focus()}_getTemplate(){return`<label ref="label"><div ref="labelText">${this.getAttribute("label")}</div><span></span></label> <input type="text" ref="input" autocomplete="off" tabindex="">`}_focusHandler(){this.classList.add("is-focus"),this.dispatchEvent(new CustomEvent("itFocus"))}_blurHandler(){this.classList.remove("is-focus"),this.dispatchEvent(new CustomEvent("itBlur"))}_inputHandler(){if(this._hasError){this._hasError=!1;const t=this._$labelText,e=this._$label.style;e.overflow="hidden",e.width=this._$label.offsetWidth+"px",e.transition="color 0.15s, width 0.15s",this._$label.offsetWidth,e.width="0",setTimeout(()=>{t.textContent=this.getAttribute("label"),e.width=t.scrollWidth+8+"px",this.classList.remove("a-input-field__error"),setTimeout(()=>{e.overflow=null,e.width=null,e.transition=null},150)},150)}this.dispatchEvent(new CustomEvent("itInput")),this.classList[""!=this._$input.value?"add":"remove"]("is-fill")}}customElements.get("tga-input-text")||customElements.define("tga-input-text",E);class k extends E{constructor(){super(),this._prevValue="",this._maxLength=5,this._regExp=new RegExp("^\\d{0,5}$"),this.setAttribute("label","Code")}setMaxLength(t){this._regExp=new RegExp(`^\\d{0,${t}}$`),this._$input.style.letterSpacing="13px"}_inputHandler(t){let e=this._$input.selectionStart,s=this._$input.selectionEnd;if(!this._regExp.test(this._$input.value))return this._$input.value=this._prevValue,t.data&&(e--,s--),void this._$input.setSelectionRange(e,s);this._prevValue=this._$input.value,super._inputHandler(),this._$input.value.length==this._maxLength&&this.dispatchEvent(new CustomEvent("itcSubmit"))}}customElements.get("tga-input-code")||customElements.define("tga-input-code",k);class P extends HTMLElement{constructor(){super(),this._data=[],this._selectedId=null,this._isUserSelected=!1,this._prevTriggeredNumber="",this._prevInputValue="",this._inputHasChanges=!1,this._isOpened=!1,this._dropdownMaxHeight=0,this._isUserInteracted=!1,this._isSkipNextFilter=!1}connectedCallback(){this.className="a-input-field";let t="";tgAuth.countriesData.split("|").forEach((e,s)=>{const i=e.split(";"),a=i[1],n=i[3];this._data[s]={short:i[0],name:a},n&&(this._data[s].code=n),i[4]&&(this._data[s].format=i[4]);let o="";i.length>2&&(o='<span class="a-flag" style="background-position:0 -'+24*i[2]+'px"></span>'),t+=`<div class="a-select-dropdown_option" data-id="${s}"><div>${o}</div><div>${a}</div><div>${n?"+"+n:""}</div></div>`}),this.innerHTML=`<label><div ref="label">Country</div><span></span></label> <input type="text" ref="input" autocomplete="off"><div class="a-input-field_dropdown" ref="button"><div class="icon icon__a icon__down"></div></div><div class="a-select-dropdown" ref="dropdown"><tga-scroll ref="scroll">${t}</tga-scroll></div>`,e(this);const i=this._optionEnterHandler.bind(this),a=this._optionLeaveHandler.bind(this),o=this._optionSelectHandler.bind(this);for(let t=0,e=this._$scroll.$content.children.length;t<e;t++){const e=this._$scroll.$content.children[t];s(e,"mousemove",i),s(e,"mouseleave",a),s(e,"click",o)}s(this._$input,"focus",()=>{if(this._isUserInteracted=!0,this._isOpened)return;this._isOpened=!0;let t=0;for(let e=0,s=this._$scroll.$content.children.length;e<s;e++){null===this._$scroll.$content.children[e].style.display&&t++}this._changeDropdownMaxHeight(!0),this._$scroll.update(this._dropdownMaxHeight,56*t),this.classList.add("is-focus"),this._$input.setSelectionRange(0,99)}),s(this._$input,"input",this._inputHandler.bind(this)),s(this._$button,"click",()=>{this.classList.contains("is-focus")?this._hideDropdown(!0):this._$input.focus()}),n("mousedown",t=>{!this._isOpened||t.target!=window&&this.contains(t.target)||this._hideDropdown(!0)});const h=this._changeDropdownMaxHeight.bind(this);var c;setTimeout(h,1),c=h,d||(d=!0,s(window,"resize",l)),r.push(c)}setCountry(t){if(!this._isUserInteracted)for(let e=0,s=this._data.length;e<s;e++)if(this._data[e].short==t){this._isSkipNextFilter=!0,this._selectOption(e);break}}getSelected(){return null!==this._selectedId?this._data[this._selectedId]:{}}setDisabled(t){this._$input.style.transition="color 0.3s",this._$input.offsetWidth,this.classList[t?"add":"remove"]("is-disabled"),this._$input[(t?"set":"remove")+"Attribute"]("disabled",!0),this._$input.style.transition=null}filterByNumber(t){if(this._isUserInteracted=!0,t==this._prevTriggeredNumber)return;if(this._prevTriggeredNumber=t,this._isSkipNextFilter)return void(this._isSkipNextFilter=!1);const e=t.substr(0,4);let s=-1,i=!1;if(""!=t){for(let t=e.length;t>0;t--){const a=e.substr(0,t);if(s="7"==a?this._data.findIndex(t=>"ru"==t.short):"1"==a?this._data.findIndex(t=>"us"==t.short):this._data.findIndex(t=>t.code==a),s>-1){i=!0;break}}s<0&&(s=this._data.length-1)}let a=0;for(let n=0,o=this._$scroll.$content.children.length;n<o;n++){const o=this._$scroll.$content.children[n];if(""==t){o.style.display=null,a++;continue}const r=o.children[2].textContent.substr(1);let h=!1;if(i)for(let t=1,s=e.length;t<=s;t++){if(r==e.substr(0,t)){h=!0;break}}else h=r.startsWith(e),h&&(s=-1);!r||h?(o.style.display=null,a++):o.style.display="none"}this._changeDropdownMaxHeight(!1),this._$scroll.update(this._dropdownMaxHeight,56*a,!0),(s==this._data.length-1||-1==s||this._selectedId!=s&&!this._isUserSelected||this._data[this._selectedId].code&&!t.startsWith(this._data[this._selectedId].code))&&this._selectOption(s)}_selectOption(t,e){this._selectedId=t>-1?t:null,this._isUserSelected=e,this._$input.value=t>-1?this._data[t].name:"",this._prevInputValue="",this._hideDropdown(),this.classList[t>-1?"add":"remove"]("is-fill"),this.dispatchEvent(new CustomEvent("icSelect"))}_hideDropdown(t){t&&this._inputHasChanges&&(this._$input.value="",this._inputHandler(),this._selectOption(-1),this.dispatchEvent(new CustomEvent("icSelect"))),this.classList.remove("is-focus"),this._$dropdown.style.height=null,this._$scroll.hideHandler(),this._inputHasChanges=!1,this._$label.textContent="Country",this._isOpened=!1}_inputHandler(){this._inputHasChanges=!0,this._prevInputValue=this._$input.value;const t=""!=this._$input.value;this.classList[t?"add":"remove"]("is-fill");const e=this._$input.value.toLowerCase();let s=0;for(let t=0,i=this._$scroll.$content.children.length;t<i;t++){const i=this._$scroll.$content.children[t],a=i.children[1].textContent.toLowerCase();a.includes(e)||"other"==a?(i.style.display=null,s++):i.style.display="none"}this._changeDropdownMaxHeight(!0),this._$scroll.update(this._dropdownMaxHeight,56*s)}_changeDropdownMaxHeight(t){const e=document.documentElement.scrollHeight-(this.getBoundingClientRect().bottom+window.scrollY)-16,s=this._$scroll.$content.offsetHeight;this._dropdownMaxHeight=Math.min(375,e,s),!0===t&&(this._$dropdown.style.height=this._dropdownMaxHeight+"px")}_optionEnterHandler(t){const e=t.currentTarget||t.target;if(e==this._prevMoveTarget||!this._isOpened)return;this._prevMoveTarget=e,this._prevInputValue=this._$input.value;const s=e.children[1].textContent;this._prevInputValue?this._$input.value=s:this._$label.textContent=s}_optionLeaveHandler(){this._isOpened&&(this._prevMoveTarget=null,this._prevInputValue?this._$input.value=this._prevInputValue:this._$label.textContent="Country")}_optionSelectHandler(t){const e=t.currentTarget||t.target;this._selectOption(e.dataset.id,!0)}}customElements.get("tga-input-country")||customElements.define("tga-input-country",P);class S extends E{constructor(){super(),this._isPasswordShowed=!1,this._isFocused=!1,this._isDisabled=!1,this._blurTimeout=0,this.setAttribute("label","Password")}connectedCallback(){super.connectedCallback(),s(this._$toggle,"click",()=>{this._isDisabled||(this._isPasswordShowed=!this._isPasswordShowed,this._isPasswordShowed?(this._$toggleIcon.classList.remove("icon__eye-show"),this._$toggleIcon.classList.add("icon__eye-hide"),this._$input.setAttribute("type","text"),this._$input.style.fontFamily=null):(this._$toggleIcon.classList.add("icon__eye-show"),this._$toggleIcon.classList.remove("icon__eye-hide"),this._$input.setAttribute("type","password"),this._$input.style.fontFamily="monospace"),this._isFocused&&this.setFocus(),this.dispatchEvent(new CustomEvent("itpToggle")))})}setDisabled(t){this._isDisabled=t,super.setDisabled(t)}isPasswordShowed(){return this._isPasswordShowed}isFocused(){return this._isFocused}_getTemplate(){return`<label ref="label"><div ref="labelText">${this.getAttribute("label")}</div><span></span></label> <input type="password" ref="input" autocomplete="off" style="font-family:monospace"><div class="a-input-field_password" ref="toggle"><div class="icon icon__a icon__eye-show" ref="toggleIcon"></div></div>`}_focusHandler(){this._isFocused?clearTimeout(this._blurTimeout):(this._isFocused=!0,super._focusHandler())}_blurHandler(){clearTimeout(this._blurTimeout),this._blurTimeout=setTimeout(()=>{this._isFocused=!1,super._blurHandler()},150)}}customElements.get("tga-input-password")||customElements.define("tga-input-password",S);class x extends E{constructor(){super(),this._formats=tgAuth.numbersFormatsData.split(";"),this._code="",this._formatId="",this._regExp=new RegExp("^(.*)?$"),this._groups=[],this._minLength=7,this._maxLength=15,this._prevValue="",this._selectStart=0,this._needUpdateFormat=!1,this.setAttribute("label","Phone Number")}getNumber(){const t=this._$input.value.replace(/[^0-9.]/g,"");let e=this._$input.value;return"+"!=e.charAt(0)&&(e="+"+e),{plain:t,formatted:e}}setData(t,e){if(this._code==t&&this._formatId==e)return this.setFocus(),void this.dispatchEvent(new CustomEvent("ipDetect"));const s=this._formats[e];let i=0;if(t){const e=this.getNumber().plain;if(e.startsWith(t)||(e.startsWith(this._code)?this._$input.value=e.replace(this._code,t):this._$input.value=t+this._$input.value),s){i=s.split(" ").reduce((t,e)=>t+parseInt(e),0);let e=s.split(" ").reduce((t,e)=>`${t}(.{1,${e}})?`,"");this._regExp=new RegExp(`^(.{${t.length}})?${e}$`),this._groups=`${t.length} ${s}`.split(" ")}else{let e=t?`(.{${t.length}})?`:"";this._regExp=new RegExp(`^${e}(.*)?$`),this._groups=[t.length]}}else this._regExp=new RegExp("^(.*)?$"),this._groups=[];this._code=t,this._formatId=e,this._minLength=s?t.length+i:7,this._maxLength=s?t.length+i:15,this._needUpdateFormat=!0,this._prevValue=this._$input.value,this._inputHandler({data:null},!1),this.setFocus()}_inputHandler(t,e=!0){let s=this._$input.value,i=this._$input.selectionStart;const a=" "==this._prevValue.charAt(i);"deleteContentBackward"==t.inputType&&a&&(s=s.substr(0,i-1)+s.substr(i),i--),"deleteContentForward"==t.inputType&&a&&(s=s.substr(0,i)+s.substr(i+1));let n=s.replace(/[^0-9]/g,"");if(n.length>this._maxLength&&!this._needUpdateFormat)return this._$input.value=this._prevValue,i--,void this._$input.setSelectionRange(i,i);this._needUpdateFormat&&(n=n.substr(0,this._maxLength));const o=n.match(this._regExp);let r=!1,h="";for(let t=1;t<=6;t++)o[t]&&(h+=" "+o[t],r=this._groups[t-1]==o[t].length);h="+"+h.substr(1),r&&n.length!=this._maxLength&&(h+=" ",i>=h.length-1&&i++)," "==h.substr(i-1,1)&&"deleteContentBackward"!=t.inputType&&"deleteContentForward"!=t.inputType&&i++,"+"==h&&(i=1),n==this._code&&(i=99),e||(i=99),this._$input.value=h,this._prevValue=h,super._inputHandler(),e&&" "==s.charAt(i)&&i++,this._$input.setSelectionRange(i,i),this._selectStart=i,e&&this.dispatchEvent(new CustomEvent("ipDetect")),this._$input.setSelectionRange(this._selectStart,this._selectStart),n.length>=this._minLength?this.dispatchEvent(new CustomEvent("ipValid")):this.dispatchEvent(new CustomEvent("ipInvalid")),this._needUpdateFormat=!1}_focusHandler(){super._focusHandler(),""==this._$input.value&&(this._$input.value="+",super._inputHandler())}_blurHandler(){super._blurHandler(),"+"==this._$input.value&&(this._$input.value="",super._inputHandler())}}customElements.get("tga-input-phone")||customElements.define("tga-input-phone",x);const[H,T]="3 4;2 3 4;4 4;3 3 3;3 3 4;2 3 3;2 2 2 2;1 4 4;3 2 2 2;2 3 2 2;1 3 4;3 3;1 2 2 2 2;1 2 2 2;2 4 4;3 3 2 2;3 5;2 2 2;2 5 4;2 2 4;3 4 4;1 3 3;3 8;5 5;2 2 3 2;3 2 4;2 3;2 5;2 6;4 6;2 7||af;Afghanistan;2;93;3|al;Albania;5;355;1|dz;Algeria;55;213;8|as;American Samoa;9;1684;0|ad;Andorra;0;376;17|ao;Angola;7;244;3|ai;Anguilla;4;1264;0|ag;Antigua & Barbuda;3;1268;0|ar;Argentina;8;54|am;Armenia;6;374;5|aw;Aruba;12;297;0|au;Australia;11;61;3|at;Austria;10;43|az;Azerbaijan;13;994;9|bs;Bahamas;28;1242;0|bh;Bahrain;20;973;2|bd;Bangladesh;16;880|bb;Barbados;15;1246;0|by;Belarus;31;375;1|be;Belgium;17;32;8|bz;Belize;32;501|bj;Benin;22;229;5|bm;Bermuda;23;1441;0|bt;Bhutan;29;975|bo;Bolivia;25;591;10|bq;Bonaire, Sint Eustatius & Saba;26;599|ba;Bosnia & Herzegovina;14;387|bw;Botswana;30;267;5|br;Brazil;27;55;18|vg;British Virgin Islands;220;1284;0|bn;Brunei Darussalam;24;673;0|bg;Bulgaria;19;359|bf;Burkina Faso;18;226;6|bi;Burundi;21;257;19|kh;Cambodia;104;855|cm;Cameroon;41;237;2|ca;Canada;33;1;4|cv;Cape Verde;46;238;0|ky;Cayman Islands;111;1345;0|cf;Central African Republic;35;236;6|td;Chad;199;235;6|cl;Chile;40;56;7|cn;China;42;86;20|co;Colombia;43;57;4|km;Comoros;106;269;0|cg;Congo;36;242;1|cd;Congo, Democratic Republic;34;243;1|ck;Cook Islands;39;682|cr;Costa Rica;44;506|hr;Croatia;87;385|cu;Cuba;45;53;2|cw;Curaçao;47;599|cy;Cyprus;48;357;2|cz;Czech Republic;49;420|ci;Côte d`Ivoire;38;225;5|dk;Denmark;52;45;2|io;Diego Garcia;94;246;0|dj;Djibouti;51;253;6|dm;Dominica;53;1767;0|do;Dominican Republic;54;1;4|ec;Ecuador;56;593|eg;Egypt;58;20;1|sv;El Salvador;194;503;2|gq;Equatorial Guinea;79;240;3|er;Eritrea;59;291;21|ee;Estonia;57;372|et;Ethiopia;61;251;1|fk;Falkland Islands;64;500|fo;Faroe Islands;66;298;11|fj;Fiji;63;679|fi;Finland;62;358|fr;France;67;33;12|gf;French Guiana;72;594|pf;French Polynesia;161;689|ga;Gabon;68;241;13|gm;Gambia;76;220;0|ge;Georgia;71;995|de;Germany;50;49;22|gh;Ghana;73;233|gi;Gibraltar;74;350;2|gr;Greece;80;30;14|gl;Greenland;75;299;11|gd;Grenada;70;1473;0|gp;Guadeloupe;78;590|gu;Guam;82;1671;0|gt;Guatemala;81;502;10|gn;Guinea;77;224;3|gw;Guinea-Bissau;83;245;0|gy;Guyana;84;592|ht;Haiti;88;509|hn;Honduras;86;504;2|hk;Hong Kong;85;852|hu;Hungary;89;36;1|is;Iceland;97;354;0|in;India;93;91;23|id;Indonesia;90;62|ir;Iran;96;98;4|iq;Iraq;95;964;4|ie;Ireland;91;353;1|il;Israel;92;972;1|it;Italy;98;39;4|jm;Jamaica;99;1876;0|jp;Japan;101;81;14|jo;Jordan;100;962;7|kz;Kazakhstan;112;7;15|ke;Kenya;102;254;3|ki;Kiribati;105;686|kw;Kuwait;110;965;2|kg;Kyrgyzstan;103;996|la;Laos;113;856|lv;Latvia;122;371;16|lb;Lebanon;114;961|ls;Lesotho;119;266;5|lr;Liberia;118;231|ly;Libya;123;218;1|li;Liechtenstein;116;423|lt;Lithuania;120;370;16|lu;Luxembourg;121;352|mo;Macau;134;853|mk;Macedonia;130;389|mg;Madagascar;128;261;24|mw;Malawi;142;265|my;Malaysia;144;60|mv;Maldives;141;960|ml;Mali;131;223;2|mt;Malta;139;356;6|mh;Marshall Islands;129;692|mq;Martinique;136;596|mr;Mauritania;137;222;2|mu;Mauritius;140;230|mx;Mexico;143;52|fm;Micronesia;65;691|md;Moldova;126;373;5|mc;Monaco;125;377;2|mn;Mongolia;133;976|me;Montenegro;127;382|ms;Montserrat;138;1664;0|ma;Morocco;124;212;1|mz;Mozambique;145;258;1|mm;Myanmar;132;95|na;Namibia;146;264;1|nr;Nauru;155;674|np;Nepal;154;977|nl;Netherlands;152;31;12|nc;New Caledonia;147;687|nz;New Zealand;157;64|ni;Nicaragua;151;505;2|ne;Niger;148;227;6|ng;Nigeria;150;234|nu;Niue;156;683|nf;Norfolk Island;149;672|kp;North Korea;108;850|mp;Northern Mariana Islands;135;1670;0|no;Norway;153;47;2|om;Oman;158;968;2|pk;Pakistan;164;92;4|pw;Palau;170;680|ps;Palestine;168;970;25|pa;Panama;159;507;2|pg;Papua New Guinea;162;675|py;Paraguay;171;595;3|pe;Peru;160;51;3|ph;Philippines;163;63;4|pl;Poland;165;48;3|pt;Portugal;169;351;7|pr;Puerto Rico;167;1;4|qa;Qatar;172;974|ro;Romania;174;40;3|ru;Russian Federation;176;7;15|rw;Rwanda;177;250;3|re;Réunion;173;262;3|sh;Saint Helena;184;290;26|sh;Saint Helena;184;247|kn;Saint Kitts & Nevis;107;1869;0|lc;Saint Lucia;115;1758;0|pm;Saint Pierre & Miquelon;166;508|vc;Saint Vincent & the Grenadines;218;1784;0|ws;Samoa;225;685|sm;San Marino;188;378;4|sa;Saudi Arabia;178;966|sn;Senegal;189;221;1|rs;Serbia;175;381;1|sc;Seychelles;180;248;13|sl;Sierra Leone;187;232;5|sg;Singapore;183;65;2|sx;Sint Maarten;195;1721;0|sk;Slovakia;186;421|si;Slovenia;185;386|sb;Solomon Islands;179;677|so;Somalia;190;252;5|za;South Africa;228;27;1|kr;South Korea;109;82|ss;South Sudan;192;211;1|es;Spain;60;34;3|lk;Sri Lanka;117;94;1|sd;Sudan;181;249;1|sr;Suriname;191;597;0|sz;Swaziland;197;268;2|se;Sweden;182;46;1|ch;Switzerland;37;41;1|sy;Syrian Arab Republic;196;963|st;São Tomé & Príncipe;193;239;27|tw;Taiwan;211;886|tj;Tajikistan;202;992|tz;Tanzania;212;255;1|th;Thailand;201;66;7|tl;Timor-Leste;204;670|tg;Togo;200;228;5|tk;Tokelau;203;690|to;Tonga;207;676|tt;Trinidad & Tobago;209;1868;0|tn;Tunisia;206;216;5|tr;Turkey;208;90;4|tm;Turkmenistan;205;993;28|tc;Turks & Caicos Islands;198;1649;0|tv;Tuvalu;210;688|vi;US Virgin Islands;221;1340;0|us;USA;215;1;4|ug;Uganda;214;256;1|ua;Ukraine;213;380;9|ae;United Arab Emirates;1;971;1|gb;United Kingdom;69;44;29|uy;Uruguay;216;598;2|uz;Uzbekistan;217;998;30|vu;Vanuatu;223;678|ve;Venezuela;219;58;4|vn;Vietnam;222;84|wf;Wallis & Futuna;224;681|ye;Yemen;227;967;3|zm;Zambia;229;260;1|zw;Zimbabwe;230;263;1|ot;Other".split("||");return t.countriesData=T,t.init=()=>{tgProto.setMessagesHandling(!0),tgProto.setApiScheme("user#938458c1 flags:# self:flags.10?true contact:flags.11?true mutual_contact:flags.12?true deleted:flags.13?true bot:flags.14?true bot_chat_history:flags.15?true bot_nochats:flags.16?true verified:flags.17?true restricted:flags.18?true min:flags.20?true bot_inline_geo:flags.21?true support:flags.23?true scam:flags.24?true id:int access_hash:flags.0?long first_name:flags.1?string last_name:flags.2?string username:flags.3?string phone:flags.4?string photo:flags.5?UserProfilePhoto status:flags.6?UserStatus bot_info_version:flags.14?int restriction_reason:flags.18?Vector<RestrictionReason> bot_inline_placeholder:flags.19?string lang_code:flags.22?string = User;userProfilePhotoEmpty#4f11bae1 = UserProfilePhoto;userProfilePhoto#ecd75d8c photo_id:long photo_small:FileLocation photo_big:FileLocation dc_id:int = UserProfilePhoto;userStatusEmpty#9d05049 = UserStatus;userStatusOnline#edb93949 expires:int = UserStatus;userStatusOffline#8c703f was_online:int = UserStatus;userStatusRecently#e26f42f1 = UserStatus;userStatusLastWeek#7bf09fc = UserStatus;userStatusLastMonth#77ebc742 = UserStatus;auth.sentCode#5e002502 flags:# type:auth.SentCodeType phone_code_hash:string next_type:flags.1?auth.CodeType timeout:flags.2?int = auth.SentCode;auth.authorization#cd050916 flags:# tmp_sessions:flags.0?int user:User = auth.Authorization;auth.authorizationSignUpRequired#44747e9a flags:# terms_of_service:flags.0?help.TermsOfService = auth.Authorization;auth.exportedAuthorization#df969c2d id:int bytes:bytes = auth.ExportedAuthorization;nearestDc#8e1a1775 country:string this_dc:int nearest_dc:int = NearestDc;account.password#ad2641f8 flags:# has_recovery:flags.0?true has_secure_values:flags.1?true has_password:flags.2?true current_algo:flags.2?PasswordKdfAlgo srp_B:flags.2?bytes srp_id:flags.2?long hint:flags.3?string email_unconfirmed_pattern:flags.4?string new_algo:PasswordKdfAlgo new_secure_algo:SecurePasswordKdfAlgo secure_random:bytes = account.Password;messageEntityUnknown#bb92ba95 offset:int length:int = MessageEntity;messageEntityMention#fa04579d offset:int length:int = MessageEntity;messageEntityHashtag#6f635b0d offset:int length:int = MessageEntity;messageEntityBotCommand#6cef8ac7 offset:int length:int = MessageEntity;messageEntityUrl#6ed02538 offset:int length:int = MessageEntity;messageEntityEmail#64e475c2 offset:int length:int = MessageEntity;messageEntityBold#bd610bc9 offset:int length:int = MessageEntity;messageEntityItalic#826f8b60 offset:int length:int = MessageEntity;messageEntityCode#28a20571 offset:int length:int = MessageEntity;messageEntityPre#73924be0 offset:int length:int language:string = MessageEntity;messageEntityTextUrl#76a6d327 offset:int length:int url:string = MessageEntity;messageEntityMentionName#352dca58 offset:int length:int user_id:int = MessageEntity;inputMessageEntityMentionName#208e68c9 offset:int length:int user_id:InputUser = MessageEntity;messageEntityPhone#9b69e34b offset:int length:int = MessageEntity;messageEntityCashtag#4c4e743f offset:int length:int = MessageEntity;messageEntityUnderline#9c4e7e8b offset:int length:int = MessageEntity;messageEntityStrike#bf0693d4 offset:int length:int = MessageEntity;messageEntityBlockquote#20df5d0 offset:int length:int = MessageEntity;help.termsOfService#780a0310 flags:# popup:flags.0?true id:DataJSON text:string entities:Vector<MessageEntity> min_age_confirm:flags.1?int = help.TermsOfService;auth.codeTypeSms#72a3158c = auth.CodeType;auth.codeTypeCall#741cd3e3 = auth.CodeType;auth.codeTypeFlashCall#226ccefb = auth.CodeType;auth.sentCodeTypeApp#3dbb5986 length:int = auth.SentCodeType;auth.sentCodeTypeSms#c000bba2 length:int = auth.SentCodeType;auth.sentCodeTypeCall#5353e5a7 length:int = auth.SentCodeType;auth.sentCodeTypeFlashCall#ab03c6d9 pattern:string = auth.SentCodeType;dataJSON#7d748d04 data:string = DataJSON;passwordKdfAlgoUnknown#d45ab096 = PasswordKdfAlgo;passwordKdfAlgoSHA256SHA256PBKDF2HMACSHA512iter100000SHA256ModPow#3a912d4a salt1:bytes salt2:bytes g:int p:bytes = PasswordKdfAlgo;securePasswordKdfAlgoUnknown#4a8537 = SecurePasswordKdfAlgo;securePasswordKdfAlgoPBKDF2HMACSHA512iter100000#bbf2dda0 salt:bytes = SecurePasswordKdfAlgo;securePasswordKdfAlgoSHA512#86471d92 salt:bytes = SecurePasswordKdfAlgo;inputCheckPasswordEmpty#9880f658 = InputCheckPasswordSRP;inputCheckPasswordSRP#d27ff082 srp_id:long A:bytes M1:bytes = InputCheckPasswordSRP;codeSettings#debebe83 flags:# allow_flashcall:flags.0?true current_number:flags.1?true allow_app_hash:flags.4?true = CodeSettings;fileLocationToBeDeprecated#bc7fc6cd volume_id:long local_id:int = FileLocation;restrictionReason#d072acb4 platform:string reason:string text:string = RestrictionReason;;initConnection#785188b8 {X:Type} flags:# api_id:int device_model:string system_version:string app_version:string system_lang_code:string lang_pack:string lang_code:string proxy:flags.0?InputClientProxy query:!X = X;invokeWithLayer#da9b0d0d {X:Type} layer:int query:!X = X;auth.sendCode#a677244f phone_number:string api_id:int api_hash:string settings:CodeSettings = auth.SentCode;auth.signUp#80eee427 phone_number:string phone_code_hash:string first_name:string last_name:string = auth.Authorization;auth.signIn#bcd51581 phone_number:string phone_code_hash:string phone_code:string = auth.Authorization;auth.exportAuthorization#e5bfffcd dc_id:int = auth.ExportedAuthorization;auth.importAuthorization#e3ef9613 id:int bytes:bytes = auth.Authorization;auth.checkPassword#d18b4d16 password:InputCheckPasswordSRP = auth.Authorization;auth.cancelCode#1f040578 phone_number:string phone_code_hash:string = Bool;account.getPassword#548a30f5 = account.Password;help.getNearestDc#1fb33026 = NearestDc");const t=document.createElement("tga-block-auth");return document.body.appendChild(t),t},t.numbersFormatsData=H,t}({});
