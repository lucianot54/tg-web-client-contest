var tgApp=function(e){"use strict";const t=e=>{e.querySelectorAll("[ref]").forEach(t=>{e["_$"+t.getAttribute("ref")]=t})},s=(e,t,s)=>{e.addEventListener(t,s)},a=(e,t,s)=>{e.removeEventListener(t,s)};let i=[];const n=(e,t)=>{i.push({type:e,handler:t}),s(window,e,t)};let o,l=[];const r=()=>{l.forEach(e=>{e()})},d=()=>{o&&clearTimeout(o),o=setTimeout(r,100)};let c=!1;const g=e=>Math.floor(Math.random()*e),h=()=>{const e={};return e.promise=new Promise((t,s)=>{e.resolve=t,e.reject=s}),e},u=e=>new Promise(t=>{setTimeout(t,e)}),_=(e,t)=>{const s=new Date(1e3*e),a=new Date;if(a.setDate(a.getDate()-1),t||e>Math.round(a/1e3)){let e=s.getHours(),t=s.getMinutes();return t<10&&(t="0"+t),`${e}:${t}`}const i=new Date;if(i.setHours(0,0,0,0),i.setDate(i.getDate()-6),e>Math.round(i/1e3))switch(s.getDay()){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat"}const n=new Date;if(i.setHours(0,0,0,0),n.setFullYear(n.getFullYear()-1),e>Math.round(n/1e3)){const e=s.getDate();switch(s.getMonth()){case 0:return`${e} jan`;case 1:return`${e} feb`;case 2:return`${e} mar`;case 3:return`${e} apr`;case 4:return`${e} may`;case 5:return`${e} jun`;case 6:return`${e} jul`;case 7:return`${e} aug`;case 8:return`${e} sep`;case 9:return`${e} oct`;case 10:return`${e} nov`;case 11:return`${e} dec`}}let o=s.getMonth()+1;o<10&&(o="0"+o);const l=s.getFullYear().toString().substr(2);return`${s.getDate()}.${o}.${l}`},p=e=>{const t=new Date(1e3*e),s=t.getDate();let a=t.getMonth()+1;a<10&&(a="0"+a);const i=t.getFullYear();let n=t.getHours(),o=t.getMinutes();o<10&&(o="0"+o);let l=t.getSeconds();return l<10&&(l="0"+l),`${s}.${a}.${i} at ${n}:${o}:${l}`},f=["January","February","March","April","May","June","July","August","September","October","November","December"],m=(e,t)=>JSON.stringify(e)==JSON.stringify(t),b=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),y=["e17076","faa774","a695e7","7bc862","6ec9cb","65aadd","ee7aae"],v=e=>{let t=4294967295&e;return t>2147483647&&(t-=4294967296),y[Math.abs(t)%7]},P=e=>{if(Math.abs(e)<1024)return e+" B";var t=["KB","MB","GB"],s=-1;do{e/=1024,++s}while(Math.abs(e)>=1024&&s<t.length-1);return e.toFixed(1)+" "+t[s]};let M,$;const x=async()=>M||(await(async()=>{if($)return $.promise;$=h();const e=indexedDB.open("tg",1);return e.onupgradeneeded=()=>{M=e.result,M.objectStoreNames.contains("dialogs")||M.createObjectStore("dialogs",{keyPath:"_key"}),M.objectStoreNames.contains("peers")||M.createObjectStore("peers",{keyPath:"_key"}),M.objectStoreNames.contains("messages")||M.createObjectStore("messages",{keyPath:"_key"}),M.objectStoreNames.contains("photos")||M.createObjectStore("photos",{keyPath:"_key"}),M.objectStoreNames.contains("stickers")||M.createObjectStore("stickers",{keyPath:"_key"}),M.objectStoreNames.contains("images")||M.createObjectStore("images",{keyPath:"_key"}),M.objectStoreNames.contains("documents")||M.createObjectStore("documents",{keyPath:"_key"})},e.onerror=()=>{console.log(e.error)},e.onsuccess=function(){M=e.result,$.resolve()},$.promise})(),M),k=async e=>{const t=h(),s=(await x()).transaction(e,"readonly"),a=s.objectStore(e).getAll();return s.onerror=()=>{console.log(s.error)},s.oncomplete=()=>{t.resolve(a.result)},t.promise},C=async(e,t)=>{const s=h(),a=(await x()).transaction(e,"readwrite"),i=a.objectStore(e);return t.forEach(e=>{i.put(e)}),a.onerror=()=>{console.log(a.error)},a.oncomplete=()=>{s.resolve()},s.promise},w=async(e,t)=>{const s=h(),a=(await x()).transaction(e,"readwrite"),i=a.objectStore(e);return t.forEach(e=>{i.delete(e)}),a.onerror=()=>{console.log(a.error)},a.oncomplete=()=>{s.resolve()},s.promise};let S={};const E=async()=>{(await k("photos")).forEach(e=>{S[e._key]=e})},T=e=>{const t=[];e.forEach(e=>{const s=e.photo;if(!s||s._.includes("Empty"))return;const a=I(e);if(!a)return;const i={_key:a,small:{volume:s.photo_small.volume_id,local:s.photo_small.local_id,dc:s.dc_id},big:{volume:s.photo_big.volume_id,local:s.photo_big.local_id,dc:s.dc_id}};if(S[a]){const e=JSON.parse(JSON.stringify(S[a]));delete e.small.file,delete e.big.file,m(e,i)||(S[a]=i,t.push(i))}else S[a]=i,t.push(i)}),C("photos",t)},L=async(e,t)=>{const s=I(e),a=t?"big":"small",i=S[s][a];if(i.file)return URL.createObjectURL(new Blob([i.file.bytes],{type:i.file.type}));await tgApp.waitProtoInited();const n={};"user"==e._&&(n._="inputPeerUser",n.user_id=e.id,n.access_hash=e.access_hash),"chat"==e._&&(n._="inputPeerChat",n.chat_id=e.id),"channel"==e._&&(n._="inputPeerChannel",n.channel_id=e.id,n.access_hash=e.access_hash);const o=await tgProto.sendMethod("upload.getFile",{location:{_:"inputPeerPhotoFileLocation",peer:n,volume_id:i.volume,local_id:i.local},offset:0,limit:1048576},i.dc);let l;switch(o.type._){case"storage.fileJpeg":l="image/jpeg";break;case"storage.fileGif":l="image/gif";break;case"storage.filePng":l="image/png";break;case"storage.fileWebp":l="image/webp"}return S[s][a].file={type:l,bytes:o.bytes},C("photos",[S[s]]),L(e,t)};let U={};const I=e=>{if("inputPeerSelf"==e._)return"self";if(e.user_id)return`user${e.user_id}`;if(e.chat_id)return`chat${e.chat_id}`;if(e.channel_id)return`channel${e.channel_id}`;let t="";return"user"==e._&&(t="user"),"chat"==e._&&(t="chat"),"channel"==e._&&(t="channel"),t?`${t}${e.id}`:null},A=async()=>{(await k("peers")).forEach(e=>{U[e._key]=e}),e.updatePeersStatusInterval=setInterval(()=>{Object.keys(U).forEach(e=>{const t=U[e].status;t&&"userStatusOnline"==t._&&(Date.now()<1e3*t.expires||(U[e].status={_:"userStatusOffline",was_online:t.expires},C("peers",[U[e]]),ye(U[e])))})},5e3),tgProto.onUpdate("updateUserStatus",e=>{const t=I(e),s=U[t];s&&(s.status=e.status,U[t]=s,C("peers",[s]),ye(s))}),tgProto.onUpdate("updateUserName",e=>{const t=I(e),s=U[t];s&&(s.first_name=e.first_name,s.last_name=e.last_name,s.username=e.username,U[t]=s,C("peers",[s]),ye(s))}),tgProto.onUpdate("updateUserPhone",e=>{const t=I(e),s=U[t];s&&(s.phone=e.phone,U[t]=s,C("peers",[s]))}),tgProto.onUpdate("updateUserPhoto",e=>{const t=I(e),s=U[t];s&&(s.photo=e.photo,U[t]=s,C("peers",[s]),T([s]),ye(s))})},D=e=>{T(e);const t=[];e.forEach(e=>{const s=I(e);if(s)e._key=s,U[s]?m(U[s],e)||(U[s]=e,t.push(e),ye(e)):(U[s]=e,t.push(e));else if("channelForbidden"==e._&&e.broadcast){const t=I({channel_id:e.id});if(!U[t])return;return void(U[t].left=!0)}}),C("peers",t)},V=(e,t)=>{const s=I(e);U[s].access_hash=t,C("peers",[U[s]]),ye(U[s])},F=e=>U[I(e)],R=e=>{if(!e.media)return!1;if("messageMediaDocument"!=e.media._)return!1;return-1!=e.media.document.attributes.findIndex(e=>"documentAttributeSticker"==e._)},B=e=>{if(!e.media)return!1;if("messageMediaDocument"!=e.media._)return!1;const t=e.media.document.attributes.findIndex(e=>"documentAttributeVideo"==e._),s=e.media.document.attributes.findIndex(e=>"documentAttributeAnimated"==e._);return-1!=t&&-1!=s};let H={};const O=async()=>{(await k("stickers")).forEach(e=>{H[e._key]=e})},N=e=>{const t=[];e.forEach(e=>{if(!R(e))return;const s=e.media.document,a=s.id.toString(),i={_key:a,id:s.id,access_hash:s.access_hash,ref:s.file_reference,type:s.mime_type,thumbs:s.thumbs};H[a]||(H[a]=i,t.push(i))}),C("stickers",t)},j={},z=async(e,t)=>{const s=e.id.toString();if(j[s])return j[s].promise;const a=H[s];if(!t&&a.content)return"application/x-tgsticker"==a.type?{isFull:!0,data:JSON.parse((new TextDecoder).decode(await tgMain.callWorker("gunzip",a.content)))}:{isFull:!0,url:URL.createObjectURL(new Blob([a.content],{type:a.type}))};t||(async e=>{const t=e.id.toString();j[t]=h(),await tgApp.waitProtoInited();let s=!0,a=0;for(;s;){const i=await tgProto.sendMethod("upload.getFile",{location:{_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:"x"},offset:a,limit:1048576},e.dc_id);H[t].content=new Uint8Array([...H[t].content||[],...i.bytes]),"storage.filePartial"==i.type._&&1048576==i.bytes.length?a+=i.bytes.length:s=!1}C("stickers",[H[t]]);const i=j[t];delete j[t],i.resolve(z(e))})(e);const i=a.thumbs.find(e=>"photoCachedSize"==e._);if(i)return{isFull:!1,url:URL.createObjectURL(new Blob([i.bytes],{type:"application/x-tgsticker"==a.type?"image/webp":a.type}))};{const e=a.thumbs.find(e=>"photoSize"==e._),t=window.document.createElement("canvas");return t.width=e.w,t.height=e.h,{isFull:!1,url:t.toDataURL()}}},W=e=>!!e.media&&"messageMediaPhoto"==e.media._;let K={};const q=async()=>{(await k("images")).forEach(e=>{K[e._key]=e})},G=e=>{const t=[];e.forEach(e=>{if(!W(e)&&!(e=>!!e.media&&("messageMediaWebPage"==e.media._&&!!e.media.webpage.photo))(e))return;const s=e.media.photo||e.media.webpage.photo,a=s.id.toString(),i={_key:a,id:s.id,access_hash:s.access_hash,ref:s.file_reference,sizes:s.sizes,dcId:s.dc_id,contents:{}};K[a]||(K[a]=i,t.push(i))}),C("images",t)},J=(e,t)=>{const s=e.sizes.findIndex(e=>"s"==e.type)>-1,a=e.sizes.findIndex(e=>"m"==e.type)>-1,i=e.sizes.findIndex(e=>"x"==e.type)>-1,n=e.sizes.findIndex(e=>"y"==e.type)>-1,o=e.sizes.findIndex(e=>"w"==e.type)>-1;let l;return"m"==t&&(i?l="x":a?l="m":s&&(l="s")),"l"==t&&(n?l="y":o?l="w":i&&(l="x")),e.sizes.find(e=>e.type==l)},Y=(e,t)=>{if("c"==t){const e=window.document.createElement("canvas");return e.width=100,e.height=100,{url:e.toDataURL()}}const s=e.id.toString(),a=K[s],i=J(a,t);if(!i)return null;const n=window.document.createElement("canvas");return n.width=i.w,n.height=i.h,{url:n.toDataURL(),size:i}},Q=async(e,t)=>{const s=e.id.toString(),a=K[s],i=J(a,t);return a.contents[t]?{isFull:!0,url:URL.createObjectURL(new Blob([a.contents[t]],{type:"image/jpeg"})),size:i}:(await(async(e,t)=>{const s=e._key;await tgApp.waitProtoInited();let a=!0,i=0;const n=e.sizes.findIndex(e=>"s"==e.type)>-1,o=e.sizes.findIndex(e=>"m"==e.type)>-1,l=e.sizes.findIndex(e=>"x"==e.type)>-1,r=e.sizes.findIndex(e=>"y"==e.type)>-1,d=e.sizes.findIndex(e=>"w"==e.type)>-1;let c;for("m"==t&&(l?c="x":o?c="m":n&&(c="s")),"l"==t&&(r?c="y":d?c="w":l&&(c="x")),"a"==t&&(c="a");a;){const n=await tgProto.sendMethod("upload.getFile",{location:{_:"inputPhotoFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.ref,thumb_size:c},offset:i,limit:1048576},e.dcId);K[s].contents[t]=new Uint8Array([...K[s].contents[t]||[],...n.bytes]),"storage.filePartial"==n.type._&&1048576==n.bytes.length?i+=n.bytes.length:a=!1}C("images",[K[s]])})(a,t),Q(e,t))},X=e=>!!e.media&&("messageMediaDocument"==e.media._&&(1==e.media.document.attributes.length&&"documentAttributeFilename"==e.media.document.attributes[0]._));let Z={};const ee=async()=>{(await k("documents")).forEach(e=>{Z[e._key]=e})},te=e=>{const t=[];e.forEach(e=>{if(!X(e))return;const s=e.media.document,a=s.id.toString(),i={_key:a,id:s.id,access_hash:s.access_hash,ref:s.file_reference,type:s.mime_type,dcId:s.dc_id,name:s.attributes[0].file_name,size:s.size,contents:{}};Z[a]||(Z[a]=i,t.push(i))}),C("documents",t)},se=async e=>{const t=e.id.toString();await tgApp.waitProtoInited();const s=Z[t];if(s.content)return URL.createObjectURL(new Blob([s.content],{type:s.type}));let a=!0,i=0;for(;a;){const e=await tgProto.sendMethod("upload.getFile",{location:{_:"inputDocumentFileLocation",id:s.id,access_hash:s.access_hash,file_reference:s.ref,thumb_size:""},offset:i,limit:1048576},s.dcId);Z[t].content=new Uint8Array([...Z[t].content||[],...e.bytes]),"storage.filePartial"==e.type._&&1048576==e.bytes.length?i+=e.bytes.length:a=!1}return C("documents",[Z[t]]),URL.createObjectURL(new Blob([Z[t].content],{type:Z[t].type}))},ae=e=>{const t=e.id.toString();return Z[t]};let ie={};const ne=(e,t,s)=>t?`${I(t)}-${s}`:(t=e.to_id,e.to_id.user_id&&e.to_id.user_id==tgApp.userId&&(t={user_id:e.from_id}),`${I(t)}-${e.id}`),oe=async()=>{(await k("messages")).forEach(e=>{ie[e._key]=e}),tgProto.onUpdate("updateNewMessage",async e=>{const t=e.message,s=ne(t);t._key=s,ie[s]=t,C("messages",[t]),N([t]),G([t]),te([t]),await ve(t)}),tgProto.onUpdate("updateNewChannelMessage",async e=>{const t=e.message,s=ne(t);t._key=s,ie[s]=t,C("messages",[t]),N([t]),G([t]),te([t]),await ve(t)}),tgProto.onUpdate("updateEditMessage",e=>{const t=e.message,s=ne(t);t._key=s,ie[s]=t,C("messages",[t]),N([t]),G([t]),te([t]),ve(t,!0)}),tgProto.onUpdate("updateEditChannelMessage",e=>{const t=e.message,s=ne(t);t._key=s,ie[s]=t,C("messages",[t]),N([t]),G([t]),te([t]),ve(t,!0)})},le=async e=>{const t=[];e.forEach(e=>{let s=ne(e);e._key=s,ie[s]||t.push(e),ie[s]=e}),C("messages",t)},re=async(e,t)=>{const s=ie[ne(null,e,t)];if(s)return s;let a;if("peerChannel"==e._){const s=F(e);a=await tgProto.sendMethod("channels.getMessages",{channel:{_:"inputChannel",channel_id:e.channel_id,access_hash:s.access_hash},id:[{_:"inputMessageID",id:t}]})}else a=await tgProto.sendMethod("messages.getMessages",{id:[{_:"inputMessageID",id:t}]});return le(a.messages),re(e,t)},de=(e,t)=>{const s=ne(null,e,t);delete ie[s],w("messages",[s])},ce=e=>{e=Object.assign({},e);const t=ne(e);e._key=t,ie[t]=e,C("messages",[e]),ve(e)};let ge={};const he={},ue=async()=>{(await k("dialogs")).forEach(e=>{ge[e._key]=e}),tgProto.onUpdate("updates",e=>{D(e.users),D(e.chats)}),tgProto.onUpdate("updates.channelDifferenceTooLong",async e=>{le(e.messages),D(e.users),D(e.chats);const t=Object.assign({},e.dialog),s=I(t.peer);t._key=s,t._peer=F(t.peer),t._message=await re(t.peer,t.top_message),ge[s]=t,"peerChannel"==t.peer._&&tgProto.addChannelUpdateState(F(t.peer),t.pts),fe(t),$e(t),pe(t.folder_id)}),tgProto.onUpdate("updatesCombined",e=>{le(e.messages),D(e.users),D(e.chats)}),tgProto.onUpdate("updateDeleteMessages",async e=>{const t=Object.values(ge).filter(t=>e.messages.includes(t.top_message)),s=[];for(let e=0,a=t.length;e<a;e++){const a=t[e],i=a._key,n=a._peer;let o;o="user"==n._?{_:"inputPeerUser",user_id:n.id,access_hash:n.access_hash}:{_:"inputPeerChat",chat_id:n.id};const l=await tgProto.sendMethod("messages.getPeerDialogs",{peers:[{_:"inputDialogPeer",peer:o}]});le(l.messages),D(l.users),D(l.chats);const r=Object.assign({},l.dialogs[0]);r.top_message?(r._key=i,r._peer=F(r.peer),r._message=await re(r.peer,r.top_message),r._index=ge[i]._index,ge[i]=r,fe(r),$e(r)):(xe(i),delete ge[i],w("dialogs",[i])),s.includes(r.folder_id)||s.push(r.folder_id)}s.forEach(e=>{pe(e)})}),tgProto.onUpdate("updateDeleteChannelMessages",async e=>{let t=I({channel_id:e.channel_id});if(!ge[t])return;const s=ge[t].top_message;let a=!1;for(let i=0,n=e.messages.length;i<n;i++){if(e.messages[i]>s)return ge[t]._notHandleMessages||(ge[t]._notHandleMessages={}),void(ge[t]._notHandleMessages[e.messages[i]]=!0);if(e.messages[i]==s){a=!0;break}}if(a){const e=ge[t]._peer,s=(await tgProto.sendMethod("contacts.resolveUsername",{username:e.username})).chats.find(t=>t.id==e.id).access_hash;V(e,s);const a=await tgProto.sendMethod("messages.getPeerDialogs",{peers:[{_:"inputDialogPeer",peer:{_:"inputPeerChannel",channel_id:e.id,access_hash:s}}]});le(a.messages),D(a.users),D(a.chats);const i=Object.assign({},a.dialogs[0]);i._key=t,i._peer=F(i.peer),i._message=await re(i.peer,i.top_message),i._index=ge[t]._index,ge[t]=i,fe(i),tgProto.addChannelUpdateState(i._peer,i.pts),$e(i),pe(i.folder_id)}}),tgProto.onUpdate("updateFolderPeers",e=>{e.folder_peers.forEach(async e=>{const t=I(e.peer);ge[t]&&(e.folder_id?(ge[t].folder_id=e.folder_id,xe(t),fe(ge[t]),pe(0)):(ge[t].folder_id=e.folder_id,ge[t]._peer=F(ge[t].peer),ge[t]._message=await re(ge[t].peer,ge[t].top_message),Me(ge[t]),fe(ge[t]),pe(0)))})}),tgProto.onUpdate("updateDialogUnreadMark",e=>{const t=I(e.peer.peer);ge[t]&&(ge[t].unread_mark=!!e.unread,fe(ge[t]),$e(ge[t]))}),tgProto.onUpdate("updateReadHistoryOutbox",e=>{const t=I(e.peer);ge[t]&&(ge[t].read_outbox_max_id=e.max_id,fe(ge[t]),$e(ge[t]))}),tgProto.onUpdate("updateReadHistoryInbox",e=>{const t=I(e.peer);ge[t]&&(ge[t].read_inbox_max_id=e.max_id,ge[t].unread_count=e.still_unread_count,fe(ge[t]),$e(ge[t]))}),tgProto.onUpdate("updateReadChannelOutbox",e=>{const t=I({channel_id:e.channel_id});ge[t]&&(ge[t].read_outbox_max_id=e.max_id,fe(ge[t]),$e(ge[t]))}),tgProto.onUpdate("updateReadChannelInbox",e=>{const t=I({channel_id:e.channel_id});ge[t]&&(ge[t].read_inbox_max_id=e.max_id,ge[t].unread_count=e.still_unread_count,fe(ge[t]),$e(ge[t]))}),tgProto.onUpdate("updateUserTyping",e=>{const t=I({user_id:e.user_id});ge[t]&&(he[t]>-1&&clearTimeout(he[t]),ge[t]._isTyping=!0,$e(ge[t]),he[t]=setTimeout(()=>{delete he[t],ge[t]._isTyping&&(ge[t]._isTyping=!1,$e(ge[t]))},6e3))}),tgProto.onUpdate("updateChatUserTyping",e=>{let t=I({chat_id:e.chat_id});if(!ge[t]&&(t=I({channel_id:e.chat_id}),!ge[t]))return;if(!F({user_id:e.user_id}))return;const s=`${t}-${e.user_id}`;he[s]>-1&&clearTimeout(he[s]),ge[t]._isTyping=!0,ge[t]._typingIds||(ge[t]._typingIds=[]),ge[t]._typingIds.includes(e.user_id)||ge[t]._typingIds.push(e.user_id),$e(ge[t]),he[s]=setTimeout(()=>{ge[t]._typingIds&&(ge[t]._typingIds=ge[t]._typingIds.filter(t=>t!=e.user_id)),ge[t]._typingIds&&ge[t]._typingIds.length||(ge[t]._isTyping=!1,delete ge[t]._typingNames),$e(ge[t]),delete he[s]},6e3)}),tgProto.onUpdate("updateChannel",async e=>{let t=I({channel_id:e.channel_id});if(!ge[t]){const s=F({channel_id:e.channel_id}),a=await tgProto.sendMethod("messages.getPeerDialogs",{peers:[{_:"inputDialogPeer",peer:{_:"inputPeerChannel",channel_id:s.id,access_hash:s.access_hash}}]});if(a.messages&&le(a.messages),a.users&&D(a.users),a.chats&&D(a.chats),!a.dialogs||!a.dialogs.length)return;const i=Object.assign({},a.dialogs[0]);return i._key=t,i._peer=F(i.peer),i._message=await re(i.peer,i.top_message),i._index=0,ge[t]=i,tgProto.addChannelUpdateState(i._peer,i.pts),fe(i),Me(i),void pe(i.folder_id)}ge[t]._peer.left&&(tgProto.addChannelUpdateState(ge[t]._peer,null),xe(t),pe(ge[t]._peer.folder_id),delete ge[t],w("dialogs",[t]))})};let _e=0;const pe=e=>{clearTimeout(_e),_e=setTimeout(()=>{(e=>{Object.values(ge).filter(t=>{const s=t._peer&&!t._peer.deactivated,a=e?t.folder_id==e:!t.folder_id,i=!!t.top_message,n=t._peer&&!t._peer.left;return s&&a&&i&&n}).sort((e,t)=>{const s="channel"==e._peer._?Math.max(e._message.date,e._peer.date):e._message.date,a="channel"==t._peer._?Math.max(t._message.date,t._peer.date):t._message.date;return s>a?-1:s<a?1:0}).map((e,t)=>{ge[e._key]._index=t,$e(ge[e._key])})})(e)},100)},fe=e=>{const t=Object.assign({},e);delete t._peer,delete t._message,delete t._index,delete t._isTyping,delete t._typingIds,delete t._notHandleMessages,C("dialogs",[t])},me=async e=>{let t=Object.values(ge).filter(t=>{const s=e?t.folder_id==e:!t.folder_id,a=!!t.top_message;return s&&a});for(let e=0,s=t.length;e<s;e++){const s=t[e];s._peer=ge[s._key]._peer=F(s.peer),s._message=ge[s._key]._message=await re(s.peer,s.top_message),t[e]=s}return t.filter(e=>{const t=e._peer&&!e._peer.deactivated,s=e._peer&&!e._peer.left;return t&&s}).sort((e,t)=>{const s="channel"==e._peer._?Math.max(e._message.date,e._peer.date):e._message.date,a="channel"==t._peer._?Math.max(t._message.date,t._peer.date):t._message.date;return s>a?-1:s<a?1:0}).map((e,t)=>(e._index=ge[e._key]._index=t,e))},be=async()=>{const{dialogs:e,messages:t,users:s,chats:a}=await(async()=>{let e=0,t=1,s=[],a=[],i=[],n=[],o=0;for(;e<t;){const l=await tgProto.sendMethod("messages.getDialogs",{offset_date:o,offset_id:0,offset_peer:{_:"inputPeerEmpty"},limit:100,hash:0});e+=l.dialogs.length,t=l.count||0,s=s.concat(l.dialogs),a=a.concat(l.messages),i=i.concat(l.users),n=n.concat(l.chats),o=a[a.length-1].date}return{dialogs:s,messages:a,users:i,chats:n}})();le(t),D(s),D(a),e.forEach(e=>{const t=I(e.peer);e._key=t,ge[t]=e,"peerChannel"==e.peer._&&tgProto.addChannelUpdateState(F(e.peer),e.pts)}),C("dialogs",Object.values(ge))},ye=e=>{const t=I(e);ge[t]&&(ge[t]._peer=e,$e(ge[t]))},ve=async(e,t)=>{let s=e.to_id;e.to_id.user_id&&e.to_id.user_id==tgApp.userId&&(s={user_id:e.from_id});const a=I(s);if(!ge[a]){const t=await tgProto.sendMethod("messages.getDialogs",{offset_date:e.date+1,offset_id:0,offset_peer:{_:"inputPeerEmpty"},limit:5,hash:0});if(!ge[a]){le(t.messages),D(t.users),D(t.chats);const s=Object.assign({},t.dialogs.find(t=>t.peer.user_id==e.user_id));return s._key=a,s._peer=F(s.peer),s._message=await re(s.peer,s.top_message),s._index=0,ge[a]=s,fe(s),Me(s),void pe(s.folder_id)}}const i=ge[a]._notHandleMessages;if(i&&i[e.id])return delete ge[a]._notHandleMessages[e.id],void de(ge[a].peer,e.id);if("messageService"==e._&&"messageActionChatDeleteUser"==e.action._&&e.action.user_id==tgApp.userId){const e=ge[a].folder_id;return xe(a),delete ge[a],w("dialogs",[a]),void pe(e)}if(t){if(ge[a].top_message!=e.id)return;return ge[a]._message=e,$e(ge[a]),void pe(ge[a].folder_id)}ge[a].top_message!=e.id&&(de(ge[a].peer,ge[a].top_message),ge[a].top_message=e.id,ge[a].unread_mark=!1,e.out||(ge[a].unread_count+=1),fe(ge[a]),ge[a]._message=e,ge[a]._isTyping=!1,$e(ge[a]),pe(ge[a].folder_id))},Pe={add:[],update:[],delete:[]},Me=e=>{Pe.add.forEach(t=>{t(e)})},$e=e=>{Pe.update.forEach(t=>{t(e)})},xe=e=>{Pe.delete.forEach(t=>{t(e)})},ke=(e,t)=>{Pe[e].push(t)},Ce=async(e,t)=>{let s;t=t||0,"inputPeerSelf"==e._&&(s=e),"user"==e._&&(s={_:"inputPeerUser",user_id:e.id,access_hash:e.access_hash}),"chat"==e._&&(s={_:"inputPeerChat",chat_id:e.id}),"channel"==e._&&(s={_:"inputPeerChannel",channel_id:e.id,access_hash:e.access_hash});const a=await tgProto.sendMethod("messages.getHistory",{peer:s,offset_id:t,offset_date:0,add_offset:0,limit:50,max_id:0,min_id:0,hash:0});if(400==a.error_code){const s=(await tgProto.sendMethod("contacts.resolveUsername",{username:e.username})).chats.find(t=>t.id==e.id).access_hash;return e.access_hash=s,V(e,s),Ce(e,t)}if(D(a.users),D(a.chats),N(a.messages),G(a.messages),te(a.messages),0==t){ce(a.messages[0]);const t=a.messages[0].id;Se(e,t)}return a.messages},we=async(e,t,s)=>{let a;"inputPeerSelf"==t._&&(a=t),"user"==t._&&(a={_:"inputPeerUser",user_id:t.id,access_hash:t.access_hash}),"chat"==t._&&(a={_:"inputPeerChat",chat_id:t.id}),"channel"==t._&&(a={_:"inputPeerChannel",channel_id:t.id,access_hash:t.access_hash});let i={_:"inputMessagesFilterEmpty"};"photos"==s&&(i={_:"inputMessagesFilterPhotos"}),"documents"==s&&(i={_:"inputMessagesFilterDocument"});const n=await tgProto.sendMethod("messages.search",{peer:a,q:e,filter:i,max_date:0,min_date:0,offset_id:0,add_offset:0,limit:50,max_id:0,min_id:0,hash:0});if(400==n.error_code){const s=(await tgProto.sendMethod("contacts.resolveUsername",{username:t.username})).chats.find(e=>e.id==t.id).access_hash;return t.access_hash=s,V(t,s),we(e,t)}return D(n.users),D(n.chats),N(n.messages),G(n.messages),te(n.messages),n.messages},Se=(e,t)=>{if("channel"==e._)tgProto.sendMethod("channels.readHistory",{channel:{_:"inputPeerChannel",channel_id:e.id,access_hash:e.access_hash},max_id:t});else{let s;"inputPeerSelf"==e._&&(s=e),"user"==e._&&(s={_:"inputPeerUser",user_id:e.id,access_hash:e.access_hash}),"chat"==e._&&(s={_:"inputPeerChat",chat_id:e.id}),tgProto.sendMethod("messages.readHistory",{peer:s,max_id:t}).then(e=>{tgProto.setMainPts(e.pts)})}((e,t)=>{const s=I(e);ge[s]&&(ge[s].read_inbox_max_id=t,ge[s].unread_count=0,fe(ge[s]),$e(ge[s]))})(e,t)};class Ee extends HTMLElement{connectedCallback(){this.className="right-inner",this.innerHTML='<tg-side-header icon-left="close" text="Info" ref="header"></tg-side-header><div class="right-inner_content"><div class="right-info" ref="rightInfo"></div><div class="shared"><div class="tabs"><div class="tabs_elem is-active" ref="tabMedia">Media</div><div class="tabs_elem" ref="tabDocs">Docs</div></div><div class="shared_photos" ref="sharedPhotos"><tg-scroll offset-side="1" offset-top="1" offset-bottom="1" ref="scrollSharedPhotos"></tg-scroll></div><div class="shared_files" ref="sharedFiles" style="display:none"><tg-scroll offset-side="1" offset-top="1" offset-bottom="1" ref="scrollSharedDocs"></tg-scroll></div></div></div>',t(this),s(this._$header,"ilClick",()=>{this.parentNode.hide()})}show(){this.classList.add("is-visible")}hide(){this.classList.remove("is-visible")}setPeerInfo(e,a){this._$rightInfo.style.display=null,this._$rightInfo.innerHTML='<div class="right-info_photo" ref="photo"><div class="right-info_photo-text" ref="photoText"></div><img class="right-info_photo-image" ref="photoImage"></div><div class="right-info_name" ref="name"></div><div class="right-info_desc" ref="desc"></div><div class="right-info_item" ref="itemBio"><div><div class="icon icon__info"></div></div><div><div class="right-info_item-text" ref="itemBioText"></div><div class="right-info_item-desc">Bio</div></div></div><div class="right-info_item" ref="itemUsername"><div><div class="icon icon__username"></div></div><div><div class="right-info_item-text" ref="itemUsernameText"></div><div class="right-info_item-desc">Username</div></div></div><div class="right-info_item" ref="itemPhone"><div><div class="icon icon__phone"></div></div><div><div class="right-info_item-text" ref="itemPhoneText"></div><div class="right-info_item-desc">Phone</div></div></div><div class="right-info_item" ref="itemAbout"><div><div class="icon icon__info"></div></div><div><div class="right-info_item-text" ref="itemAboutText"></div><div class="right-info_item-desc">About</div></div></div><div class="right-info_item" ref="itemLink"><div><div class="icon icon__username"></div></div><div><div class="right-info_item-text" ref="itemLinkText"></div><div class="right-info_item-desc">Link</div></div></div>',t(this);const i=this._$scrollSharedPhotos.$content;i.innerHTML="";const n=this._$scrollSharedDocs.$content;if(n.innerHTML="",s(this._$tabMedia,"click",()=>{this._$tabMedia.classList.add("is-active"),this._$tabDocs.classList.remove("is-active"),this._$sharedPhotos.style.display="block",this._$sharedFiles.style.display="none"}),s(this._$tabDocs,"click",()=>{this._$tabMedia.classList.remove("is-active"),this._$tabDocs.classList.add("is-active"),this._$sharedPhotos.style.display="none",this._$sharedFiles.style.display="block"}),we("",e,"photos").then(e=>{e.forEach(e=>{const t=document.createElement("div");t.className="shared-photo";const s=new Image;t.appendChild(s),Q(e.media.photo,"a").then(e=>{s.src=e.url}),i.appendChild(t)})}),we("",e,"documents").then(e=>{e.forEach(e=>{const a=document.createElement("div");a.className="message_document is-visible",a.innerHTML='<div class="message_document-side"><div class="message_document-bg" ref="docBg"><div class="icon icon__download"></div><div class="message_document-bg-type" ref="docType"></div></div></div><div class="message_document-main"><div class="message_document-name" ref="docName"></div><div class="message_document-size" ref="docSize"></div></div>',t(a);const i=ae(e.media.document);if(!i)return;a._$docName.textContent=i.name,a._$docSize.innerHTML=P(i.size)+" &nbsp;&bull;&nbsp; "+p(e.date),!!i.content&&a.classList.add("is-loaded"),s(a,"click",()=>{let t=document.createElement("tg-loader");a.classList.add("is-loading"),a._$docBg.appendChild(t),se(e.media.document).then(e=>{a.classList.add("is-loaded"),t.remove(),a.classList.remove("is-loading");var s=document.createElement("a");document.body.appendChild(s),s.style.display="none",s.href=e,s.download=i.name,s.click()})});const o=i.name.split(".").pop();a._$docType.textContent=o,("zip"==o||"7z"==o||"rar"==o)&&a.classList.add("is-zip"),("pdf"==o||"ppt"==o||"pptx"==o)&&a.classList.add("is-pdf"),("doc"==o||"docx"==o||"rtf"==o||"odt"==o)&&a.classList.add("is-doc"),("csv"==o||"ods"==o||"xls"==o||"xlsx"==o)&&a.classList.add("is-xls"),n.appendChild(a)})}),"inputPeerSelf"==e._)return void(this._$rightInfo.style.display="none");if(e.deleted)this._$photo.style.backgroundColor="rgba(0, 0, 0, 0.21)",this._$photoText.innerHTML='<div class="icon icon__deletedavatar"></div>';else{let t;t=e.title?e.title.split(" ").slice(0,2):e.last_name?[e.first_name,e.last_name]:e.first_name.split(" ").slice(0,2);const s=t.map(e=>e.substr(0,1).toUpperCase()).join("");this._$photoText.textContent=s,this._$photo.style.backgroundColor="#"+v(e.id);const a=e.photo;a&&!a._.includes("Empty")&&L(e).then(e=>{this._$photoImage.src=e,this._$photoImage.style.display="block"})}let o;e.deleted?o="Deleted Account":"chat"==e._||"channel"==e._?o=e.title:(o=e.first_name,e.last_name&&(o+=` ${e.last_name}`)),this._$name.textContent=o,e.deleted?this._$desc.style.display="none":(a._info&&(this._$desc.textContent=a._info),"user"==e._?(a.about&&(this._$itemBio.classList.add("is-visible"),this._$itemBioText.textContent=a.about),e.username&&(this._$itemUsername.classList.add("is-visible"),this._$itemUsernameText.textContent=e.username),e.phone&&(this._$itemPhone.classList.add("is-visible"),this._$itemPhoneText.textContent="+"+e.phone)):(a.about&&(this._$itemAbout.classList.add("is-visible"),this._$itemAboutText.textContent=a.about),e.username&&(this._$itemLink.classList.add("is-visible"),this._$itemLinkText.textContent="t.me/"+e.username)))}setPeerStatus(e,t){this._$desc.textContent=e,this._$desc.classList[t?"add":"remove"]("is-blue")}}customElements.get("tg-block-right-info")||customElements.define("tg-block-right-info",Ee);class Te extends HTMLElement{constructor(){super(),this._$input=null,this._peer=null}connectedCallback(){this.className="right-inner",this.innerHTML='<tg-side-header icon-left="close" has-search ref="header"></tg-side-header><div class="right-inner_content"><div class="right-search" ref="result"><div class="right-search_title" ref="resultTitle"></div><tg-scroll ref="scroll" offset-side="1" offset-bottom="8"></tg-scroll></div></div>',t(this),this._$input=this._$header._$inputSearch,s(this._$header,"ilClick",()=>{this.parentNode.hide()});let e=0;s(this._$input,"itInput",()=>{clearTimeout(e),e=setTimeout(()=>{this._$input.getValue().length&&this.search()},1e3)}),s(this._$input,"itEnter",()=>{clearTimeout(e),this._$input.getValue().length&&this.search()})}async search(){this._$input.setLoading(!0);const e=this._$input.getValue();this.clearResults();const t=await we(this._$input.getValue(),this._peer);t.length?(this._$resultTitle.textContent=`${t.length} messages found for last week`,t.forEach(t=>{const s=document.createElement("tg-search-result");s.setData(t,e),this._$scroll.$content.appendChild(s),s.onclick=()=>{this.parentElement.parentElement._$messages.scrollToMessage(s.messageId)}}),this._$scroll.update(),this._$scroll._scrollContainer(0,!0)):this._$resultTitle.textContent="No messages found for last week",this._$input.setLoading(!1)}clearResults(){this._$resultTitle.textContent="",this._$scroll.$content.innerHTML="",this._$scroll.update(),this._$scroll._scrollContainer(0,!0)}async show(e){if(this._peer==e)return this.classList.add("is-visible"),await u(310),void this._$input.setFocus();this._peer=e,this._$input.setValue(""),this.clearResults(),this.classList.add("is-visible"),await u(310),this._$input.setFocus()}hide(){this.classList.remove("is-visible")}}customElements.get("tg-block-right-search")||customElements.define("tg-block-right-search",Te);class Le extends HTMLElement{connectedCallback(){this.className="app",this.innerHTML='<tg-block-left ref="left"></tg-block-left><tg-block-messages ref="messages"></tg-block-messages><tg-block-right ref="right"></tg-block-right>',t(this),s(this._$left,"dialogOpen",e=>{this._$messages.open(e.detail.peer,e.detail.readOutMaxId)}),s(this._$messages,"dialogActive",e=>{this._$left.activeDialog(e.detail)})}hide(){const e=document.createElement("div");e.className="page-overlay",document.body.appendChild(e),this._$pageOverlay=e,tgMain.loadAuth(),this.classList.add("app__hide"),tgProto.onConnect=null,tgProto.onDisconnect=null,l=[],a(window,"resize",d),i.forEach(e=>{a(window,e.type,e.handler)}),i=[]}initAuth(){location.reload()}}customElements.get("tg-block-app")||customElements.define("tg-block-app",Le);class Ue extends HTMLElement{constructor(){super(),this._dialogs={}}async connectedCallback(){this.className="dialogs",this.innerHTML='<tg-scroll ref="scroll" offset-side="1" offset-bottom="8"></tg-scroll><div class="dialogs_overlay" ref="topOverlay"></div><div class="dialogs_overlay dialogs_overlay__bottom" ref="bottomOverlay"></div>',t(this),s(this._$scroll,"scrollValueUpdate",()=>{const e=this._$scroll.scrollValue;this._$topOverlay.classList.add("is-visible"),this._$bottomOverlay.classList.add("is-visible"),null===e&&(this._$topOverlay.classList.remove("is-visible"),this._$bottomOverlay.classList.remove("is-visible")),0===e&&this._$topOverlay.classList.remove("is-visible"),1===e&&this._$bottomOverlay.classList.remove("is-visible")})}async init(){let e=await me();e.length||(await tgApp.waitProtoInited(),await be(),e=await me());const t=this._$scroll.$content;e.forEach(e=>{const s=document.createElement("tg-dialog");s.update(e),t.appendChild(s),console.log(e),this._dialogs[e._key]=s}),t.style.height=72*e.length+4*e.length+4+"px",this._$scroll.update(),ke("add",e=>{const s=document.createElement("tg-dialog");s.update(e,!0),t.appendChild(s),this._dialogs[e._key]=s;const a=s.style.transform;s.style.transform=`${a} scale(0)`,s.offsetWidth,s.style.transform=a,t.style.height=72*this._dialogs.length+4*this._dialogs.length+4+"px",this._$scroll.update()}),ke("update",e=>{const t=this._dialogs[e._key];t&&t.update(e)}),ke("delete",e=>{const s=this._dialogs[e];s&&(s.hide(),delete this._dialogs[e]),t.style.height=72*this._dialogs.length+4*this._dialogs.length+4+"px",this._$scroll.update()}),this.dispatchEvent(new CustomEvent("dLoaded"))}activeDialog(e){let t;Object.values(this._dialogs).forEach(e=>{e.setActive(!1)}),t="inputPeerSelf"==e._?`user${tgApp.userId}`:I(e),this._dialogs[t].setActive(!0)}}customElements.get("tg-block-dialogs")||customElements.define("tg-block-dialogs",Ue);class Ie extends HTMLElement{connectedCallback(){this.className="app_left";let e;this.innerHTML=`<div class="app_left-overlay" ref="overlay"></div><tg-side-header icon-left="menu" menu-trigger="iconLeft" menu-items="${encodeURIComponent(JSON.stringify([["saved","saved","Saved"],["help","help","Help"],["logout","logout","Log Out"]]))}" has-search ref="header"></tg-side-header><tg-block-dialogs ref="dialogs"></tg-block-dialogs>`,t(this),s(this._$header,"savedMenuClick",()=>{this.dispatchEvent(new CustomEvent("dialogOpen",{detail:{peer:{_:"inputPeerSelf"}},bubbles:!0}))}),s(this._$header,"helpMenuClick",()=>{window.open("https://telegram.org/faq","_blank")}),s(this._$header,"logoutMenuClick",()=>{tgProto.logOut()});let a=setTimeout(()=>{e=document.createElement("tg-loader"),e.setAttribute("blue",!0),e.setAttribute("big",!0),this._$overlay.appendChild(e)},500);s(this._$dialogs,"dLoaded",async()=>{clearTimeout(a),e&&(e.classList.add("loader__hide"),await u(150)),this._$overlay.classList.add("app_left-overlay__hide"),await u(300),this._$overlay.remove()}),this._$dialogs.init()}activeDialog(e){this._$dialogs.activeDialog(e)}}customElements.get("tg-block-left")||customElements.define("tg-block-left",Ie);const Ae=e=>{const t=new Date(1e3*e);return t.setHours(0,0,0,0),t.toString()},De=async e=>{let t;if("user"==e._)t=await tgProto.sendMethod("users.getFullUser",{id:{_:"inputUser",user_id:e.id,access_hash:e.access_hash}});else if("chat"==e._)t=(await tgProto.sendMethod("messages.getFullChat",{chat_id:e.id})).full_chat;else{const s=await tgProto.sendMethod("channels.getFullChannel",{channel:{_:"inputChannel",channel_id:e.id,access_hash:e.access_hash}});if(!s.full_chat){const t=(await tgProto.sendMethod("contacts.resolveUsername",{username:e.username})).chats.find(t=>t.id==e.id).access_hash;return V(e,t),De(e)}t=s.full_chat}return t};class Ve extends HTMLElement{constructor(){super(),this._peer=null,this._peerKey=null,this._loaderHideTimeout=0,this._isReceiveMessages=!1,this._messages={},this._messagesObjects=[],this._messageToAdd=[],this._scrollValue=1,this._scrollValuePx=0,this._maxReadedId=0,this._readOutMaxId=0,this._hasMessagesToLoad=!0,this._isLoadingAddit=!1}connectedCallback(){this.className="app_messages",this.innerHTML='<div class="messages-bg messages-bg__default"></div><div class="messages-wrapper" ref="wrapper"><div class="messages-header"><div class="messages-header_peer" ref="headerPeer"><div class="messages-header_photo" ref="headerPhoto"><div class="messages-header_photo-text" ref="headerPhotoText"></div><img class="messages-header_photo-image" ref="headerPhotoImage"></div><div class="messages-header_info"><div class="messages-header_name" ref="headerName"></div><div class="messages-header_desc" ref="headerDesc"></div></div></div><div class="messages-header_actions"><tg-button icon="search" ref="headerSearch"></tg-button></div></div><tg-scroll ref="scroll" no-scroll-update offset-side="8" offset-top="8" offset-bottom="10"><div class="messages-fill"></div><div class="messages-list" ref="list"></div></tg-scroll><div class="messages-form" ref="form"><tg-send ref="send"></tg-send></div></div><div class="messages-loader" ref="loader"><tg-loader big thin></tg-loader></div>',t(this),s(this._$send,"itInput",()=>{this._$scroll.update(),this._scrollValue>=1&&this._$scroll._scrollContainer(999999,!0)}),s(this._$send,"sendMedia",async()=>{const e=this._$send._inputMedia,t=this._peer;let s;"inputPeerSelf"==t._&&(s=t),"user"==t._&&(s={_:"inputPeerUser",user_id:t.id,access_hash:t.access_hash}),"chat"==t._&&(s={_:"inputPeerChat",chat_id:t.id}),"channel"==t._&&(s={_:"inputPeerChannel",channel_id:t.id,access_hash:t.access_hash}),tgProto.sendMessage(s,"",e)}),s(this._$send,"sendMess",async()=>{const e=this._$send.getValue();this._$send.setValue("");const t=this._peer;let s;"inputPeerSelf"==t._&&(s=t),"user"==t._&&(s={_:"inputPeerUser",user_id:t.id,access_hash:t.access_hash}),"chat"==t._&&(s={_:"inputPeerChat",chat_id:t.id}),"channel"==t._&&(s={_:"inputPeerChannel",channel_id:t.id,access_hash:t.access_hash}),tgProto.sendMessage(s,e)}),s(this._$headerPeer,"click",()=>{this.parentNode._$right.show("info")}),s(this._$headerSearch,"click",()=>{this.parentNode._$right.show("search",this._peer)}),s(this._$scroll,"scrollValueUpdate",async()=>{if(!this._messagesObjects.length)return;let e=this._$scroll.scrollValue;null===e&&(e=1),this._scrollValue=e,this._scrollValuePx=this._$scroll.scrollValuePx,e<1?this._$scroll._$container.classList.add("is-masked-bottom"):(this._$scroll._$container.classList.remove("is-masked-bottom"),this.setReaded(this._messagesObjects[0].id)),e>0?this._$scroll._$container.classList.add("is-masked-top"):this._$scroll._$container.classList.remove("is-masked-top"),this._scrollValuePx<500&&this._hasMessagesToLoad&&!this._isLoadingAddit&&(this._isLoadingAddit=!0,Ce(this._peer,this._messagesObjects[this._messagesObjects.length-1].id).then(e=>{const t=this._$scroll.scrollValuePx,s=this._$scroll._$content.offsetHeight,a=this._messagesObjects.length-1;this.handleMessages(e),this.updateNearMessages(a);const i=this._$scroll._$content.offsetHeight-s;this._$scroll._scrollContainer(t+i,!0,i),this._isLoadingAddit=!1}))}),tgProto.onUpdate("updateNewMessage",e=>{this.newMessageHandler(e.message)}),tgProto.onUpdate("updateNewChannelMessage",e=>{this.newMessageHandler(e.message)}),tgProto.onUpdate("updateDeleteMessages",async e=>{this.deleteMessagesHandler(e)}),tgProto.onUpdate("updateDeleteChannelMessages",async e=>{this.deleteMessagesHandler(e)}),tgProto.onUpdate("updateEditMessage",e=>{this.editMessageHandler(e.message)}),tgProto.onUpdate("updateEditChannelMessage",e=>{this.editMessageHandler(e.message)}),tgProto.onUpdate("updateReadHistoryOutbox",e=>{this.readHistoryOutboxHandler(e)}),tgProto.onUpdate("updateReadChannelOutbox",e=>{this.readHistoryOutboxHandler(e)}),tgProto.onUpdate("updateUserStatus",e=>{const t=I(e);this._peerKey==t&&this.updateStatusHandler(e.status)})}scrollToExistsMessage(e){if(!this._messages[e])return!1;const t=this._messages[e].offsetTop;return this._$scroll._scrollContainer(t-this._$scroll.offsetHeight/2,!0),!0}async scrollToMessage(e){let t=this.scrollToExistsMessage(e);for(this._$loader.style.display="block",this._$loader.offsetWidth,this._$loader.classList.add("is-visible");!t&&this._hasMessagesToLoad;){{const e=await Ce(this._peer,this._messagesObjects[this._messagesObjects.length-1].id),t=this._messagesObjects.length-1;this.handleMessages(e),this.updateNearMessages(t)}t=this.scrollToExistsMessage(e)}this._$loader.style.display=null}updateStatusHandler(e){let t=!1,s="";"userStatusOnline"==e._?(t=!0,s="online"):s="offline",this._$headerDesc.textContent=s,this._$headerDesc.classList[t?"add":"remove"]("is-blue"),this.parentNode._$right._$info.setPeerStatus(s,t)}readHistoryOutboxHandler(e){let t;t=e.channel_id?I(e):I(e.peer),this._peerKey==t&&(Object.keys(this._messages).forEach(t=>{this._messages[t].isOut&&t>this._readOutMaxId&&t<=e.max_id&&this._messages[t].setReaded()}),this._readOutMaxId=e.max_id)}editMessageHandler(e){let t;if(t="peerUser"==e.to_id._&&e.to_id.user_id==tgApp.userId?e.from_id==tgApp.userId?I({_:"inputPeerSelf"}):I({user_id:e.from_id}):I(e.to_id),this._peerKey!=t)return;if(!this._messages[e.id])return;"self"==t&&(e.out=!0);const s=this._messagesObjects.findIndex(t=>t.id==e.id);let a=null;this._messagesObjects[s-1]&&(a=this._messages[this._messagesObjects[s-1].id]),this._messages[e.id].setData(e,this._messagesObjects[s-1],this._messagesObjects[s+1],this._peer,a,null,this._readOutMaxId),this.updateNearMessages(s-1),this.updateNearMessages(s+1),this._$scroll.update()}updateNearMessages(e){if(this._messagesObjects[e]){let t=null;this._messagesObjects[e-1]&&(t=this._messages[this._messagesObjects[e-1].id]),this._messages[this._messagesObjects[e].id].setData(this._messagesObjects[e],this._messagesObjects[e-1],this._messagesObjects[e+1],this._peer,t,null,this._readOutMaxId)}}deleteMessagesHandler(e){e.channel_id&&this._peerKey!=I(e)||(e.messages.forEach(t=>{if(!this._messages[t])return;const s=this._messagesObjects.findIndex(e=>e.id==t);if(e.channel_id)return this._messagesObjects.splice(s,1),void this._messages[t].remove();this._messagesObjects.splice(s,1),this._messages[t].remove(),this.updateNearMessages(s-1),this.updateNearMessages(s)}),this._$scroll.update())}newMessageHandler(e){let t;if(t="peerUser"==e.to_id._&&e.to_id.user_id==tgApp.userId?e.from_id==tgApp.userId?I({_:"inputPeerSelf"}):I({user_id:e.from_id}):I(e.to_id),this._peerKey!=t)return;if(this._messages[e.id])return void this.setReaded(e.id);if("self"==t&&(e.out=!0),!this._isReceiveMessages)return this._messageToAdd.push(e),void this.setReaded(e.id);const s=this._messagesObjects[0];this.insertMessage(e,null,s,null,this._messages[s.id],!0),this._$scroll.update(),this._scrollValue>=1&&(this.setReaded(e.id),this._$scroll._scrollContainer(999999,!0))}setReaded(e){e<=this._maxReadedId||(this._maxReadedId=e,setTimeout(()=>{Se(this._peer,e)},0))}async open(e,t){"user"==e._&&e.id==tgApp.userId&&(e={_:"inputPeerSelf"});const s=I(e);if(this._peerKey==s)return void this._$scroll._scrollContainer(999999,!0);if(this.parentNode._$right.peerChanged(),this._$send.setValue(""),"inputPeerSelf"==e._)this._$headerPhotoImage.style.display=null,this._$headerPhoto.style.backgroundColor=null,this._$headerPhotoText.innerHTML='<div class="icon icon__savedavatar"></div>';else if(e.deleted)this._$headerPhotoImage.style.display=null,this._$headerPhoto.style.backgroundColor="rgba(0, 0, 0, 0.21)",this._$headerPhotoText.innerHTML='<div class="icon icon__deletedavatar"></div>';else{let t;t=e.title?e.title.split(" ").slice(0,2):e.last_name?[e.first_name,e.last_name]:e.first_name.split(" ").slice(0,2);const s=t.map(e=>e.substr(0,1).toUpperCase()).join("");this._$headerPhotoText.textContent=s,this._$headerPhoto.style.backgroundColor="#"+v(e.id);const a=e.photo;a&&!a._.includes("Empty")?L(e).then(e=>{this._$headerPhotoImage.src=e,this._$headerPhotoImage.style.display="block"}):this._$headerPhotoImage.style.display=null}let a;"inputPeerSelf"==e._?a="Saved Messages":e.deleted?a="Deleted Account":"chat"==e._||"channel"==e._?a=e.title:(a=e.first_name,e.last_name&&(a+=` ${e.last_name}`)),this._$headerName.textContent=a,"inputPeerSelf"==e._?(this.parentNode._$right._$info.setPeerInfo(e),this._$headerDesc.textContent=""):e.deleted?this._$headerDesc.textContent="":"user"==e._?De(e).then(t=>{this.parentNode._$right._$info.setPeerInfo(e,t),this.updateStatusHandler(e.status)}):De(e).then(t=>{let s="";if("channelFull"==t._){const e=t.participants_count,a=t.online_count;s=void 0===a?`${b(e)} subscribers`:`${b(e)} members, `+`${b(a)} online`}else{const e=t.participants.participants.length;s=`${b(e)} members`}this._$headerDesc.textContent=s,t._info=s,this.parentNode._$right._$info.setPeerInfo(e,t)}),this._$wrapper.style.display=null,this._peer=e,this._peerKey=s,this._readOutMaxId=t,this._isReceiveMessages=!1,this._messagesObjects=[],this._hasMessagesToLoad=!0,this.dispatchEvent(new CustomEvent("dialogActive",{detail:e,bubbles:!0}));const i=this._$list;"channel"==e._&&e.broadcast?(i.classList.add("is-channel"),this._$form.style.display="none"):(i.classList.remove("is-channel"),this._$form.style.display=null),clearTimeout(this._loaderHideTimeout),this._messages={},i.innerHTML="",this._$scroll.update(),this._$loader.style.display="block",this._$loader.offsetWidth,this._$loader.classList.add("is-visible");let n=(await Promise.all([Ce(e,0),u(400)]))[0];this._$loader.style.display=null,this._$wrapper.style.display="flex",this._maxReadedId=n[0].id,this.handleMessages(n),this._$scroll._scrollContainer(999999,!0),this._isReceiveMessages=!0,this._messageToAdd.forEach(e=>{const t=this._messagesObjects[0];this.insertMessage(e,null,t,null,this._messages[t.id],!0)}),this._messageToAdd=[]}handleMessages(e){e.length<50&&(this._hasMessagesToLoad=!1),"inputPeerSelf"==this._peer._&&(e=e.map(e=>(e.out=!0,e)));let t=null;const s=this._messagesObjects[this._messagesObjects.length-1];s&&(t=this._messages[s.id]),e.forEach((a,i)=>{let n=e[i-1];n||(n=s),t=this.insertMessage(a,n,e[i+1],t,null)}),this._$scroll.update()}insertMessage(e,t,s,a,i,n){const o=document.createElement("tg-message");if(n?this._$list.appendChild(o):this._$list.insertBefore(o,this._$list.firstChild),this._messagesObjects[n?"unshift":"push"](e),o.setData(e,t,s,this._peer,a,i,this._readOutMaxId),this._messages[e.id]=o,!this._hasMessagesToLoad&&!s||!s||Ae(s.date)!=Ae(e.date)){const t=document.createElement("div");t.className="message is-info",t.innerHTML=`<div class="message_wrapper"><div class="message_text">${(e=>{const t=new Date(1e3*e),s=new Date;if(s.setHours(0,0,0,0),Math.round(t/1e3)>Math.round(s/1e3))return"Today";if(Math.round(t/1e3)>Math.round(s/1e3)-86400)return"Yesterday";const a=new Date;if(a.setHours(0,0,0,0),a.setDate(a.getDate()-6),e>Math.round(a/1e3))switch(t.getDay()){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}const i=new Date;if(a.setHours(0,0,0,0),i.setFullYear(i.getFullYear()-1),e>Math.round(i/1e3)){const e=t.getDate();return`${f[t.getMonth()]} ${e}`}const n=f[t.getMonth()];return`${t.getDate()} ${n} ${t.getFullYear()}`})(e.date)}</div></div>`,this._$list.insertBefore(t,o)}return n&&this._messages[this._messagesObjects[1].id].setData(this._messagesObjects[1],this._messagesObjects[0],this._messagesObjects[2],this._peer,o,null,this._readOutMaxId),o}}customElements.get("tg-block-messages")||customElements.define("tg-block-messages",Ve);class Fe extends HTMLElement{constructor(){super(),this._current=""}connectedCallback(){this.className="app_right",this.innerHTML='<tg-block-right-info ref="info"></tg-block-right-info><tg-block-right-search ref="search"></tg-block-right-search>',t(this)}peerChanged(){"search"==this._current&&this.hide()}show(e,t,s){this._$info.hide(),this._$search.hide(),this[`_$${e}`].show(t),this._current=e,s||this.classList.add("is-visible")}async hide(){this.classList.remove("is-visible"),await u(300),this.show("info",null,!0)}}customElements.get("tg-block-right")||customElements.define("tg-block-right",Fe);class Re extends HTMLElement{constructor(){super(),this._$prevWave=null}connectedCallback(){this.className=["button"].join(" ");let e="";const a=this.getAttribute("icon");a&&(e=`<span class="icon icon__${a}"></span>`),this.innerHTML=e,t(this),s(this,"click",this._click)}_click(e){const t=this.getBoundingClientRect(),s=e.x-t.x,a=e.y-t.y,i=document.createElement("div");i.classList.add("button_wave"),i.style.top=a+"px",i.style.left=s+"px",this.appendChild(i),this._$prevWave&&this._$prevWave.classList.add("button_wave__hide"),this._$prevWave=i,this.classList.add("is-hover");const n=this.offsetWidth/2,o=(Math.abs(n-s)+n)/this.offsetWidth;setTimeout(()=>{i.classList.add("button_wave__hide"),this.classList.remove("is-hover"),setTimeout(()=>{this.removeChild(i)},450)},450*o),this.dispatchEvent(new CustomEvent("bClick"))}}customElements.get("tg-button")||customElements.define("tg-button",Re);class Be extends HTMLElement{constructor(){super(),this._isInited=!1,this._badgeTimeout=0,this._prevParams={},this._peer=null,this._readOutMaxId=0,this._$prevWave=null}async connectedCallback(){this.className="dialog"}update(e){const t=this._getParams(e),s=this._prevParams;if(this._isInited||(this._init(t),this._isInited=!0),!m(t.photo,s.photo)){const e=t.photo;"saved"==e?(this._$photoImage.style.display=null,this._$photoText.innerHTML='<div class="icon icon__savedavatar"></div>'):(this._$photoText.textContent=t.photo.text,this._$photo.style.backgroundColor=`#${e.color}`,this._$photoImage.style.display=null,e.content&&e.content.then(e=>{this._$photoImage.src=e,this._$photoImage.style.display="block"}))}if(t.isOnline!=s.isOnline&&this._$online.classList[t.isOnline?"add":"remove"]("is-visible"),t.name!=s.name&&(this._$name.textContent=t.name),t.date!=s.date&&(this._$date.textContent=t.date),t.text!=s.text&&(this._$text.innerHTML=t.text),t.status!=s.status){const e=this._$status.classList;"readed"==s.status&&e.remove("is-readed"),"sended"==s.status&&e.remove("is-sended"),"readed"==t.status&&e.add("is-readed"),"sended"==t.status&&e.add("is-sended")}if(t.isUnreadMark!=s.isUnreadMark||t.isSilent!=s.isSilent||t.unreadedCount!=s.unreadedCount){const e=t.isUnreadMark||t.unreadedCount,s=!t.isUnreadMark&&t.isSilent,a=t.isUnreadMark?"":t.unreadedCount,i=this._$badge.classList;e?(clearTimeout(this._$badge._hideTimeout),i.add("is-display"),this._$badge.offsetWidth,i.add("is-visible")):(this._$badge.classList.remove("is-visible"),this._$badge._hideTimeout=setTimeout(()=>{this._$badge.classList.remove("is-display")},300)),s?i.add("is-gray"):i.remove("is-gray"),e&&(this._$badgeText.textContent=a)}if(t.index!=s.index){this.style.zIndex=(99999-t.index).toString();const e=`translateY(${72*t.index+4*t.index}px)`;this.style.transform=e}this._prevParams=t}_init(e){this.innerHTML=`<div class="dialog_side"><div class="dialog_photo" ref="photo"><div class="dialog_photo-text" ref="photoText"></div><img class="dialog_photo-image" ref="photoImage"></div><div class="dialog_online" ref="online"></div></div><div class="dialog_main"><div class="dialog_header"><div class="dialog_name" ref="name"></div>${e.isVerified?'<div class="icon icon__verified"></div>':""}<div class="dialog_fill"></div>${e.isBroadcast?"":'<div class="dialog_status" ref="status"><div class="icon icon__check1"></div><div class="icon icon__check2"></div></div>'}<div class="dialog_date" ref="date"></div></div><div class="dialog_body"><div class="dialog_text" ref="text"></div><div class="badge" ref="badge"><span ref="badgeText"></span></div></div></div>`,t(this),s(this,"click",e=>{const t=this.getBoundingClientRect(),s=e.x-t.x,a=e.y-t.y,i=document.createElement("div");i.classList.add("dialog_wave"),i.style.top=a+"px",i.style.left=s+"px",this.appendChild(i),this._$prevWave&&this._$prevWave.classList.add("dialog_wave__hide"),this._$prevWave=i,this.classList.add("is-hover");const n=this.offsetWidth/2,o=(Math.abs(n-s)+n)/this.offsetWidth;setTimeout(()=>{i.classList.add("dialog_wave__hide"),this.classList.remove("is-hover"),setTimeout(()=>{this.removeChild(i)},300)},450*o*1.2),this.dispatchEvent(new CustomEvent("dialogOpen",{detail:{peer:this._peer,readOutMaxId:this._readOutMaxId},bubbles:!0}))})}_getParams(e){const t={},s=e._peer,a=e._message,i=!!s.broadcast;if(this._peer=s,this._readOutMaxId=e.read_outbox_max_id,s.self)t.photo="saved";else{let e;e=s.title?s.title.split(" ").slice(0,2):s.last_name?[s.first_name,s.last_name]:s.first_name.split(" ").slice(0,2),t.photo={text:e.map(e=>e.substr(0,1).toUpperCase()).join(""),color:v(s.id)};const a=s.photo;a&&!a._.includes("Empty")&&(t.photo.constructor=a.photo_small,t.photo.content=L(s))}if(t.name=s.self?"Saved Messages":s.title?s.title:s.last_name?`${s.first_name} ${s.last_name}`:s.first_name,"user"==s._&&s.id!=tgApp.userId&&(t.isOnline=s.status&&"userStatusOnline"==s.status._),!i){const s=a.out&&e.top_message==e.read_outbox_max_id;t.status=s?"readed":!s&&a.out?"sended":null}if(t.date=_(a.date),e._isTyping){let s="";e._typingIds&&(s=e._typingIds.map(e=>F({user_id:e}).first_name).join(", "),s+=" "),t.text=`<div>${s}typing<span>.</span><span>.</span><span>.</span></div>`}else if("channel"==s._&&s.date>a.date)t.text="You joined this channel";else{let e="";if(a.out)e="<span>You:</span>";else if("user"!=s._&&a.from_id){const t=F({user_id:a.from_id});t&&(e=`<span>${t.first_name}:</span>`)}let i=a.message;"messageService"==a._&&("messageActionHistoryClear"==a.action._?(e="",i=""):i=a.action._.substr(13).match(/[A-Z][a-z]+/g).map(e=>e.toLowerCase()).join(" "));const n=a.media;if(n&&"messageMediaEmpty"!=n._){let e="";if("messageMediaDocument"==n._){const t=n.document;if(t&&t.attributes){const s=t.attributes;for(let t=0,i=s.length;t<i;t++){const i=s[t];if("documentAttributeVideo"==i._){e=B(a)?"Gif":"Video";break}if("documentAttributeAudio"==i._){e="Audio";break}if("documentAttributeSticker"==i._){e=`Sticker ${i.alt}`;break}}X(a)&&(e=t.attributes[0].file_name),e||(e="Document")}else e="Document"}else e="messageMediaWebPage"==a.media._?"":n._.substr(12);i&&e?i=`${e}, ${i}`:i||(i=e)}t.text=(e?e+" ":"")+i}t.unreadedCount=e.unread_count,t.isUnreadMark=!!e.unread_mark;const n=e.notify_settings;return t.isSilent=n.silent||n.mute_until&&n.mute_until>Math.round(Date.now()/1e3),t.isBroadcast=i,t.isVerified=s.verified,t.index=e._index,t}hide(){const e=this.style.transform;this.style.transform=`${e} scale(0)`,setTimeout(()=>{this.remove()},300)}setActive(e){this.classList[e?"add":"remove"]("is-active")}}customElements.get("tg-dialog")||customElements.define("tg-dialog",Be);class He extends HTMLElement{connectedCallback(){const e=[];this.hasAttribute("blue")&&e.push("loader__blue"),this.hasAttribute("big")&&e.push("loader__big"),this.hasAttribute("thin")&&e.push("loader__thin"),this.innerHTML=`<svg class="${e.join(" ")} loader" viewBox="25 25 50 50" ref="svg"><circle cx="50" cy="50" r="20"></circle></svg>`,t(this)}destroy(){return new Promise(e=>{this._$svg.classList.add("loader__hide"),setTimeout(()=>{this.remove(),e()},300)})}}customElements.get("tg-loader")||customElements.define("tg-loader",He);class Oe extends HTMLElement{constructor(){super(),this._$overlay=null,this._isVisible=!1,this._isVisibleAttribute=!1}connectedCallback(){this.className="menu";const e=JSON.parse(decodeURIComponent(this.getAttribute("items"))),a=e.findIndex(e=>e[1])>-1;this._isVisibleAttribute=this.hasAttribute("is-visible"),this._isVisibleAttribute&&(this._isVisible=!0);let i='<div class="menu_hover" ref="hover"></div>';e.forEach(e=>{i+=`<div class="menu_item" ref="${e[0]}">${a?`<div><div class="icon icon__${e[1]}"></div></div>`:""}<div>${e[2]}</div>${e[3]?`<div><div class="badge">${e[3]}</div></div>`:""}</div>`}),this.innerHTML=i,t(this);const n=document.createElement("div");n.className="page-overlay",this._$overlay=n,s(n,"click",()=>{this.hide()}),e.forEach(e=>{s(this[`_$${e[0]}`],"click",this._clickHandler)})}show(e,t){this._isVisibleAttribute||(this._isVisible=!0),this.style.left=`${e}px`,this.style.top=`${t}px`,this.classList.add("is-visible"),document.body.appendChild(this._$overlay)}hide(){this._isVisibleAttribute||(this._isVisible=!1),this.classList.remove("is-visible"),this._$overlay.remove()}_clickHandler(){(this._isVisibleAttribute||this.parentElement._isVisible)&&(this.dispatchEvent(new CustomEvent(this.getAttribute("ref")+"MenuClick",{bubbles:!0})),this.parentElement.hide())}}customElements.get("tg-menu")||customElements.define("tg-menu",Oe);const Ne="http://www.w3.org/2000/svg",je=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;class ze extends HTMLElement{constructor(){super(),this._animation=null,this.isOut=!1}connectedCallback(){this.className="message"}disconnectedCallback(){if(this._animation)try{this._animation.destroy()}catch(e){}}setReaded(){const e=this._$info.querySelector(".icon__check1");e.classList.remove("icon__check1"),e.classList.add("icon__check2")}async setData(e,a,i,n,o,l,r){this.innerHTML='<div class="message_photo" ref="photo"><div class="message_photo-text" ref="photoText"></div><img class="message_photo-image" ref="photoImage"></div><div class="message_wrapper" ref="wrapper"><div class="message_document" ref="doc"><div class="message_document-side"><div class="message_document-bg" ref="docBg"><div class="icon icon__download"></div><div class="message_document-bg-type" ref="docType"></div></div></div><div class="message_document-main"><div class="message_document-name" ref="docName"></div><div class="message_document-size" ref="docSize"></div></div></div><div class="message_name" ref="name"></div><div class="message_image" ref="image"></div><div class="message_text" ref="text"></div><div class="message_link" ref="link"><div class="message_link-image" ref="linkImage"></div><a class="message_link-name" target="_blank" ref="linkName"></a><div class="message_link-title" ref="linkTitle"></div><div class="message_link-info" ref="linkInfo"></div></div><div class="message_info" ref="info"></div></div>',t(this),this.classList.remove("is-chat"),this.classList.remove("is-pip"),this.classList.remove("is-offset"),this.classList.remove("is-saved-top"),this._$name.classList.remove("is-visible"),this._$photo.classList.remove("is-visible"),this.isOut=!1,e.out&&(this.classList.add("is-out"),this.isOut=!0);const d="chat"==n._||"channel"==n._&&!n.broadcast,c=i&&i.from_id!=e.from_id,g=a&&a.from_id!=e.from_id;if(d&&c&&this.classList.add("is-offset"),d&&!e.out){this.classList.add("is-chat");const t=!i||c,s=!a||g;let n;if((t||s)&&(n=F({user_id:e.from_id})),t){let e;n.deleted?e="Deleted Account":(e=n.first_name,n.last_name&&(e+=` ${n.last_name}`)),this._$name.textContent=e,this._$name.classList.add("is-visible")}if(s)if(this._$photo.classList.add("is-visible"),n.deleted)this._$photo.style.backgroundColor="rgba(0, 0, 0, 0.21)",this._$photoText.innerHTML='<div class="icon icon__deletedavatar"></div>';else{let e;e=n.last_name?[n.first_name,n.last_name]:n.first_name.split(" ").slice(0,2);const t=e.map(e=>e.substr(0,1).toUpperCase()).join("");this._$photoText.textContent=t,this._$photo.style.backgroundColor="#"+v(n.id),n.photo&&!n.photo._.includes("Empty")&&L(n).then(e=>{this._$photoImage.src=e,this._$photoImage.style.display="block"})}}let h="";e.views&&(h+=`<span>${(e=>{if(e>999499){const t=Math.round(e/1e5);return t%10?`${(t/10).toFixed(1)}M`:`${t/10}M`}if(e>999){const t=Math.round(e/100);return t%10?`${(t/10).toFixed(1)}K`:`${t/10}K`}return e})(e.views)}<div class="icon icon__eye"></div></span>`);let u=p(e.date);e.edit_date&&(u+=`\nEdited: ${p(e.edit_date)}`);const f=_(e.date,!0);h+=`<span title="${u}">${e.edit_date?"edited ":""}${f}</span>`,e.out&&"inputPeerSelf"!=n._&&(h+=`<div class="icon icon__check${r>=e.id?"2":"1"}"></div>`),this._$info.innerHTML=h;let m=!0;const b=W(e),y=X(e),M=e.media&&"messageMediaWebPage"==e.media._&&"webPageEmpty"!=e.media.webpage._;if(M||this._$link.remove(),"messageService"==e._)m=!1,this.classList.add("is-info"),this._$name.classList.remove("is-visible"),this._$text.textContent=e.action._.substr(13).match(/[A-Z][a-z]+/g).map((e,t)=>0==t?e:e.toLowerCase()).join(" ");else if(B(e))this._$text.innerHTML="Gif (not support yet)"+`<div class="message_info">${h}</div>`;else if(R(e)){m=!1,this._$wrapper.classList.add("is-no-bubble","is-sticker"),this._$name.classList.remove("is-visible");let t=await z(e.media.document);t.isFull?t.data?this._animation=lottie.loadAnimation({container:this._$text,loop:!0,autoplay:!0,animationData:t.data}):this._$text.innerHTML=`<img src="${t.url}">`:(t.url&&(this._$text.innerHTML=`<img src="${t.url}">`),t=await z(e.media.document),t.data?(this._$text.innerHTML="",this._animation=lottie.loadAnimation({container:this._$text,loop:!0,autoplay:!0,animationData:t.data})):this._$text.innerHTML=`<img src="${t.url}">`)}else if((e=>{if(!e.media)return!1;if("messageMediaDocument"!=e.media._)return!1;return-1!=e.media.document.attributes.findIndex(e=>"documentAttributeVideo"==e._)})(e))this._$text.innerHTML="Video (not support yet)"+`<div class="message_info">${h}</div>`;else if((e=>{if(!e.media)return!1;if("messageMediaDocument"!=e.media._)return!1;return-1!=e.media.document.attributes.findIndex(e=>"documentAttributeAudio"==e._)})(e))this._$text.innerHTML="Audio (not support yet)"+`<div class="message_info">${h}</div>`;else if(!e.media||e.message||b||y){const t=e.message;if(b){this._$name.classList.remove("is-visible"),this._$image.classList.add("is-visible"),this._$wrapper.classList.add("has-image"),t?this._$image.classList.add("has-text"):(this._$wrapper.classList.add("has-only-image"),this._$text.remove());const s=Y(e.media.photo,"m"),a=new Image;a.src=s.url,a.width=s.size.w,a.height=s.size.h,this._$image.appendChild(a),Q(e.media.photo,"m").then(e=>{a.src=e.url})}if(y){this._$name.classList.remove("is-visible"),this._$doc.classList.add("is-visible"),this._$wrapper.classList.add("has-document"),t?this._$doc.classList.add("has-text"):(this._$wrapper.classList.add("has-only-document"),this._$text.remove());const a=ae(e.media.document);this._$docName.textContent=a.name,this._$docSize.textContent=P(a.size),!!a.content&&this._$doc.classList.add("is-loaded"),s(this._$doc,"click",()=>{let t=document.createElement("tg-loader");this._$doc.classList.add("is-loading"),this._$docBg.appendChild(t),se(e.media.document).then(e=>{this._$doc.classList.add("is-loaded"),t.remove(),this._$doc.classList.remove("is-loading");var s=document.createElement("a");document.body.appendChild(s),s.style.display="none",s.href=e,s.download=a.name,s.click()})});const i=a.name.split(".").pop();this._$docType.textContent=i,("zip"==i||"7z"==i||"rar"==i)&&this._$doc.classList.add("is-zip"),("pdf"==i||"ppt"==i||"pptx"==i)&&this._$doc.classList.add("is-pdf"),("doc"==i||"docx"==i||"rtf"==i||"odt"==i)&&this._$doc.classList.add("is-doc"),("csv"==i||"ods"==i||"xls"==i||"xlsx"==i)&&this._$doc.classList.add("is-xls")}if(t){const s=t.replace(je,"").trim(),a=[...t.replace(/\s/g,"")];if(!s&&a.length<4&&!b)this._$name.classList.remove("is-visible"),m=!1,1==a.length?this._$wrapper.classList.add("is-no-bubble","is-one-emoji"):this._$wrapper.classList.add("is-no-bubble","is-only-emoji"),this._$text.innerHTML=a.join("");else if(e.entities){let t=0,s=e.message;e.entities.forEach(e=>{const a=e.offset+t,i=e.length,n=s.substr(a,i);let o="";if("messageEntityMention"!=e._&&"messageEntityHashtag"!=e._&&"messageEntityPhone"!=e._&&"messageEntityMentionName"!=e._&&"inputMessageEntityMentionName"!=e._&&"messageEntityBlockquote"!=e._&&"messageEntityCashtag"!=e._||(o=`<span class="is-highlight">${n}</span>`),"messageEntityUrl"==e._){let e=n;const t=e.substr(0,7);"http://"!=t&&"https:/"!=t&&(e=`https://${e}`),o=`<a href="${e}" target="_blank">${n}</a>`}"messageEntityTextUrl"==e._&&(o=`<a href="${e.url}" target="_blank">${n}</a>`),"messageEntityEmail"==e._&&(o=`<a href="mailto:${n}" target="_blank">${n}</a>`),"messageEntityBold"==e._&&(o=`<b>${n}</b>`),"messageEntityItalic"==e._&&(o=`<i>${n}</i>`),"messageEntityUnderline"==e._&&(o=`<u>${n}</u>`),"messageEntityStrike"==e._&&(o=`<strike>${n}</strike>`),"messageEntityPre"==e._&&(o=`<pre>${n}</pre>`),t+=o.length-n.length,s=s.substr(0,a)+o+s.substr(a+i)}),this._$text.innerHTML=s+(M?"":`<div class="message_info">${h}</div>`)}else this._$text.innerHTML=e.message+(M?"":`<div class="message_info">${h}</div>`);if(e.media&&"messageMediaWebPage"==e.media._&&"webPageEmpty"!=e.media.webpage._){this._$wrapper.classList.add("has-link");const t=e.media.webpage;if(t.photo){const e=Y(t.photo,"m");if(e){const s=new Image;s.src=e.url,s.width=e.size.w,s.height=e.size.h,this._$linkImage.appendChild(s),Q(t.photo,"m").then(e=>{s.src=e.url}),s.onclick=()=>{window.open(t.url,"_blank")}}}this._$linkName.textContent=t.site_name,this._$linkName.setAttribute("href",t.url),this._$linkTitle.textContent=t.title,this._$linkInfo.innerHTML=t.description.trim()+`&nbsp;<div class="message_info">${h}</div>`}}}else this._$text.innerHTML=e.media._.substr(12)+" (not support yet)"+`<div class="message_info">${h}</div>`;let $;if("inputPeerSelf"==n._){$=a?a.date-e.date:0;const t=i?e.date-i.date:0;t&&t>60&&this.classList.add("is-saved-top")}if(m&&(!a||!d&&a.out!=e.out||d&&g||"channel"==n._&&n.broadcast||$&&$>60)){this.classList.add("is-pip"),this._$wrapper.offsetWidth;let t=e.out?this._$wrapper.offsetWidth:0;this._createClipPath(e.id,this._generatePath(this._$wrapper.offsetWidth,this._$wrapper.offsetHeight,i&&"messageService"!=i._&&(!d&&i.out==e.out||d&&!c)&&!n.broadcast),t),this._$wrapper.style.clipPath=`url(#mess${e.id})`}}_generatePath(e,t,s){let a="";return a+=s?"M 13 0C 11 0 7 2 7 6":"M 19 0C 13 0 7 5 7 12",a+=`V${t-17}`,a+=`C 7 ${t-17}\n             7 ${t-12.7411}\n             5 ${t-8.2176}`,a+=`C 4.2 ${t-5.7307}\n             2.2 ${t-3.4945}\n             0.7 ${t-1.9849}`,a+=`C 0 ${t-1.3128} 0.5 ${t} 1.4 ${t}`,a+=`H ${e-12}`,a+=`C ${e-5.3726} ${t}\n             ${e} ${t-5.3726}\n             ${e} ${t-12}`,a+="V 13",a+=`C ${e} 5.4 ${e-5.3726} 0 ${e-12} 0`,a+=s?"H 13Z":"H 21Z",a}_createClipPath(e,t,s){const a=document.createElementNS(Ne,"svg");a.setAttribute("width","0"),a.setAttribute("height","0");const i=document.createElementNS(Ne,"clipPath");i.setAttribute("id",`mess${e}`),a.appendChild(i);const n=document.createElementNS(Ne,"path");n.setAttribute("d",t),s&&n.setAttribute("transform",`scale(-1, 1) translate(-${s}, 0)`),i.appendChild(n),this.appendChild(a)}}customElements.get("tg-message")||customElements.define("tg-message",ze);class We extends HTMLElement{constructor(){super(),this._handlerHeightDelta=0,this._prevHandlerHeight=0,this._topOffset=0,this._verticalOffset=0,this._noScrollOnUpdate=!1,this._updated=!1,this.$content=null,this.startScroll=0,this.scrollValue=null,this.scrollValuePx=null}connectedCallback(){this.className="scroll",this.innerHTML=`<div class="scroll_container" ref="container"><div class="scroll_content" ref="content">${this.innerHTML}</div></div><div class="scroll_handler" ref="handler"><div></div></div>`,t(this),this.hasAttribute("no-scroll-update")&&(this._noScrollOnUpdate=!0);const e=this.getAttribute("offset-side");e&&(this._$handler.style.padding=`0 ${e}px`);const a=parseInt(this.getAttribute("offset-top"));a&&(this._topOffset=a,this._verticalOffset=a);const i=parseInt(this.getAttribute("offset-bottom"));i&&(this._verticalOffset+=i),this.$content=this._$content,s(this,"wheel",e=>{let t=e.deltaY;1==e.deltaMode&&(t*=40),this._scrollContainer(Math.round(t))}),s(this,"mouseenter",()=>{this.update(),this._showHandler()}),s(this,"mousemove",()=>{this.update(),this._showHandler()}),s(this,"mouseleave",this.hideHandler);let o=null;var r;s(this._$handler,"mousedown",e=>{this.startPos=e.y,this.startScroll=this._$container.scrollTop,this._$handler.classList.add("is-active"),o=document.createElement("div"),o.className="page-overlay",document.body.appendChild(o)}),n("mousemove",e=>{if(this.lastMousePos=e.y,this.startPos){const t=e.y-this.startPos,s=Math.round(this.startScroll+this._$container.scrollHeight*t/(this.offsetHeight-this._verticalOffset+this._handlerHeightDelta));this._scrollContainer(s,!0)}}),n("mouseup",()=>{this.startPos=null,this._$handler.classList.remove("is-active"),o&&(o.remove(),o=null)}),r=this.update.bind(this),c||(c=!0,s(window,"resize",d)),l.push(r)}update(e,t,s){e=e||this.offsetHeight;let a=this._calculateHandlerHeight(e,t);a!=this._prevHandlerHeight&&(this._prevHandlerHeight=a,this._$handler.style.height=a+"px",a>=e-this._verticalOffset?(this.hideHandler(),this.classList.remove("is-hoverable")):(this._noScrollOnUpdate||this._scrollContainer(0,!0),this.classList.add("is-hoverable")),this._updated=!0),s&&this._scrollContainer(0,!0)}hideHandler(){this._$handler.style.opacity=null}_scrollContainer(e,t,s){t?this._$container.scrollTop=e:this._$container.scrollTop+=e;const a=this._$container.scrollHeight-this.offsetHeight,i=a>0?Math.ceil(this._$container.scrollTop)/a:null;(i!=this.scrollValue||this._updated)&&(this._updated=!1,this.scrollValue=i,this.scrollValuePx=this._$container.scrollTop,this.dispatchEvent(new CustomEvent("scrollValueUpdate")),this._$handler.style.top=Math.ceil(this._topOffset+this._$container.scrollTop/this._$container.scrollHeight*(this.offsetHeight-this._verticalOffset+this._handlerHeightDelta))+"px",t&&s&&null!==this.startPos&&(this.startScroll=this._$container.scrollTop,this.startPos=this.lastMousePos))}_showHandler(){this._prevHandlerHeight>=this.offsetHeight-this._verticalOffset||this._$handler.style.opacity||(this._$handler.style.opacity="1")}_calculateHandlerHeight(e,t){t=t||this._$container.scrollHeight;const s=Math.round((e-this._verticalOffset)*e/t),a=Math.ceil(.1*(e-this._verticalOffset)),i=Math.max(s,a,25);return this._handlerHeightDelta=s-i,i}}customElements.get("tg-scroll")||customElements.define("tg-scroll",We);class Ke extends HTMLElement{constructor(){super(),this._hasError=!1,this._$loader=null}connectedCallback(){this.className="search-field",this.innerHTML='<div class="icon icon__search"></div><label ref="label">Search</label> <input type="text" ref="input" autocomplete="off">',t(this),s(this,"click",()=>{this.setFocus()}),s(this._$input,"focus",this._focusHandler.bind(this)),s(this._$input,"blur",this._blurHandler.bind(this)),s(this._$input,"input",this._inputHandler.bind(this)),s(this._$input,"keydown",e=>{13==e.which&&this.dispatchEvent(new CustomEvent("itEnter"),{bubbles:!0})})}getValue(){return this._$input.value}setValue(e){this._$input.value=e,this._inputHandler()}setLoading(e){e?(this._$loader=document.createElement("tg-loader"),this._$loader.setAttribute("blue",!0),this.appendChild(this._$loader)):this._$loader&&(this._$loader&&this._$loader.destroy(),this._$loader=null)}setFocus(){this._$input.focus()}_focusHandler(){this.classList.add("is-focus")}_blurHandler(){this.classList.remove("is-focus")}_inputHandler(){this.dispatchEvent(new CustomEvent("itInput"),{bubbles:!0}),this.classList[""!=this._$input.value?"add":"remove"]("is-fill")}}customElements.get("tg-input-search")||customElements.define("tg-input-search",Ke);class qe extends HTMLElement{async connectedCallback(){this.className="dialog search-result"}setData(e,s){let a,i;if(this.messageId=e.id,this.innerHTML='<div class="dialog_side"><div class="dialog_photo" ref="photo"><div class="dialog_photo-text" ref="photoText"></div><img class="dialog_photo-image" ref="photoImage"></div></div><div class="dialog_main"><div class="dialog_header"><div class="dialog_name" ref="name"></div><div class="dialog_fill"></div><div class="dialog_date" ref="date"></div></div><div class="dialog_body"><div class="dialog_text" ref="text"></div></div></div>',t(this),a=e.from_id?F({user_id:e.from_id}):F(e.to_id),a.deleted)this._$photo.style.backgroundColor="rgba(0, 0, 0, 0.21)",this._$photoText.innerHTML='<div class="icon icon__deletedavatar"></div>';else{let e;e=a.title?a.title.split(" ").slice(0,2):a.last_name?[a.first_name,a.last_name]:a.first_name.split(" ").slice(0,2);const t=e.map(e=>e.substr(0,1).toUpperCase()).join("");this._$photoText.textContent=t,this._$photo.style.backgroundColor="#"+v(a.id);const s=a.photo;s&&!s._.includes("Empty")&&L(a).then(e=>{this._$photoImage.src=e,this._$photoImage.style.display="block"})}a.deleted?i="Deleted Account":"chat"==a._||"channel"==a._?i=a.title:(i=a.first_name,a.last_name&&(i+=` ${a.last_name}`)),this._$name.textContent=i,this._$date.textContent=_(e.date),this._$text.textContent=e.message}}customElements.get("tg-search-result")||customElements.define("tg-search-result",qe);const Ge=async e=>{const t=e.length>=10485760;let s=262144;e.length>67108864?s=524288:e.length<102400&&(s=32768);const a=Math.ceil(e.length/s),i=[g(4294967295),g(4294967295)];let n=0,o=0;const l=t?"upload.saveBigFilePart":"upload.saveFilePart";for(;n<a;)await tgProto.sendMethod(l,{file_id:i,file_part:n,file_total_parts:a,bytes:e.slice(o,o+s)}),o+=s,n++;return{_:t?"inputFileBig":"inputFile",id:i,parts:a,name:"profile.jpg",md5_checksum:""}},Je=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Ye=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Qe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Xe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Ze=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],et=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],tt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],st=(e,t,s)=>{const a=document.createElement("div");a.className="send-smiles_emoji-block",a.id=`emojiBlock-${t}`;let i="";s.forEach(e=>{i+=`<div class="send-smiles_emoji">${e}</div>`}),a.innerHTML=i,e.appendChild(a)};class at extends HTMLElement{constructor(){super(),this._scrollValue=1}connectedCallback(){this.className="send";this.innerHTML=`<div class="send_form"><div class="send_button"><div class="is-active send-smiles"><div class="send-smiles_wrapper"><div class="send-smiles_top"><div class="tabs"><div class="is-active tabs_elem">Emoji</div><div class="tabs_elem">Stickers</div></div></div><div class="send-smiles_content"><div class="send-smiles_body"><tg-scroll offset-side="2" offset-top="2" offset-bottom="2" ref="scrollEmoji"></tg-scroll></div><div class="send-smiles_bottom"><div class="send-smiles_bottom-elem" to-id="people"><div class="icon icon__smile"></div></div><div class="send-smiles_bottom-elem" to-id="nature"><div class="icon icon__animals"></div></div><div class="send-smiles_bottom-elem" to-id="food"><div class="icon icon__eats"></div></div><div class="send-smiles_bottom-elem" to-id="travel"><div class="icon icon__car"></div></div><div class="send-smiles_bottom-elem" to-id="activity"><div class="icon icon__sport"></div></div><div class="send-smiles_bottom-elem" to-id="objects"><div class="icon icon__lamp"></div></div><div class="send-smiles_bottom-elem" to-id="symbols"><div class="icon icon__flag"></div></div></div></div></div></div><div class="icon icon__smile"></div></div><label ref="sendLabel">Message</label><tg-scroll offset-side="8" offset-bottom="8" offset-top="8" ref="sendScroll"><textarea ref="sendInput" autocomplete="off" rows="1"></textarea></tg-scroll><div class="send_button send_button__right"><div class="menu-wrapper"><tg-menu items="${encodeURIComponent(JSON.stringify([["photo","photo","Photo"],["document","document","Document"]]))}" is-visible ref="menuSend"></tg-menu></div><div class="icon icon__attach"></div></div></div><tg-button icon="send" ref="sendButton"></tg-button><input type="file" class="send-input-file" ref="inputFilePhoto" accept=".png, .jpg, .jpeg"> <input type="file" class="send-input-file" ref="inputFileDocument">`,t(this);const e=this._$scrollEmoji.$content;st(e,"people",Je),st(e,"nature",Ye),st(e,"food",Qe),st(e,"travel",Xe),st(e,"activity",Ze),st(e,"objects",et),st(e,"symbols",tt),s(this._$scrollEmoji.$content,"click",e=>{if("send-smiles_emoji"!=e.target.className)return;const t=this._$sendInput.value;this._$sendInput.value=this._$sendInput.value+(t.length?" ":"")+e.target.textContent+" ",this._inputHandler()}),Array.from(this.querySelectorAll(".send-smiles_bottom-elem")).forEach(e=>{s(e,"click",()=>{const t="#emojiBlock-"+e.getAttribute("to-id");this._$scrollEmoji._scrollContainer(this._$scrollEmoji.$content.querySelector(t).offsetTop,!0)})}),s(this._$menuSend,"photoMenuClick",()=>{this._$inputFilePhoto.click()}),s(this._$menuSend,"documentMenuClick",()=>{this._$inputFileDocument.click()}),s(this._$inputFilePhoto,"change",()=>{const e=new FileReader;e.onloadend=async()=>{this._$inputFilePhoto.value="";const t=await Ge(new Uint8Array(e.result));this._inputMedia={_:"inputMediaUploadedPhoto",file:t},this.dispatchEvent(new CustomEvent("sendMedia"),{bubbles:!0})},e.readAsArrayBuffer(this._$inputFilePhoto.files[0])}),s(this._$inputFileDocument,"change",()=>{const e=new FileReader;e.onloadend=async()=>{const t=await Ge(new Uint8Array(e.result));this._inputMedia={_:"inputMediaUploadedDocument",file:t,mime_type:this._$inputFileDocument.files[0].type,attributes:[{_:"documentAttributeFilename",file_name:this._$inputFileDocument.files[0].name}]},this._$inputFileDocument.value="",this.dispatchEvent(new CustomEvent("sendMedia"),{bubbles:!0})},e.readAsArrayBuffer(this._$inputFileDocument.files[0])}),s(this._$sendLabel,"click",()=>{this.setFocus()}),s(this._$sendButton,"click",()=>{this.dispatchEvent(new CustomEvent("sendMess"),{bubbles:!0})}),s(this._$sendInput,"input",this._inputHandler.bind(this)),s(this._$sendInput,"keydown",e=>{if(13==e.keyCode){if(e.ctrlKey){const e=this.getValue();return this.setValue(e.substr(0,this._$sendInput.selectionStart)+"\n"+e.substr(this._$sendInput.selectionStart)),!0}return this.dispatchEvent(new CustomEvent("sendMess"),{bubbles:!0}),e.preventDefault(),!1}}),s(this._$sendScroll,"scrollValueUpdate",async()=>{let e=this._$sendScroll.scrollValue;null===e&&(e=1),this._scrollValue=e})}getValue(){return this._$sendInput.value}setValue(e){this._$sendInput.value=e,this._inputHandler()}setFocus(){this._$sendInput.focus()}_inputHandler(){let e=!1;this._scrollValue>=1&&(e=!0),this._$sendInput.style.height="auto";const t=this._$sendInput.scrollHeight;this._$sendInput.style.height=t+"px",this._$sendScroll.style.height=t+"px",this._$sendScroll.update(),e&&(this._scrollValue=1),this._scrollValue>=1&&this._$sendScroll._scrollContainer(999999,!0),this.dispatchEvent(new CustomEvent("itInput"),{bubbles:!0}),this.classList[""!=this._$sendInput.value?"add":"remove"]("is-fill")}}customElements.get("tg-send")||customElements.define("tg-send",at);class it extends HTMLElement{connectedCallback(){const e=["side-header"];this.hasAttribute("is-bordered")&&e.push("is-bordered"),this.className=e.join(" ");let a="";a+=`<tg-button icon="${this.getAttribute("icon-left")}" ref="iconLeft"></tg-button>`;const i=this.getAttribute("menu-items");i&&(a+=`<tg-menu items="${i}" ref="menu"></tg-menu>`);const n=this.getAttribute("text");n&&(a+=`<div class="side-header_text">${n}</div>`),this.hasAttribute("has-search")&&(a+='<tg-input-search ref="inputSearch"></tg-input-search>'),this.innerHTML=a,t(this);const o=this.getAttribute("menu-trigger");o&&s(this[`_$${o}`],"bClick",()=>{this._$menu.show(14,60)}),s(this._$iconLeft,"click",()=>{this.dispatchEvent(new CustomEvent("ilClick",{bubbles:!0}))})}}customElements.get("tg-side-header")||customElements.define("tg-side-header",it);const nt=parseInt(tgMain.getStorage("user_id")),ot=h();return e.init=async()=>{tgProto.setApiScheme("inputPeerEmpty#7f3b18ea = InputPeer;inputPeerSelf#7da07ec9 = InputPeer;inputPeerChat#179be863 chat_id:int = InputPeer;inputPeerUser#7b8e7de6 user_id:int access_hash:long = InputPeer;inputPeerChannel#20adaef8 channel_id:int access_hash:long = InputPeer;inputPeerUserFromMessage#17bae2e6 peer:InputPeer msg_id:int user_id:int = InputPeer;inputPeerChannelFromMessage#9c95f7bb peer:InputPeer msg_id:int channel_id:int = InputPeer;inputUserEmpty#b98886cf = InputUser;inputUserSelf#f7c1b13f = InputUser;inputUser#d8292816 user_id:int access_hash:long = InputUser;inputUserFromMessage#2d117597 peer:InputPeer msg_id:int user_id:int = InputUser;inputFile#f52ff27f id:long parts:int name:string md5_checksum:string = InputFile;inputFileBig#fa4f0bb5 id:long parts:int name:string = InputFile;inputMediaEmpty#9664f57f = InputMedia;inputMediaUploadedPhoto#1e287d04 flags:# file:InputFile stickers:flags.0?Vector<InputDocument> ttl_seconds:flags.1?int = InputMedia;inputMediaPhoto#b3ba0635 flags:# id:InputPhoto ttl_seconds:flags.0?int = InputMedia;inputMediaUploadedDocument#5b38c6c1 flags:# nosound_video:flags.3?true file:InputFile thumb:flags.2?InputFile mime_type:string attributes:Vector<DocumentAttribute> stickers:flags.0?Vector<InputDocument> ttl_seconds:flags.1?int = InputMedia;inputMediaDocument#23ab23d2 flags:# id:InputDocument ttl_seconds:flags.0?int = InputMedia;inputPhotoEmpty#1cd7bf0d = InputPhoto;inputPhoto#3bb3b94a id:long access_hash:long file_reference:bytes = InputPhoto;inputFileLocation#dfdaabe1 volume_id:long local_id:int secret:long file_reference:bytes = InputFileLocation;inputEncryptedFileLocation#f5235d55 id:long access_hash:long = InputFileLocation;inputDocumentFileLocation#bad07584 id:long access_hash:long file_reference:bytes thumb_size:string = InputFileLocation;inputSecureFileLocation#cbc7ee28 id:long access_hash:long = InputFileLocation;inputTakeoutFileLocation#29be5899 = InputFileLocation;inputPhotoFileLocation#40181ffe id:long access_hash:long file_reference:bytes thumb_size:string = InputFileLocation;inputPhotoLegacyFileLocation#d83466f3 id:long access_hash:long file_reference:bytes volume_id:long local_id:int secret:long = InputFileLocation;inputPeerPhotoFileLocation#27d69997 flags:# big:flags.0?true peer:InputPeer volume_id:long local_id:int = InputFileLocation;inputStickerSetThumb#dbaeae9 stickerset:InputStickerSet volume_id:long local_id:int = InputFileLocation;peerUser#9db1bc6d user_id:int = Peer;peerChat#bad0e5bb chat_id:int = Peer;peerChannel#bddde532 channel_id:int = Peer;storage.fileUnknown#aa963b05 = storage.FileType;storage.filePartial#40bc6f52 = storage.FileType;storage.fileJpeg#7efe0e = storage.FileType;storage.fileGif#cae1aadf = storage.FileType;storage.filePng#a4f63c0 = storage.FileType;storage.filePdf#ae1e508d = storage.FileType;storage.fileMp3#528a0677 = storage.FileType;storage.fileMov#4b09ebbc = storage.FileType;storage.fileMp4#b3cea0e4 = storage.FileType;storage.fileWebp#1081464c = storage.FileType;userEmpty#200250ba id:int = User;user#938458c1 flags:# self:flags.10?true contact:flags.11?true mutual_contact:flags.12?true deleted:flags.13?true bot:flags.14?true bot_chat_history:flags.15?true bot_nochats:flags.16?true verified:flags.17?true restricted:flags.18?true min:flags.20?true bot_inline_geo:flags.21?true support:flags.23?true scam:flags.24?true id:int access_hash:flags.0?long first_name:flags.1?string last_name:flags.2?string username:flags.3?string phone:flags.4?string photo:flags.5?UserProfilePhoto status:flags.6?UserStatus bot_info_version:flags.14?int restriction_reason:flags.18?Vector<RestrictionReason> bot_inline_placeholder:flags.19?string lang_code:flags.22?string = User;userProfilePhotoEmpty#4f11bae1 = UserProfilePhoto;userProfilePhoto#ecd75d8c photo_id:long photo_small:FileLocation photo_big:FileLocation dc_id:int = UserProfilePhoto;userStatusEmpty#9d05049 = UserStatus;userStatusOnline#edb93949 expires:int = UserStatus;userStatusOffline#8c703f was_online:int = UserStatus;userStatusRecently#e26f42f1 = UserStatus;userStatusLastWeek#7bf09fc = UserStatus;userStatusLastMonth#77ebc742 = UserStatus;chatEmpty#9ba2d800 id:int = Chat;chat#3bda1bde flags:# creator:flags.0?true kicked:flags.1?true left:flags.2?true deactivated:flags.5?true id:int title:string photo:ChatPhoto participants_count:int date:int version:int migrated_to:flags.6?InputChannel admin_rights:flags.14?ChatAdminRights default_banned_rights:flags.18?ChatBannedRights = Chat;chatForbidden#7328bdb id:int title:string = Chat;channel#d31a961e flags:# creator:flags.0?true left:flags.2?true broadcast:flags.5?true verified:flags.7?true megagroup:flags.8?true restricted:flags.9?true signatures:flags.11?true min:flags.12?true scam:flags.19?true has_link:flags.20?true has_geo:flags.21?true slowmode_enabled:flags.22?true id:int access_hash:flags.13?long title:string username:flags.6?string photo:ChatPhoto date:int version:int restriction_reason:flags.9?Vector<RestrictionReason> admin_rights:flags.14?ChatAdminRights banned_rights:flags.15?ChatBannedRights default_banned_rights:flags.18?ChatBannedRights participants_count:flags.17?int = Chat;channelForbidden#289da732 flags:# broadcast:flags.5?true megagroup:flags.8?true id:int access_hash:long title:string until_date:flags.16?int = Chat;chatFull#1b7c9db3 flags:# can_set_username:flags.7?true has_scheduled:flags.8?true id:int about:string participants:ChatParticipants chat_photo:flags.2?Photo notify_settings:PeerNotifySettings exported_invite:ExportedChatInvite bot_info:flags.3?Vector<BotInfo> pinned_msg_id:flags.6?int folder_id:flags.11?int = ChatFull;channelFull#2d895c74 flags:# can_view_participants:flags.3?true can_set_username:flags.6?true can_set_stickers:flags.7?true hidden_prehistory:flags.10?true can_view_stats:flags.12?true can_set_location:flags.16?true has_scheduled:flags.19?true id:int about:string participants_count:flags.0?int admins_count:flags.1?int kicked_count:flags.2?int banned_count:flags.2?int online_count:flags.13?int read_inbox_max_id:int read_outbox_max_id:int unread_count:int chat_photo:Photo notify_settings:PeerNotifySettings exported_invite:ExportedChatInvite bot_info:Vector<BotInfo> migrated_from_chat_id:flags.4?int migrated_from_max_id:flags.4?int pinned_msg_id:flags.5?int stickerset:flags.8?StickerSet available_min_id:flags.9?int folder_id:flags.11?int linked_chat_id:flags.14?int location:flags.15?ChannelLocation slowmode_seconds:flags.17?int slowmode_next_send_date:flags.18?int pts:int = ChatFull;chatParticipant#c8d7493e user_id:int inviter_id:int date:int = ChatParticipant;chatParticipantCreator#da13538a user_id:int = ChatParticipant;chatParticipantAdmin#e2d6e436 user_id:int inviter_id:int date:int = ChatParticipant;chatParticipantsForbidden#fc900c2b flags:# chat_id:int self_participant:flags.0?ChatParticipant = ChatParticipants;chatParticipants#3f460fed chat_id:int participants:Vector<ChatParticipant> version:int = ChatParticipants;chatPhotoEmpty#37c1011c = ChatPhoto;chatPhoto#475cdbd5 photo_small:FileLocation photo_big:FileLocation dc_id:int = ChatPhoto;messageEmpty#83e5de54 id:int = Message;message#452c0e65 flags:# out:flags.1?true mentioned:flags.4?true media_unread:flags.5?true silent:flags.13?true post:flags.14?true from_scheduled:flags.18?true legacy:flags.19?true edit_hide:flags.21?true id:int from_id:flags.8?int to_id:Peer fwd_from:flags.2?MessageFwdHeader via_bot_id:flags.11?int reply_to_msg_id:flags.3?int date:int message:string media:flags.9?MessageMedia reply_markup:flags.6?ReplyMarkup entities:flags.7?Vector<MessageEntity> views:flags.10?int edit_date:flags.15?int post_author:flags.16?string grouped_id:flags.17?long restriction_reason:flags.22?Vector<RestrictionReason> = Message;messageService#9e19a1f6 flags:# out:flags.1?true mentioned:flags.4?true media_unread:flags.5?true silent:flags.13?true post:flags.14?true legacy:flags.19?true id:int from_id:flags.8?int to_id:Peer reply_to_msg_id:flags.3?int date:int action:MessageAction = Message;messageMediaEmpty#3ded6320 = MessageMedia;messageMediaPhoto#695150d7 flags:# photo:flags.0?Photo ttl_seconds:flags.2?int = MessageMedia;messageMediaGeo#56e0d474 geo:GeoPoint = MessageMedia;messageMediaContact#cbf24940 phone_number:string first_name:string last_name:string vcard:string user_id:int = MessageMedia;messageMediaUnsupported#9f84f49e = MessageMedia;messageMediaDocument#9cb070d7 flags:# document:flags.0?Document ttl_seconds:flags.2?int = MessageMedia;messageMediaWebPage#a32dd600 webpage:WebPage = MessageMedia;messageMediaVenue#2ec0533f geo:GeoPoint title:string address:string provider:string venue_id:string venue_type:string = MessageMedia;messageMediaGame#fdb19008 game:Game = MessageMedia;messageMediaInvoice#84551347 flags:# shipping_address_requested:flags.1?true test:flags.3?true title:string description:string photo:flags.0?WebDocument receipt_msg_id:flags.2?int currency:string total_amount:long start_param:string = MessageMedia;messageMediaGeoLive#7c3c2609 geo:GeoPoint period:int = MessageMedia;messageMediaPoll#4bd6e798 poll:Poll results:PollResults = MessageMedia;messageActionEmpty#b6aef7b0 = MessageAction;messageActionChatCreate#a6638b9a title:string users:Vector<int> = MessageAction;messageActionChatEditTitle#b5a1ce5a title:string = MessageAction;messageActionChatEditPhoto#7fcb13a8 photo:Photo = MessageAction;messageActionChatDeletePhoto#95e3fbef = MessageAction;messageActionChatAddUser#488a7337 users:Vector<int> = MessageAction;messageActionChatDeleteUser#b2ae9b0c user_id:int = MessageAction;messageActionChatJoinedByLink#f89cf5e8 inviter_id:int = MessageAction;messageActionChannelCreate#95d2ac92 title:string = MessageAction;messageActionChatMigrateTo#51bdb021 channel_id:int = MessageAction;messageActionChannelMigrateFrom#b055eaee title:string chat_id:int = MessageAction;messageActionPinMessage#94bd38ed = MessageAction;messageActionHistoryClear#9fbab604 = MessageAction;messageActionGameScore#92a72876 game_id:long score:int = MessageAction;messageActionPaymentSentMe#8f31b327 flags:# currency:string total_amount:long payload:bytes info:flags.0?PaymentRequestedInfo shipping_option_id:flags.1?string charge:PaymentCharge = MessageAction;messageActionPaymentSent#40699cd0 currency:string total_amount:long = MessageAction;messageActionPhoneCall#80e11a7f flags:# video:flags.2?true call_id:long reason:flags.0?PhoneCallDiscardReason duration:flags.1?int = MessageAction;messageActionScreenshotTaken#4792929b = MessageAction;messageActionCustomAction#fae69f56 message:string = MessageAction;messageActionBotAllowed#abe9affe domain:string = MessageAction;messageActionSecureValuesSentMe#1b287353 values:Vector<SecureValue> credentials:SecureCredentialsEncrypted = MessageAction;messageActionSecureValuesSent#d95c6154 types:Vector<SecureValueType> = MessageAction;messageActionContactSignUp#f3f25f76 = MessageAction;dialog#2c171f72 flags:# pinned:flags.2?true unread_mark:flags.3?true peer:Peer top_message:int read_inbox_max_id:int read_outbox_max_id:int unread_count:int unread_mentions_count:int notify_settings:PeerNotifySettings pts:flags.0?int draft:flags.1?DraftMessage folder_id:flags.4?int = Dialog;dialogFolder#71bd134c flags:# pinned:flags.2?true folder:Folder peer:Peer top_message:int unread_muted_peers_count:int unread_unmuted_peers_count:int unread_muted_messages_count:int unread_unmuted_messages_count:int = Dialog;photoEmpty#2331b22d id:long = Photo;photo#d07504a5 flags:# has_stickers:flags.0?true id:long access_hash:long file_reference:bytes date:int sizes:Vector<PhotoSize> dc_id:int = Photo;photoSizeEmpty#e17e23c type:string = PhotoSize;photoSize#77bfb61b type:string location:FileLocation w:int h:int size:int = PhotoSize;photoCachedSize#e9a734fa type:string location:FileLocation w:int h:int bytes:bytes = PhotoSize;photoStrippedSize#e0b0bc2e type:string bytes:bytes = PhotoSize;geoPointEmpty#1117dd5f = GeoPoint;geoPoint#296f104 long:double lat:double access_hash:long = GeoPoint;auth.authorization#cd050916 flags:# tmp_sessions:flags.0?int user:User = auth.Authorization;auth.exportedAuthorization#df969c2d id:int bytes:bytes = auth.ExportedAuthorization;peerNotifySettings#af509d20 flags:# show_previews:flags.0?Bool silent:flags.1?Bool mute_until:flags.2?int sound:flags.3?string = PeerNotifySettings;peerSettings#818426cd flags:# report_spam:flags.0?true add_contact:flags.1?true block_contact:flags.2?true share_contact:flags.3?true need_contacts_exception:flags.4?true report_geo:flags.5?true = PeerSettings;wallPaper#a437c3ed id:long flags:# creator:flags.0?true default:flags.1?true pattern:flags.3?true dark:flags.4?true access_hash:long slug:string document:Document settings:flags.2?WallPaperSettings = WallPaper;wallPaperNoFile#8af40b25 flags:# default:flags.1?true dark:flags.4?true settings:flags.2?WallPaperSettings = WallPaper;userFull#edf17c12 flags:# blocked:flags.0?true phone_calls_available:flags.4?true phone_calls_private:flags.5?true can_pin_message:flags.7?true has_scheduled:flags.12?true user:User about:flags.1?string settings:PeerSettings profile_photo:flags.2?Photo notify_settings:PeerNotifySettings bot_info:flags.3?BotInfo pinned_msg_id:flags.6?int common_chats_count:int folder_id:flags.11?int = UserFull;messages.dialogs#15ba6c40 dialogs:Vector<Dialog> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.Dialogs;messages.dialogsSlice#71e094f3 count:int dialogs:Vector<Dialog> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.Dialogs;messages.dialogsNotModified#f0e3e596 count:int = messages.Dialogs;messages.messages#8c718e87 messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.Messages;messages.messagesSlice#c8edce1e flags:# inexact:flags.1?true count:int next_rate:flags.0?int messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.Messages;messages.channelMessages#99262e37 flags:# inexact:flags.1?true pts:int count:int messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.Messages;messages.messagesNotModified#74535f21 count:int = messages.Messages;messages.chatFull#e5d7d19c full_chat:ChatFull chats:Vector<Chat> users:Vector<User> = messages.ChatFull;inputMessagesFilterEmpty#57e2f66c = MessagesFilter;inputMessagesFilterPhotos#9609a51c = MessagesFilter;inputMessagesFilterVideo#9fc00e65 = MessagesFilter;inputMessagesFilterPhotoVideo#56e9f0e4 = MessagesFilter;inputMessagesFilterDocument#9eddf188 = MessagesFilter;inputMessagesFilterUrl#7ef0dd87 = MessagesFilter;inputMessagesFilterGif#ffc86587 = MessagesFilter;inputMessagesFilterVoice#50f5c392 = MessagesFilter;inputMessagesFilterMusic#3751b49e = MessagesFilter;inputMessagesFilterChatPhotos#3a20ecb8 = MessagesFilter;inputMessagesFilterPhoneCalls#80c99768 flags:# missed:flags.0?true = MessagesFilter;inputMessagesFilterRoundVoice#7a7c17a4 = MessagesFilter;inputMessagesFilterRoundVideo#b549da53 = MessagesFilter;inputMessagesFilterMyMentions#c1f8e69a = MessagesFilter;inputMessagesFilterGeo#e7026d0d = MessagesFilter;inputMessagesFilterContacts#e062db83 = MessagesFilter;updateNewMessage#1f2b0afd message:Message pts:int pts_count:int = Update;updateMessageID#4e90bfd6 id:int random_id:long = Update;updateDeleteMessages#a20db0e5 messages:Vector<int> pts:int pts_count:int = Update;updateUserTyping#5c486927 user_id:int action:SendMessageAction = Update;updateChatUserTyping#9a65ea1f chat_id:int user_id:int action:SendMessageAction = Update;updateChatParticipants#7761198 participants:ChatParticipants = Update;updateUserStatus#1bfbd823 user_id:int status:UserStatus = Update;updateUserName#a7332b73 user_id:int first_name:string last_name:string username:string = Update;updateUserPhoto#95313b0c user_id:int date:int photo:UserProfilePhoto previous:Bool = Update;updateNewEncryptedMessage#12bcbd9a message:EncryptedMessage qts:int = Update;updateEncryptedChatTyping#1710f156 chat_id:int = Update;updateEncryption#b4a2e88d chat:EncryptedChat date:int = Update;updateEncryptedMessagesRead#38fe25b7 chat_id:int max_date:int date:int = Update;updateChatParticipantAdd#ea4b0e5c chat_id:int user_id:int inviter_id:int date:int version:int = Update;updateChatParticipantDelete#6e5f8c22 chat_id:int user_id:int version:int = Update;updateDcOptions#8e5e9873 dc_options:Vector<DcOption> = Update;updateUserBlocked#80ece81a user_id:int blocked:Bool = Update;updateNotifySettings#bec268ef peer:NotifyPeer notify_settings:PeerNotifySettings = Update;updateServiceNotification#ebe46819 flags:# popup:flags.0?true inbox_date:flags.1?int type:string message:string media:MessageMedia entities:Vector<MessageEntity> = Update;updatePrivacy#ee3b272a key:PrivacyKey rules:Vector<PrivacyRule> = Update;updateUserPhone#12b9417b user_id:int phone:string = Update;updateReadHistoryInbox#9c974fdf flags:# folder_id:flags.0?int peer:Peer max_id:int still_unread_count:int pts:int pts_count:int = Update;updateReadHistoryOutbox#2f2f21bf peer:Peer max_id:int pts:int pts_count:int = Update;updateWebPage#7f891213 webpage:WebPage pts:int pts_count:int = Update;updateReadMessagesContents#68c13933 messages:Vector<int> pts:int pts_count:int = Update;updateChannelTooLong#eb0467fb flags:# channel_id:int pts:flags.0?int = Update;updateChannel#b6d45656 channel_id:int = Update;updateNewChannelMessage#62ba04d9 message:Message pts:int pts_count:int = Update;updateReadChannelInbox#330b5424 flags:# folder_id:flags.0?int channel_id:int max_id:int still_unread_count:int pts:int = Update;updateDeleteChannelMessages#c37521c9 channel_id:int messages:Vector<int> pts:int pts_count:int = Update;updateChannelMessageViews#98a12b4b channel_id:int id:int views:int = Update;updateChatParticipantAdmin#b6901959 chat_id:int user_id:int is_admin:Bool version:int = Update;updateNewStickerSet#688a30aa stickerset:messages.StickerSet = Update;updateStickerSetsOrder#bb2d201 flags:# masks:flags.0?true order:Vector<long> = Update;updateStickerSets#43ae3dec = Update;updateSavedGifs#9375341e = Update;updateBotInlineQuery#54826690 flags:# query_id:long user_id:int query:string geo:flags.0?GeoPoint offset:string = Update;updateBotInlineSend#e48f964 flags:# user_id:int query:string geo:flags.0?GeoPoint id:string msg_id:flags.1?InputBotInlineMessageID = Update;updateEditChannelMessage#1b3f4df7 message:Message pts:int pts_count:int = Update;updateChannelPinnedMessage#98592475 channel_id:int id:int = Update;updateBotCallbackQuery#e73547e1 flags:# query_id:long user_id:int peer:Peer msg_id:int chat_instance:long data:flags.0?bytes game_short_name:flags.1?string = Update;updateEditMessage#e40370a3 message:Message pts:int pts_count:int = Update;updateInlineBotCallbackQuery#f9d27a5a flags:# query_id:long user_id:int msg_id:InputBotInlineMessageID chat_instance:long data:flags.0?bytes game_short_name:flags.1?string = Update;updateReadChannelOutbox#25d6c9c7 channel_id:int max_id:int = Update;updateDraftMessage#ee2bb969 peer:Peer draft:DraftMessage = Update;updateReadFeaturedStickers#571d2742 = Update;updateRecentStickers#9a422c20 = Update;updateConfig#a229dd06 = Update;updatePtsChanged#3354678f = Update;updateChannelWebPage#40771900 channel_id:int webpage:WebPage pts:int pts_count:int = Update;updateDialogPinned#6e6fe51c flags:# pinned:flags.0?true folder_id:flags.1?int peer:DialogPeer = Update;updatePinnedDialogs#fa0f3ca2 flags:# folder_id:flags.1?int order:flags.0?Vector<DialogPeer> = Update;updateBotWebhookJSON#8317c0c3 data:DataJSON = Update;updateBotWebhookJSONQuery#9b9240a6 query_id:long data:DataJSON timeout:int = Update;updateBotShippingQuery#e0cdc940 query_id:long user_id:int payload:bytes shipping_address:PostAddress = Update;updateBotPrecheckoutQuery#5d2f3aa9 flags:# query_id:long user_id:int payload:bytes info:flags.0?PaymentRequestedInfo shipping_option_id:flags.1?string currency:string total_amount:long = Update;updatePhoneCall#ab0f6b1e phone_call:PhoneCall = Update;updateLangPackTooLong#46560264 lang_code:string = Update;updateLangPack#56022f4d difference:LangPackDifference = Update;updateFavedStickers#e511996d = Update;updateChannelReadMessagesContents#89893b45 channel_id:int messages:Vector<int> = Update;updateContactsReset#7084a7be = Update;updateChannelAvailableMessages#70db6837 channel_id:int available_min_id:int = Update;updateDialogUnreadMark#e16459c3 flags:# unread:flags.0?true peer:DialogPeer = Update;updateUserPinnedMessage#4c43da18 user_id:int id:int = Update;updateChatPinnedMessage#e10db349 chat_id:int id:int version:int = Update;updateMessagePoll#aca1657b flags:# poll_id:long poll:flags.0?Poll results:PollResults = Update;updateChatDefaultBannedRights#54c01850 peer:Peer default_banned_rights:ChatBannedRights version:int = Update;updateFolderPeers#19360dc0 folder_peers:Vector<FolderPeer> pts:int pts_count:int = Update;updatePeerSettings#6a7e7366 peer:Peer settings:PeerSettings = Update;updatePeerLocated#b4afcfb0 peers:Vector<PeerLocated> = Update;updateNewScheduledMessage#39a51dfb message:Message = Update;updateDeleteScheduledMessages#90866cee peer:Peer messages:Vector<int> = Update;updateTheme#8216fba3 theme:Theme = Update;updateGeoLiveViewed#871fb939 peer:Peer msg_id:int = Update;updateLoginToken#564fe691 = Update;updates.state#a56c2a3e pts:int qts:int date:int seq:int unread_count:int = updates.State;updates.differenceEmpty#5d75a138 date:int seq:int = updates.Difference;updates.difference#f49ca0 new_messages:Vector<Message> new_encrypted_messages:Vector<EncryptedMessage> other_updates:Vector<Update> chats:Vector<Chat> users:Vector<User> state:updates.State = updates.Difference;updates.differenceSlice#a8fb1981 new_messages:Vector<Message> new_encrypted_messages:Vector<EncryptedMessage> other_updates:Vector<Update> chats:Vector<Chat> users:Vector<User> intermediate_state:updates.State = updates.Difference;updates.differenceTooLong#4afe8f6d pts:int = updates.Difference;updatesTooLong#e317af7e = Updates;updateShortMessage#914fbf11 flags:# out:flags.1?true mentioned:flags.4?true media_unread:flags.5?true silent:flags.13?true id:int user_id:int message:string pts:int pts_count:int date:int fwd_from:flags.2?MessageFwdHeader via_bot_id:flags.11?int reply_to_msg_id:flags.3?int entities:flags.7?Vector<MessageEntity> = Updates;updateShortChatMessage#16812688 flags:# out:flags.1?true mentioned:flags.4?true media_unread:flags.5?true silent:flags.13?true id:int from_id:int chat_id:int message:string pts:int pts_count:int date:int fwd_from:flags.2?MessageFwdHeader via_bot_id:flags.11?int reply_to_msg_id:flags.3?int entities:flags.7?Vector<MessageEntity> = Updates;updateShort#78d4dec1 update:Update date:int = Updates;updatesCombined#725b04c3 updates:Vector<Update> users:Vector<User> chats:Vector<Chat> date:int seq_start:int seq:int = Updates;updates#74ae4240 updates:Vector<Update> users:Vector<User> chats:Vector<Chat> date:int seq:int = Updates;updateShortSentMessage#11f1331c flags:# out:flags.1?true id:int pts:int pts_count:int date:int media:flags.9?MessageMedia entities:flags.7?Vector<MessageEntity> = Updates;upload.file#96a18d5 type:storage.FileType mtime:int bytes:bytes = upload.File;upload.fileCdnRedirect#f18cda44 dc_id:int file_token:bytes encryption_key:bytes encryption_iv:bytes file_hashes:Vector<FileHash> = upload.File;dcOption#18b7a10d flags:# ipv6:flags.0?true media_only:flags.1?true tcpo_only:flags.2?true cdn:flags.3?true static:flags.4?true id:int ip_address:string port:int secret:flags.10?bytes = DcOption;nearestDc#8e1a1775 country:string this_dc:int nearest_dc:int = NearestDc;encryptedChatEmpty#ab7ec0a0 id:int = EncryptedChat;encryptedChatWaiting#3bf703dc id:int access_hash:long date:int admin_id:int participant_id:int = EncryptedChat;encryptedChatRequested#c878527e id:int access_hash:long date:int admin_id:int participant_id:int g_a:bytes = EncryptedChat;encryptedChat#fa56ce36 id:int access_hash:long date:int admin_id:int participant_id:int g_a_or_b:bytes key_fingerprint:long = EncryptedChat;encryptedChatDiscarded#13d6dd27 id:int = EncryptedChat;encryptedFileEmpty#c21f497e = EncryptedFile;encryptedFile#4a70994c id:long access_hash:long size:int dc_id:int key_fingerprint:int = EncryptedFile;encryptedMessage#ed18c118 random_id:long chat_id:int date:int bytes:bytes file:EncryptedFile = EncryptedMessage;encryptedMessageService#23734b06 random_id:long chat_id:int date:int bytes:bytes = EncryptedMessage;inputDocumentEmpty#72f0eaae = InputDocument;inputDocument#1abfb575 id:long access_hash:long file_reference:bytes = InputDocument;documentEmpty#36f8c871 id:long = Document;document#9ba29cc1 flags:# id:long access_hash:long file_reference:bytes date:int mime_type:string size:int thumbs:flags.0?Vector<PhotoSize> dc_id:int attributes:Vector<DocumentAttribute> = Document;notifyPeer#9fd40bd8 peer:Peer = NotifyPeer;notifyUsers#b4c83b4c = NotifyPeer;notifyChats#c007cec3 = NotifyPeer;notifyBroadcasts#d612e8ef = NotifyPeer;sendMessageTypingAction#16bf744e = SendMessageAction;sendMessageCancelAction#fd5ec8f5 = SendMessageAction;sendMessageRecordVideoAction#a187d66f = SendMessageAction;sendMessageUploadVideoAction#e9763aec progress:int = SendMessageAction;sendMessageRecordAudioAction#d52f73f7 = SendMessageAction;sendMessageUploadAudioAction#f351d7ab progress:int = SendMessageAction;sendMessageUploadPhotoAction#d1d34a26 progress:int = SendMessageAction;sendMessageUploadDocumentAction#aa0cd9e4 progress:int = SendMessageAction;sendMessageGeoLocationAction#176f8ba1 = SendMessageAction;sendMessageChooseContactAction#628cbc6f = SendMessageAction;sendMessageGamePlayAction#dd6a8f48 = SendMessageAction;sendMessageRecordRoundAction#88f27fbc = SendMessageAction;sendMessageUploadRoundAction#243e1c66 progress:int = SendMessageAction;privacyKeyStatusTimestamp#bc2eab30 = PrivacyKey;privacyKeyChatInvite#500e6dfa = PrivacyKey;privacyKeyPhoneCall#3d662b7b = PrivacyKey;privacyKeyPhoneP2P#39491cc8 = PrivacyKey;privacyKeyForwards#69ec56a3 = PrivacyKey;privacyKeyProfilePhoto#96151fed = PrivacyKey;privacyKeyPhoneNumber#d19ae46d = PrivacyKey;privacyKeyAddedByPhone#42ffd42b = PrivacyKey;privacyValueAllowContacts#fffe1bac = PrivacyRule;privacyValueAllowAll#65427b82 = PrivacyRule;privacyValueAllowUsers#4d5bbe0c users:Vector<int> = PrivacyRule;privacyValueDisallowContacts#f888fa1a = PrivacyRule;privacyValueDisallowAll#8b73e763 = PrivacyRule;privacyValueDisallowUsers#c7f49b7 users:Vector<int> = PrivacyRule;privacyValueAllowChatParticipants#18be796b chats:Vector<int> = PrivacyRule;privacyValueDisallowChatParticipants#acae0690 chats:Vector<int> = PrivacyRule;documentAttributeImageSize#6c37c15c w:int h:int = DocumentAttribute;documentAttributeAnimated#11b58939 = DocumentAttribute;documentAttributeSticker#6319d612 flags:# mask:flags.1?true alt:string stickerset:InputStickerSet mask_coords:flags.0?MaskCoords = DocumentAttribute;documentAttributeVideo#ef02ce6 flags:# round_message:flags.0?true supports_streaming:flags.1?true duration:int w:int h:int = DocumentAttribute;documentAttributeAudio#9852f9c6 flags:# voice:flags.10?true duration:int title:flags.0?string performer:flags.1?string waveform:flags.2?bytes = DocumentAttribute;documentAttributeFilename#15590068 file_name:string = DocumentAttribute;documentAttributeHasStickers#9801d2f7 = DocumentAttribute;stickerPack#12b299d4 emoticon:string documents:Vector<long> = StickerPack;messages.affectedMessages#84d19185 pts:int pts_count:int = messages.AffectedMessages;webPageEmpty#eb1477e8 id:long = WebPage;webPagePending#c586da1c id:long date:int = WebPage;webPage#e89c45b2 flags:# id:long url:string display_url:string hash:int type:flags.0?string site_name:flags.1?string title:flags.2?string description:flags.3?string photo:flags.4?Photo embed_url:flags.5?string embed_type:flags.5?string embed_width:flags.6?int embed_height:flags.6?int duration:flags.7?int author:flags.8?string document:flags.9?Document cached_page:flags.10?Page attributes:flags.12?Vector<WebPageAttribute> = WebPage;webPageNotModified#85849473 = WebPage;chatInviteEmpty#69df3769 = ExportedChatInvite;chatInviteExported#fc2e05bc link:string = ExportedChatInvite;inputStickerSetEmpty#ffb62b95 = InputStickerSet;inputStickerSetID#9de7a269 id:long access_hash:long = InputStickerSet;inputStickerSetShortName#861cc8a0 short_name:string = InputStickerSet;inputStickerSetAnimatedEmoji#28703c8 = InputStickerSet;stickerSet#eeb46f27 flags:# archived:flags.1?true official:flags.2?true masks:flags.3?true animated:flags.5?true installed_date:flags.0?int id:long access_hash:long title:string short_name:string thumb:flags.4?PhotoSize thumb_dc_id:flags.4?int count:int hash:int = StickerSet;messages.stickerSet#b60a24a6 set:StickerSet packs:Vector<StickerPack> documents:Vector<Document> = messages.StickerSet;botCommand#c27ac8c7 command:string description:string = BotCommand;botInfo#98e81d3a user_id:int description:string commands:Vector<BotCommand> = BotInfo;keyboardButton#a2fa4880 text:string = KeyboardButton;keyboardButtonUrl#258aff05 text:string url:string = KeyboardButton;keyboardButtonCallback#683a5e46 text:string data:bytes = KeyboardButton;keyboardButtonRequestPhone#b16a6c29 text:string = KeyboardButton;keyboardButtonRequestGeoLocation#fc796b3f text:string = KeyboardButton;keyboardButtonSwitchInline#568a748 flags:# same_peer:flags.0?true text:string query:string = KeyboardButton;keyboardButtonGame#50f41ccf text:string = KeyboardButton;keyboardButtonBuy#afd93fbb text:string = KeyboardButton;keyboardButtonUrlAuth#10b78d29 flags:# text:string fwd_text:flags.0?string url:string button_id:int = KeyboardButton;inputKeyboardButtonUrlAuth#d02e7fd4 flags:# request_write_access:flags.0?true text:string fwd_text:flags.1?string url:string bot:InputUser = KeyboardButton;keyboardButtonRow#77608b83 buttons:Vector<KeyboardButton> = KeyboardButtonRow;replyKeyboardHide#a03e5b85 flags:# selective:flags.2?true = ReplyMarkup;replyKeyboardForceReply#f4108aa0 flags:# single_use:flags.1?true selective:flags.2?true = ReplyMarkup;replyKeyboardMarkup#3502758c flags:# resize:flags.0?true single_use:flags.1?true selective:flags.2?true rows:Vector<KeyboardButtonRow> = ReplyMarkup;replyInlineMarkup#48a30254 rows:Vector<KeyboardButtonRow> = ReplyMarkup;messageEntityUnknown#bb92ba95 offset:int length:int = MessageEntity;messageEntityMention#fa04579d offset:int length:int = MessageEntity;messageEntityHashtag#6f635b0d offset:int length:int = MessageEntity;messageEntityBotCommand#6cef8ac7 offset:int length:int = MessageEntity;messageEntityUrl#6ed02538 offset:int length:int = MessageEntity;messageEntityEmail#64e475c2 offset:int length:int = MessageEntity;messageEntityBold#bd610bc9 offset:int length:int = MessageEntity;messageEntityItalic#826f8b60 offset:int length:int = MessageEntity;messageEntityCode#28a20571 offset:int length:int = MessageEntity;messageEntityPre#73924be0 offset:int length:int language:string = MessageEntity;messageEntityTextUrl#76a6d327 offset:int length:int url:string = MessageEntity;messageEntityMentionName#352dca58 offset:int length:int user_id:int = MessageEntity;inputMessageEntityMentionName#208e68c9 offset:int length:int user_id:InputUser = MessageEntity;messageEntityPhone#9b69e34b offset:int length:int = MessageEntity;messageEntityCashtag#4c4e743f offset:int length:int = MessageEntity;messageEntityUnderline#9c4e7e8b offset:int length:int = MessageEntity;messageEntityStrike#bf0693d4 offset:int length:int = MessageEntity;messageEntityBlockquote#20df5d0 offset:int length:int = MessageEntity;inputChannelEmpty#ee8c1e86 = InputChannel;inputChannel#afeb712e channel_id:int access_hash:long = InputChannel;inputChannelFromMessage#2a286531 peer:InputPeer msg_id:int channel_id:int = InputChannel;contacts.resolvedPeer#7f077ad9 peer:Peer chats:Vector<Chat> users:Vector<User> = contacts.ResolvedPeer;messageRange#ae30253 min_id:int max_id:int = MessageRange;updates.channelDifferenceEmpty#3e11affb flags:# final:flags.0?true pts:int timeout:flags.1?int = updates.ChannelDifference;updates.channelDifferenceTooLong#a4bcc6fe flags:# final:flags.0?true timeout:flags.1?int dialog:Dialog messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = updates.ChannelDifference;updates.channelDifference#2064674e flags:# final:flags.0?true pts:int timeout:flags.1?int new_messages:Vector<Message> other_updates:Vector<Update> chats:Vector<Chat> users:Vector<User> = updates.ChannelDifference;channelMessagesFilterEmpty#94d42ee7 = ChannelMessagesFilter;channelMessagesFilter#cd77d957 flags:# exclude_new_messages:flags.1?true ranges:Vector<MessageRange> = ChannelMessagesFilter;messageFwdHeader#ec338270 flags:# from_id:flags.0?int from_name:flags.5?string date:int channel_id:flags.1?int channel_post:flags.2?int post_author:flags.3?string saved_from_peer:flags.4?Peer saved_from_msg_id:flags.4?int = MessageFwdHeader;inputBotInlineMessageID#890c3d89 dc_id:int id:long access_hash:long = InputBotInlineMessageID;messages.peerDialogs#3371c354 dialogs:Vector<Dialog> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> state:updates.State = messages.PeerDialogs;draftMessageEmpty#1b0c841a flags:# date:flags.0?int = DraftMessage;draftMessage#fd8e711f flags:# no_webpage:flags.1?true reply_to_msg_id:flags.0?int message:string entities:flags.3?Vector<MessageEntity> date:int = DraftMessage;maskCoords#aed6dbb2 n:int x:double y:double zoom:double = MaskCoords;game#bdf9653b flags:# id:long access_hash:long short_name:string title:string description:string photo:Photo document:flags.0?Document = Game;textEmpty#dc3d824f = RichText;textPlain#744694e0 text:string = RichText;textBold#6724abc4 text:RichText = RichText;textItalic#d912a59c text:RichText = RichText;textUnderline#c12622c4 text:RichText = RichText;textStrike#9bf8bb95 text:RichText = RichText;textFixed#6c3f19b9 text:RichText = RichText;textUrl#3c2884c1 text:RichText url:string webpage_id:long = RichText;textEmail#de5a0dd6 text:RichText email:string = RichText;textConcat#7e6260d7 texts:Vector<RichText> = RichText;textSubscript#ed6a8504 text:RichText = RichText;textSuperscript#c7fb5e01 text:RichText = RichText;textMarked#34b8621 text:RichText = RichText;textPhone#1ccb966a text:RichText phone:string = RichText;textImage#81ccf4f document_id:long w:int h:int = RichText;textAnchor#35553762 text:RichText name:string = RichText;pageBlockUnsupported#13567e8a = PageBlock;pageBlockTitle#70abc3fd text:RichText = PageBlock;pageBlockSubtitle#8ffa9a1f text:RichText = PageBlock;pageBlockAuthorDate#baafe5e0 author:RichText published_date:int = PageBlock;pageBlockHeader#bfd064ec text:RichText = PageBlock;pageBlockSubheader#f12bb6e1 text:RichText = PageBlock;pageBlockParagraph#467a0766 text:RichText = PageBlock;pageBlockPreformatted#c070d93e text:RichText language:string = PageBlock;pageBlockFooter#48870999 text:RichText = PageBlock;pageBlockDivider#db20b188 = PageBlock;pageBlockAnchor#ce0d37b0 name:string = PageBlock;pageBlockList#e4e88011 items:Vector<PageListItem> = PageBlock;pageBlockBlockquote#263d7c26 text:RichText caption:RichText = PageBlock;pageBlockPullquote#4f4456d3 text:RichText caption:RichText = PageBlock;pageBlockPhoto#1759c560 flags:# photo_id:long caption:PageCaption url:flags.0?string webpage_id:flags.0?long = PageBlock;pageBlockVideo#7c8fe7b6 flags:# autoplay:flags.0?true loop:flags.1?true video_id:long caption:PageCaption = PageBlock;pageBlockCover#39f23300 cover:PageBlock = PageBlock;pageBlockEmbed#a8718dc5 flags:# full_width:flags.0?true allow_scrolling:flags.3?true url:flags.1?string html:flags.2?string poster_photo_id:flags.4?long w:flags.5?int h:flags.5?int caption:PageCaption = PageBlock;pageBlockEmbedPost#f259a80b url:string webpage_id:long author_photo_id:long author:string date:int blocks:Vector<PageBlock> caption:PageCaption = PageBlock;pageBlockCollage#65a0fa4d items:Vector<PageBlock> caption:PageCaption = PageBlock;pageBlockSlideshow#31f9590 items:Vector<PageBlock> caption:PageCaption = PageBlock;pageBlockChannel#ef1751b5 channel:Chat = PageBlock;pageBlockAudio#804361ea audio_id:long caption:PageCaption = PageBlock;pageBlockKicker#1e148390 text:RichText = PageBlock;pageBlockTable#bf4dea82 flags:# bordered:flags.0?true striped:flags.1?true title:RichText rows:Vector<PageTableRow> = PageBlock;pageBlockOrderedList#9a8ae1e1 items:Vector<PageListOrderedItem> = PageBlock;pageBlockDetails#76768bed flags:# open:flags.0?true blocks:Vector<PageBlock> title:RichText = PageBlock;pageBlockRelatedArticles#16115a96 title:RichText articles:Vector<PageRelatedArticle> = PageBlock;pageBlockMap#a44f3ef6 geo:GeoPoint zoom:int w:int h:int caption:PageCaption = PageBlock;phoneCallDiscardReasonMissed#85e42301 = PhoneCallDiscardReason;phoneCallDiscardReasonDisconnect#e095c1a0 = PhoneCallDiscardReason;phoneCallDiscardReasonHangup#57adc690 = PhoneCallDiscardReason;phoneCallDiscardReasonBusy#faf7e8c9 = PhoneCallDiscardReason;dataJSON#7d748d04 data:string = DataJSON;paymentCharge#ea02c27e id:string provider_charge_id:string = PaymentCharge;postAddress#1e8caaeb street_line1:string street_line2:string city:string state:string country_iso2:string post_code:string = PostAddress;paymentRequestedInfo#909c3f94 flags:# name:flags.0?string phone:flags.1?string email:flags.2?string shipping_address:flags.3?PostAddress = PaymentRequestedInfo;webDocument#1c570ed1 url:string access_hash:long size:int mime_type:string attributes:Vector<DocumentAttribute> = WebDocument;webDocumentNoProxy#f9c8bcc6 url:string size:int mime_type:string attributes:Vector<DocumentAttribute> = WebDocument;phoneCallEmpty#5366c915 id:long = PhoneCall;phoneCallWaiting#1b8f4ad1 flags:# video:flags.5?true id:long access_hash:long date:int admin_id:int participant_id:int protocol:PhoneCallProtocol receive_date:flags.0?int = PhoneCall;phoneCallRequested#87eabb53 flags:# video:flags.5?true id:long access_hash:long date:int admin_id:int participant_id:int g_a_hash:bytes protocol:PhoneCallProtocol = PhoneCall;phoneCallAccepted#997c454a flags:# video:flags.5?true id:long access_hash:long date:int admin_id:int participant_id:int g_b:bytes protocol:PhoneCallProtocol = PhoneCall;phoneCall#8742ae7f flags:# p2p_allowed:flags.5?true id:long access_hash:long date:int admin_id:int participant_id:int g_a_or_b:bytes key_fingerprint:long protocol:PhoneCallProtocol connections:Vector<PhoneConnection> start_date:int = PhoneCall;phoneCallDiscarded#50ca4de1 flags:# need_rating:flags.2?true need_debug:flags.3?true video:flags.5?true id:long reason:flags.0?PhoneCallDiscardReason duration:flags.1?int = PhoneCall;phoneConnection#9d4c17c0 id:long ip:string ipv6:string port:int peer_tag:bytes = PhoneConnection;phoneCallProtocol#a2bb35cb flags:# udp_p2p:flags.0?true udp_reflector:flags.1?true min_layer:int max_layer:int = PhoneCallProtocol;langPackString#cad181f6 key:string value:string = LangPackString;langPackStringPluralized#6c47ac9f flags:# key:string zero_value:flags.0?string one_value:flags.1?string two_value:flags.2?string few_value:flags.3?string many_value:flags.4?string other_value:string = LangPackString;langPackStringDeleted#2979eeb2 key:string = LangPackString;langPackDifference#f385c1f6 lang_code:string from_version:int version:int strings:Vector<LangPackString> = LangPackDifference;inputMessageID#a676a322 id:int = InputMessage;inputMessageReplyTo#bad88395 id:int = InputMessage;inputMessagePinned#86872538 = InputMessage;inputDialogPeer#fcaafeb7 peer:InputPeer = InputDialogPeer;inputDialogPeerFolder#64600527 folder_id:int = InputDialogPeer;dialogPeer#e56dbf05 peer:Peer = DialogPeer;dialogPeerFolder#514519e2 folder_id:int = DialogPeer;fileHash#6242c773 offset:int limit:int hash:bytes = FileHash;inputClientProxy#75588b3f address:string port:int = InputClientProxy;secureFileEmpty#64199744 = SecureFile;secureFile#e0277a62 id:long access_hash:long size:int dc_id:int date:int file_hash:bytes secret:bytes = SecureFile;secureData#8aeabec3 data:bytes data_hash:bytes secret:bytes = SecureData;securePlainPhone#7d6099dd phone:string = SecurePlainData;securePlainEmail#21ec5a5f email:string = SecurePlainData;secureValueTypePersonalDetails#9d2a81e3 = SecureValueType;secureValueTypePassport#3dac6a00 = SecureValueType;secureValueTypeDriverLicense#6e425c4 = SecureValueType;secureValueTypeIdentityCard#a0d0744b = SecureValueType;secureValueTypeInternalPassport#99a48f23 = SecureValueType;secureValueTypeAddress#cbe31e26 = SecureValueType;secureValueTypeUtilityBill#fc36954e = SecureValueType;secureValueTypeBankStatement#89137c0d = SecureValueType;secureValueTypeRentalAgreement#8b883488 = SecureValueType;secureValueTypePassportRegistration#99e3806a = SecureValueType;secureValueTypeTemporaryRegistration#ea02ec33 = SecureValueType;secureValueTypePhone#b320aadb = SecureValueType;secureValueTypeEmail#8e3ca7ee = SecureValueType;secureValue#187fa0ca flags:# type:SecureValueType data:flags.0?SecureData front_side:flags.1?SecureFile reverse_side:flags.2?SecureFile selfie:flags.3?SecureFile translation:flags.6?Vector<SecureFile> files:flags.4?Vector<SecureFile> plain_data:flags.5?SecurePlainData hash:bytes = SecureValue;secureCredentialsEncrypted#33f0ea47 data:bytes hash:bytes secret:bytes = SecureCredentialsEncrypted;pageTableCell#34566b6a flags:# header:flags.0?true align_center:flags.3?true align_right:flags.4?true valign_middle:flags.5?true valign_bottom:flags.6?true text:flags.7?RichText colspan:flags.1?int rowspan:flags.2?int = PageTableCell;pageTableRow#e0c0c5e5 cells:Vector<PageTableCell> = PageTableRow;pageCaption#6f747657 text:RichText credit:RichText = PageCaption;pageListItemText#b92fb6cd text:RichText = PageListItem;pageListItemBlocks#25e073fc blocks:Vector<PageBlock> = PageListItem;pageListOrderedItemText#5e068047 num:string text:RichText = PageListOrderedItem;pageListOrderedItemBlocks#98dd8936 num:string blocks:Vector<PageBlock> = PageListOrderedItem;pageRelatedArticle#b390dc08 flags:# url:string webpage_id:long title:flags.0?string description:flags.1?string photo_id:flags.2?long author:flags.3?string published_date:flags.4?int = PageRelatedArticle;page#ae891bec flags:# part:flags.0?true rtl:flags.1?true v2:flags.2?true url:string blocks:Vector<PageBlock> photos:Vector<Photo> documents:Vector<Document> = Page;pollAnswer#6ca9c2e9 text:string option:bytes = PollAnswer;poll#d5529d06 id:long flags:# closed:flags.0?true public_voters:flags.1?true multiple_choice:flags.2?true quiz:flags.3?true question:string answers:Vector<PollAnswer> = Poll;pollAnswerVoters#3b6ddad2 flags:# chosen:flags.0?true correct:flags.1?true option:bytes voters:int = PollAnswerVoters;pollResults#5755785a flags:# min:flags.0?true results:flags.1?Vector<PollAnswerVoters> total_voters:flags.2?int = PollResults;chatAdminRights#5fb224d5 flags:# change_info:flags.0?true post_messages:flags.1?true edit_messages:flags.2?true delete_messages:flags.3?true ban_users:flags.4?true invite_users:flags.5?true pin_messages:flags.7?true add_admins:flags.9?true = ChatAdminRights;chatBannedRights#9f120418 flags:# view_messages:flags.0?true send_messages:flags.1?true send_media:flags.2?true send_stickers:flags.3?true send_gifs:flags.4?true send_games:flags.5?true send_inline:flags.6?true embed_links:flags.7?true send_polls:flags.8?true change_info:flags.10?true invite_users:flags.15?true pin_messages:flags.17?true until_date:int = ChatBannedRights;wallPaperSettings#5086cf8 flags:# blur:flags.1?true motion:flags.2?true background_color:flags.0?int second_background_color:flags.4?int intensity:flags.3?int rotation:flags.4?int = WallPaperSettings;fileLocationToBeDeprecated#bc7fc6cd volume_id:long local_id:int = FileLocation;folder#ff544e65 flags:# autofill_new_broadcasts:flags.0?true autofill_public_groups:flags.1?true autofill_new_correspondents:flags.2?true id:int title:string photo:flags.3?ChatPhoto = Folder;folderPeer#e9baa668 peer:Peer folder_id:int = FolderPeer;channelLocationEmpty#bfb5ad8b = ChannelLocation;channelLocation#209b82db geo_point:GeoPoint address:string = ChannelLocation;peerLocated#ca461b5d peer:Peer expires:int distance:int = PeerLocated;restrictionReason#d072acb4 platform:string reason:string text:string = RestrictionReason;theme#28f1114 flags:# creator:flags.0?true default:flags.1?true id:long access_hash:long slug:string title:string document:flags.2?Document settings:flags.3?ThemeSettings installs_count:int = Theme;baseThemeClassic#c3a12462 = BaseTheme;baseThemeDay#fbd81688 = BaseTheme;baseThemeNight#b7b31ea8 = BaseTheme;baseThemeTinted#6d5f77ee = BaseTheme;baseThemeArctic#5b11125a = BaseTheme;themeSettings#9c14984a flags:# base_theme:BaseTheme accent_color:int message_top_color:flags.0?int message_bottom_color:flags.0?int wallpaper:flags.1?WallPaper = ThemeSettings;webPageAttributeTheme#54b56617 flags:# documents:flags.0?Vector<Document> settings:flags.1?ThemeSettings = WebPageAttribute;;initConnection#785188b8 {X:Type} flags:# api_id:int device_model:string system_version:string app_version:string system_lang_code:string lang_pack:string lang_code:string proxy:flags.0?InputClientProxy query:!X = X;invokeWithLayer#da9b0d0d {X:Type} layer:int query:!X = X;auth.logOut#5717da40 = Bool;auth.exportAuthorization#e5bfffcd dc_id:int = auth.ExportedAuthorization;auth.importAuthorization#e3ef9613 id:int bytes:bytes = auth.Authorization;users.getFullUser#ca30a5b1 id:InputUser = UserFull;contacts.resolveUsername#f93ccba3 username:string = contacts.ResolvedPeer;messages.getMessages#63c66506 id:Vector<InputMessage> = messages.Messages;messages.getDialogs#a0ee3b73 flags:# exclude_pinned:flags.0?true folder_id:flags.1?int offset_date:int offset_id:int offset_peer:InputPeer limit:int hash:int = messages.Dialogs;messages.getHistory#dcbb8260 peer:InputPeer offset_id:int offset_date:int add_offset:int limit:int max_id:int min_id:int hash:int = messages.Messages;messages.search#8614ef68 flags:# peer:InputPeer q:string from_id:flags.0?InputUser filter:MessagesFilter min_date:int max_date:int offset_id:int add_offset:int limit:int max_id:int min_id:int hash:int = messages.Messages;messages.readHistory#e306d3a peer:InputPeer max_id:int = messages.AffectedMessages;messages.setTyping#a3825e50 peer:InputPeer action:SendMessageAction = Bool;messages.sendMessage#520c3870 flags:# no_webpage:flags.1?true silent:flags.5?true background:flags.6?true clear_draft:flags.7?true peer:InputPeer reply_to_msg_id:flags.0?int message:string random_id:long reply_markup:flags.2?ReplyMarkup entities:flags.3?Vector<MessageEntity> schedule_date:flags.10?int = Updates;messages.sendMedia#3491eba9 flags:# silent:flags.5?true background:flags.6?true clear_draft:flags.7?true peer:InputPeer reply_to_msg_id:flags.0?int media:InputMedia message:string random_id:long reply_markup:flags.2?ReplyMarkup entities:flags.3?Vector<MessageEntity> schedule_date:flags.10?int = Updates;messages.getFullChat#3b831c66 chat_id:int = messages.ChatFull;messages.getWebPagePreview#8b68b0cc flags:# message:string entities:flags.3?Vector<MessageEntity> = MessageMedia;messages.getPeerDialogs#e470bcfd peers:Vector<InputDialogPeer> = messages.PeerDialogs;updates.getState#edd4882a = updates.State;updates.getDifference#25939651 flags:# pts:int pts_total_limit:flags.0?int date:int qts:int = updates.Difference;updates.getChannelDifference#3173d78 flags:# force:flags.0?true channel:InputChannel filter:ChannelMessagesFilter pts:int limit:int = updates.ChannelDifference;upload.saveFilePart#b304a621 file_id:long file_part:int bytes:bytes = Bool;upload.getFile#b15a9afc flags:# precise:flags.0?true cdn_supported:flags.1?true location:InputFileLocation offset:int limit:int = upload.File;upload.saveBigFilePart#de7b673d file_id:long file_part:int file_total_parts:int bytes:bytes = Bool;help.getNearestDc#1fb33026 = NearestDc;channels.readHistory#cc104937 channel:InputChannel max_id:int = Bool;channels.getMessages#ad8c9a23 channel:InputChannel id:Vector<InputMessage> = messages.Messages;channels.getFullChannel#8736a09 channel:InputChannel = messages.ChatFull"),await Promise.all([ee(),O(),ue(),oe(),A(),E(),q()]),e.appComponent=document.createElement("tg-block-app"),document.body.appendChild(e.appComponent)},e.lottieLoaded=()=>{},e.protoInited=async()=>{await tgProto.initUpdates(),ot.resolve()},e.userId=nt,e.waitProtoInited=()=>ot.promise,e}({});
